<?xml version="1.0" encoding="utf-8"?>
<Type>
  <Information>
    <Name>fullcalendar</Name>
    <DisplayName>#Lang(001)</DisplayName>
    <Description>#Lang(002)</Description>
    <ClassName>VDOM_fullcalendar</ClassName>
    <ID>036a5b8f-483f-48ca-fe57-6b767d76173f</ID>
    <Icon>#Res(70817b3b-d42d-4273-2b06-16afdd3a785d)</Icon>
    <EditorIcon>#Res(e9bf2264-1626-4bfe-cfb5-16b02bc0a592)</EditorIcon>
    <StructureIcon>#Res(295eb21b-f523-0b8a-a6fa-16b082054ab9)</StructureIcon>
    <Moveable>1</Moveable>
    <Resizable>3</Resizable>
    <Container>1</Container>
    <Category>Additional</Category>
    <Dynamic>1</Dynamic>
    <Version>2.34</Version>
    <InterfaceType>1</InterfaceType>
    <OptimizationPriority>1</OptimizationPriority>
    <Containers>htmlcontainer, dialog, container, tablecell</Containers>
    <Languages>en_US ,fr_FR ,ru_RU</Languages>
    <Handlers/>
    <RemoteMethods/>
    <WCAG/>
    <XMLScriptName/>
  </Information>
  <Attributes>
    <Attribute>
      <Name>stateful</Name>
      <DisplayName>#Lang(101)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(201)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(401)|0)|(#Lang(402)|1))</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(301)</ErrorValidationMessage>
      <RegularExpressionValidation>^[01]$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>hierarchy</Name>
      <DisplayName>#Lang(102)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(202)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(2)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(302)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,2}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>visible</Name>
      <DisplayName>#Lang(103)</DisplayName>
      <DefaultValue>1</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(203)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(403)|0)|(#Lang(404)|1))</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(303)</ErrorValidationMessage>
      <RegularExpressionValidation>^[01]$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>zindex</Name>
      <DisplayName>#Lang(104)</DisplayName>
      <DefaultValue>1</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(204)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(2)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(304)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,2}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>top</Name>
      <DisplayName>#Lang(105)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(205)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(4)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(305)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>left</Name>
      <DisplayName>#Lang(106)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(206)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(4)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(306)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>width</Name>
      <DisplayName>#Lang(107)</DisplayName>
      <DefaultValue>200</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(207)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(4)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(307)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>height</Name>
      <DisplayName>#Lang(108)</DisplayName>
      <DefaultValue>120</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(208)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(4)</CodeInterface>
      <Colorgroup>1</Colorgroup>
      <ErrorValidationMessage>#Lang(308)</ErrorValidationMessage>
      <RegularExpressionValidation>^\d{1,4}$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>events</Name>
      <DisplayName>#Lang(109)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(209)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>Multiline(300)</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(309)</ErrorValidationMessage>
      <RegularExpressionValidation>.*</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>view</Name>
      <DisplayName>#Lang(111)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(211)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(405)|0)|(#Lang(406)|1)|(#Lang(407)|2))</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(311)</ErrorValidationMessage>
      <RegularExpressionValidation>^.*$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>display_date</Name>
      <DisplayName>#Lang(112)</DisplayName>
      <DefaultValue>2010-01-01</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(212)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(15)</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(312)</ErrorValidationMessage>
      <RegularExpressionValidation>.*$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>time_format</Name>
      <DisplayName>#Lang(113)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(213)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(408)|0)|(#Lang(409)|1))</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(313)</ErrorValidationMessage>
      <RegularExpressionValidation>1|0</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>first_day</Name>
      <DisplayName>#Lang(114)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(214)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(411)|1)|(#Lang(412)|2)|(#Lang(413)|3)|(#Lang(414)|4)|(#Lang(415)|5)|(#Lang(416)|6)|(#Lang(417)|0))</CodeInterface>
      <Colorgroup>4</Colorgroup>
      <ErrorValidationMessage>#Lang(314)</ErrorValidationMessage>
      <RegularExpressionValidation>[0-6]</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>day_names</Name>
      <DisplayName>#Lang(115)</DisplayName>
      <DefaultValue>Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(215)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(300)</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(315)</ErrorValidationMessage>
      <RegularExpressionValidation>[*,*,*,*,*,*,*]</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>short_day_names</Name>
      <DisplayName>#Lang(116)</DisplayName>
      <DefaultValue>Mon,Tue,Wed,Thu,Fri,Sat,Sun</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(216)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(300)</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(316)</ErrorValidationMessage>
      <RegularExpressionValidation>[*,*,*,*,*,*,*]</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>short_month_names</Name>
      <DisplayName>#Lang(117)</DisplayName>
      <DefaultValue>Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(217)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(300)</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(317)</ErrorValidationMessage>
      <RegularExpressionValidation>[*,*,*,*,*,*,*]</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>month_names</Name>
      <DisplayName>#Lang(118)</DisplayName>
      <DefaultValue>January,February,March,April,May,June,July,August,September,October,November,December</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(218)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(300)</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(318)</ErrorValidationMessage>
      <RegularExpressionValidation>[*,*,*,*,*,*,*]</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>editable</Name>
      <DisplayName>#Lang(119)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(219)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(418)|0)|(#Lang(419)|1))</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(319)</ErrorValidationMessage>
      <RegularExpressionValidation>[0-1]</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>first_hour</Name>
      <DisplayName>#Lang(121)</DisplayName>
      <DefaultValue>8</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(221)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(300)</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(321)</ErrorValidationMessage>
      <RegularExpressionValidation>.*$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>all_day_visible</Name>
      <DisplayName>#Lang(122)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(222)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(421)|0)|(#Lang(422)|1))</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(322)</ErrorValidationMessage>
      <RegularExpressionValidation>[0-1]</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>all_day_title</Name>
      <DisplayName>#Lang(123)</DisplayName>
      <DefaultValue/>
      <Visible>1</Visible>
      <Help>#Lang(223)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>TextField(300)</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(323)</ErrorValidationMessage>
      <RegularExpressionValidation>.*$</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>selectable</Name>
      <DisplayName>#Lang(124)</DisplayName>
      <DefaultValue>0</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(224)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(423)|0)|(#Lang(424)|1))</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(324)</ErrorValidationMessage>
      <RegularExpressionValidation>[0-1]</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>slot_minutes</Name>
      <DisplayName>#Lang(125)</DisplayName>
      <DefaultValue>5</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(225)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(425)|0)|(#Lang(426)|1)|(#Lang(427)|2)|(#Lang(428)|3)|(#Lang(429)|4)|(#Lang(431)|5))</CodeInterface>
      <Colorgroup>2</Colorgroup>
      <ErrorValidationMessage>#Lang(325)</ErrorValidationMessage>
      <RegularExpressionValidation>[0-5]</RegularExpressionValidation>
    </Attribute>
    <Attribute>
      <Name>lazyloading</Name>
      <DisplayName>#Lang(126)</DisplayName>
      <DefaultValue>1</DefaultValue>
      <Visible>1</Visible>
      <Help>#Lang(226)</Help>
      <InterfaceType>0</InterfaceType>
      <CodeInterface>DropDown((#Lang(432)|1)|(#Lang(433)|0))</CodeInterface>
      <Colorgroup>3</Colorgroup>
      <ErrorValidationMessage>#Lang(326)</ErrorValidationMessage>
      <RegularExpressionValidation>[0-1]</RegularExpressionValidation>
    </Attribute>
  </Attributes>
  <Languages>
    <Language Code="en_US">
      <Sentence ID="001">Full calendar</Sentence>
      <Sentence ID="002">The Full calendar type produces an object displayed as a calendar, that allows creating, editing, viewing and deleting the events.</Sentence>
      <Sentence ID="003"></Sentence>
      <Sentence ID="101"></Sentence>
      <Sentence ID="102">Hierarchy</Sentence>
      <Sentence ID="103">Visibility</Sentence>
      <Sentence ID="104">Z-Index</Sentence>
      <Sentence ID="105">Top</Sentence>
      <Sentence ID="106">Left</Sentence>
      <Sentence ID="107">Width</Sentence>
      <Sentence ID="108">Height</Sentence>
      <Sentence ID="109">Events</Sentence>
      <Sentence ID="111">View</Sentence>
      <Sentence ID="112">Default date</Sentence>
      <Sentence ID="113">Time format</Sentence>
      <Sentence ID="114">First day in week</Sentence>
      <Sentence ID="115">Day names</Sentence>
      <Sentence ID="116">Short Day Names</Sentence>
      <Sentence ID="117">Short Month Names</Sentence>
      <Sentence ID="118">Month Names</Sentence>
      <Sentence ID="119">Editable</Sentence>
      <Sentence ID="121">First hour</Sentence>
      <Sentence ID="122">All-day slot visibility</Sentence>
      <Sentence ID="123">All-day title</Sentence>
      <Sentence ID="124">Selectable</Sentence>
      <Sentence ID="125">Slot minutes interval</Sentence>
      <Sentence ID="126">lazyLoading</Sentence>
      <Sentence ID="201"></Sentence>
      <Sentence ID="202">The order of rendering the object on the page. The objects with identical values of the Hierarchy attribute are rendered in the order they are written in the XML-file of the VDOM application.</Sentence>
      <Sentence ID="203">The visibility of the object. In any case the object will exist on the web page, this attribute only makes it invisible.</Sentence>
      <Sentence ID="204">The position in visual hierarchy of objects. If you have several objects in one container situated on each other, the value of 'Z-Index' attribute indicates the order of their displaying. The larger the value is, the upper the object is situated.</Sentence>
      <Sentence ID="205">Spacing in pixels between the object and the top border of the container, in which the object is situated.</Sentence>
      <Sentence ID="206">Spacing in pixels between the object and the left border of the container, in which the object is situated.</Sentence>
      <Sentence ID="207">The width of the object in pixels.</Sentence>
      <Sentence ID="208">The height of the object in pixels.</Sentence>
      <Sentence ID="209">The list of events, which are represented as \href{www.ietf.org/rfc/rfc2445.txt}{iCalendar} objects.</Sentence>
      <Sentence ID="211">The way of displaying the object on loading.</Sentence>
      <Sentence ID="212">The initial date in 'YYYY-MM-DD' format, which is used on loading the object.</Sentence>
      <Sentence ID="213">The format of displaying the time. If it is set to 12, the time will be displayed as '11am' and '8.30pm'; if it is set to 24, the time will be displayed as '11.00' and '20.30'.</Sentence>
      <Sentence ID="214">The day of the week that is displayed first.</Sentence>
      <Sentence ID="215">The names of the days of the week, must be entered through commas without spaces.</Sentence>
      <Sentence ID="216">The short names of the days of the week, must be entered through commas without spaces.</Sentence>
      <Sentence ID="217">The short names of the months, must be entered through commas without spaces.</Sentence>
      <Sentence ID="218">The names of the months, must be entered through commas without spaces.</Sentence>
      <Sentence ID="219">The possibility of modifying the events. If it is set to 'Yes', the events can be modified, if 'No'---cannot.</Sentence>
      <Sentence ID="221">The first hour that will be visible in the scroll pane. The values must be from 0-23, where 0=midnight, 1=1am and so on. The user will be able to scroll upwards to see events before this time.</Sentence>
      <Sentence ID="222">Define whether the 'all-day' slot is displayed at the top of the calendar or not.</Sentence>
      <Sentence ID="223">The title of the 'all-day' slot at the top of the calendar.</Sentence>
      <Sentence ID="224">Allow a user to highlight multiple days or timeslots by clicking and dragging.</Sentence>
      <Sentence ID="225">The frequency of displaying time slots, in minutes.</Sentence>
      <Sentence ID="226">Loading data dynamically, defines in what case a request for a new list of events will be sent to the server. If it is set to 'No', a request is sent each time some change of date/view takes place; if to 'Yes'---a request is sent each time a transition to the next/previous month takes place.</Sentence>
      <Sentence ID="301"></Sentence>
      <Sentence ID="302">Incorrect value, must be positive integer</Sentence>
      <Sentence ID="303">Incorrect value</Sentence>
      <Sentence ID="304">Incorrect value, must be integer from 0 to 99</Sentence>
      <Sentence ID="305">Incorrect value, must be positive integer</Sentence>
      <Sentence ID="306">Incorrect value, must be positive integer</Sentence>
      <Sentence ID="307">Incorrect value, must be positive integer</Sentence>
      <Sentence ID="308">Incorrect value, must be positive integer</Sentence>
      <Sentence ID="309">Incorrect value, must be positive integer</Sentence>
      <Sentence ID="311">Incorrect value</Sentence>
      <Sentence ID="312">Incorrect value</Sentence>
      <Sentence ID="313">time format should be 12 or 24</Sentence>
      <Sentence ID="314">First day: value should be between 0 and 6</Sentence>
      <Sentence ID="315">enter list with names of weekdays.</Sentence>
      <Sentence ID="316">enter list with names of weekdays.</Sentence>
      <Sentence ID="317">enter list with names of weekdays.</Sentence>
      <Sentence ID="318">enter list with names of weekdays.</Sentence>
      <Sentence ID="319">Incorrect value</Sentence>
      <Sentence ID="321">Incorrect value</Sentence>
      <Sentence ID="322">Incorrect value</Sentence>
      <Sentence ID="323">Incorrect value</Sentence>
      <Sentence ID="324">Incorrect value</Sentence>
      <Sentence ID="325">Incorrect value</Sentence>
      <Sentence ID="326"></Sentence>
      <Sentence ID="401"></Sentence>
      <Sentence ID="402"></Sentence>
      <Sentence ID="403">Invisible</Sentence>
      <Sentence ID="404">Visible</Sentence>
      <Sentence ID="405">Month</Sentence>
      <Sentence ID="406">Week</Sentence>
      <Sentence ID="407">Day</Sentence>
      <Sentence ID="408">12</Sentence>
      <Sentence ID="409">24</Sentence>
      <Sentence ID="411">MO</Sentence>
      <Sentence ID="412">TU</Sentence>
      <Sentence ID="413">WE</Sentence>
      <Sentence ID="414">TH</Sentence>
      <Sentence ID="415">FR</Sentence>
      <Sentence ID="416">SA</Sentence>
      <Sentence ID="417">SU</Sentence>
      <Sentence ID="418">No</Sentence>
      <Sentence ID="419">Yes</Sentence>
      <Sentence ID="421">No</Sentence>
      <Sentence ID="422">Yes</Sentence>
      <Sentence ID="423">No</Sentence>
      <Sentence ID="424">Yes</Sentence>
      <Sentence ID="425">5</Sentence>
      <Sentence ID="426">10</Sentence>
      <Sentence ID="427">15</Sentence>
      <Sentence ID="428">20</Sentence>
      <Sentence ID="429">25</Sentence>
      <Sentence ID="431">30</Sentence>
      <Sentence ID="432">Yes</Sentence>
      <Sentence ID="433">No</Sentence>
      <Sentence ID="501">Resize the object's width and height.</Sentence>
      <Sentence ID="502">Hide the object.</Sentence>
      <Sentence ID="503">Show the object.</Sentence>
      <Sentence ID="504">Remove events from the calendar.</Sentence>
      <Sentence ID="505">Move the object to a new position.</Sentence>
      <Sentence ID="506">Go to the specified date.</Sentence>
      <Sentence ID="507">Set new value of the 'Z-Index' attribute.</Sentence>
      <Sentence ID="508">Change the value of the 'View' attribute.</Sentence>
      <Sentence ID="509">Add events source dynamically, including the events with the recurrence rule. Events will be immediately fetched from this source and placed on the calendar.</Sentence>
      <Sentence ID="511">Go to the previous month, week or year (depending on the value of the 'View' attribute).</Sentence>
      <Sentence ID="512">Add events source dynamically, except the events with the recurrence rule. Events will be immediately fetched from this source and placed on the calendar.</Sentence>
      <Sentence ID="513">Go to the next month, week, or year (depending on the value of the 'View' attribute).</Sentence>
      <Sentence ID="514"></Sentence>
      <Sentence ID="515"></Sentence>
      <Sentence ID="516"></Sentence>
      <Sentence ID="517"></Sentence>
      <Sentence ID="518"></Sentence>
      <Sentence ID="519"></Sentence>
      <Sentence ID="521"></Sentence>
      <Sentence ID="522"></Sentence>
      <Sentence ID="523"></Sentence>
      <Sentence ID="524"></Sentence>
      <Sentence ID="525"></Sentence>
      <Sentence ID="526"></Sentence>
      <Sentence ID="527"></Sentence>
      <Sentence ID="528"></Sentence>
      <Sentence ID="601">Visibility</Sentence>
      <Sentence ID="602">Visibility</Sentence>
      <Sentence ID="603">Visibility</Sentence>
      <Sentence ID="604">Next</Sentence>
      <Sentence ID="605">Visibility</Sentence>
      <Sentence ID="606">Visibility</Sentence>
      <Sentence ID="607">Visibility</Sentence>
      <Sentence ID="608">Visibility</Sentence>
      <Sentence ID="609">Visibility</Sentence>
      <Sentence ID="611">Previous</Sentence>
      <Sentence ID="612">Visibility</Sentence>
      <Sentence ID="613">Next</Sentence>
      <Sentence ID="701">Incorrect value</Sentence>
      <Sentence ID="702">Incorrect value</Sentence>
      <Sentence ID="703">Incorrect value</Sentence>
      <Sentence ID="704">Incorrect value</Sentence>
      <Sentence ID="705">Incorrect value</Sentence>
      <Sentence ID="706">Incorrect value</Sentence>
      <Sentence ID="707">Incorrect value</Sentence>
      <Sentence ID="708">Incorrect value</Sentence>
      <Sentence ID="709">Incorrect value</Sentence>
      <Sentence ID="711">Incorrect value</Sentence>
      <Sentence ID="712">Incorrect value</Sentence>
      <Sentence ID="713">Incorrect value</Sentence>
      <Sentence ID="714">Incorrect value</Sentence>
      <Sentence ID="801">Incorrect value</Sentence>
      <Sentence ID="802">Incorrect value</Sentence>
      <Sentence ID="803">Incorrect value</Sentence>
      <Sentence ID="804">Incorrect value</Sentence>
      <Sentence ID="805">Incorrect value</Sentence>
      <Sentence ID="806">Incorrect value</Sentence>
      <Sentence ID="807">Date format - YYYY-MM-DD</Sentence>
      <Sentence ID="808">Date format - YYYY-MM-DD</Sentence>
      <Sentence ID="809">Date format - YYYY-MM-DD</Sentence>
      <Sentence ID="811">Incorrect value</Sentence>
      <Sentence ID="812">'month','week','day'</Sentence>
      <Sentence ID="813">Date format - YYYY-MM-DD</Sentence>
      <Sentence ID="814">Date format - YYYY-MM-DD</Sentence>
      <Sentence ID="901">Start</Sentence>
      <Sentence ID="902">Start</Sentence>
      <Sentence ID="903">Start</Sentence>
      <Sentence ID="904">Start</Sentence>
      <Sentence ID="905">Start</Sentence>
      <Sentence ID="906">Start</Sentence>
      <Sentence ID="907">Start</Sentence>
      <Sentence ID="908">Start</Sentence>
      <Sentence ID="909">Start</Sentence>
      <Sentence ID="911">Start</Sentence>
      <Sentence ID="912">Start</Sentence>
      <Sentence ID="913">Start</Sentence>
      <Sentence ID="914">Start</Sentence>
      <Sentence ID="915">Start</Sentence>
      <Sentence ID="916">Start</Sentence>
      <Sentence ID="917">Start</Sentence>
      <Sentence ID="918">Start</Sentence>
      <Sentence ID="919">Start</Sentence>
      <Sentence ID="921">Start</Sentence>
      <Sentence ID="922">Start</Sentence>
      <Sentence ID="923">Start</Sentence>
      <Sentence ID="924">Start</Sentence>
      <Sentence ID="925">Start</Sentence>
      <Sentence ID="926">Start</Sentence>
      <Sentence ID="927">Start</Sentence>
      <Sentence ID="928">Start</Sentence>
      <Sentence ID="929">Start</Sentence>
      <Sentence ID="931">Start</Sentence>
      <Sentence ID="932">Start</Sentence>
      <Sentence ID="933">Start</Sentence>
      <Sentence ID="934">Start</Sentence>
      <Sentence ID="935">Start</Sentence>
      <Sentence ID="936">Start</Sentence>
      <Sentence ID="937">Start</Sentence>
      <Sentence ID="938">Start</Sentence>
      <Sentence ID="939">Start</Sentence>
      <Sentence ID="941">Start</Sentence>
      <Sentence ID="942">Start</Sentence>
      <Sentence ID="943">Start</Sentence>
      <Sentence ID="944">Start</Sentence>
      <Sentence ID="945">Start</Sentence>
      <Sentence ID="946">Start</Sentence>
      <Sentence ID="947">Start</Sentence>
      <Sentence ID="948">Start</Sentence>
      <Sentence ID="949">Start</Sentence>
      <Sentence ID="951">Start</Sentence>
    </Language>
    <Language Code="fr_FR">
      <Sentence ID="001">Bouton</Sentence>
      <Sentence ID="002">Lien sur une image</Sentence>
      <Sentence ID="003"></Sentence>
      <Sentence ID="101"></Sentence>
      <Sentence ID="102">Hierarchie</Sentence>
      <Sentence ID="103">Visibilite</Sentence>
      <Sentence ID="104">Z-Index</Sentence>
      <Sentence ID="105">Haut</Sentence>
      <Sentence ID="106">Gauche</Sentence>
      <Sentence ID="107">Largeur</Sentence>
      <Sentence ID="108">Hauteur</Sentence>
      <Sentence ID="109">WTF</Sentence>
      <Sentence ID="111">OMG</Sentence>
      <Sentence ID="112">displayDate</Sentence>
      <Sentence ID="113"></Sentence>
      <Sentence ID="114">Time Format</Sentence>
      <Sentence ID="115"></Sentence>
      <Sentence ID="116">Short Day Names</Sentence>
      <Sentence ID="117">Short Month Names</Sentence>
      <Sentence ID="118">Month Names</Sentence>
      <Sentence ID="119">Editable</Sentence>
      <Sentence ID="121">First hour</Sentence>
      <Sentence ID="122">All-day slot visibility</Sentence>
      <Sentence ID="123">All-day title</Sentence>
      <Sentence ID="124">Selectable</Sentence>
      <Sentence ID="125">Slot minutes interval</Sentence>
      <Sentence ID="126"></Sentence>
      <Sentence ID="201"></Sentence>
      <Sentence ID="202">Hierarchie de l'objet, ordre de chargement de l'objet par rapport aux autres</Sentence>
      <Sentence ID="203">Afficher ou cacher l'objet</Sentence>
      <Sentence ID="204">Niveau de superposition de l'objet par rapport aux autres</Sentence>
      <Sentence ID="205">Distance depuis le bord haut de l'objet parent en pixels</Sentence>
      <Sentence ID="206">Distance depuis le bord gauche de l'objet parent en pixels</Sentence>
      <Sentence ID="207">Largeur de l'objet en pixels</Sentence>
      <Sentence ID="208">Hauteur de l'objet en pixels</Sentence>
      <Sentence ID="209">Hierarchie de l'objet, ordre de chargement de l'objet par rapport aux autres</Sentence>
      <Sentence ID="211"></Sentence>
      <Sentence ID="212">The initial date when the calendar loads.</Sentence>
      <Sentence ID="213">Determines the time-text that will be displayed on each event.</Sentence>
      <Sentence ID="214">The day that each week begins.</Sentence>
      <Sentence ID="215">Full names of days-of-week.</Sentence>
      <Sentence ID="216">Full names of days-of-week.</Sentence>
      <Sentence ID="217">Full names of days-of-week.</Sentence>
      <Sentence ID="218">Full names of days-of-week.</Sentence>
      <Sentence ID="219">Determines whether the events on the calendar can be modified.</Sentence>
      <Sentence ID="221">The text titling the "all-day" slot at the top of the calendar.</Sentence>
      <Sentence ID="222">Determines if the "all-day" slot is displayed at the top of the calendar.</Sentence>
      <Sentence ID="223">The text titling the "all-day" slot at the top of the calendar.</Sentence>
      <Sentence ID="224">Allows a user to highlight multiple days or timeslots by clicking and dragging.</Sentence>
      <Sentence ID="225">The frequency for displaying time slots, in minutes.</Sentence>
      <Sentence ID="226"></Sentence>
      <Sentence ID="301"></Sentence>
      <Sentence ID="302">Valeur Incorrecte, doit etre positive</Sentence>
      <Sentence ID="303">Valeur Incorrecte</Sentence>
      <Sentence ID="304">Valeur Incorrecte, doit etre comprise entre 0 et 99</Sentence>
      <Sentence ID="305">Valeur Incorrecte, doit etre positive</Sentence>
      <Sentence ID="306">Valeur Incorrecte, doit etre positive</Sentence>
      <Sentence ID="307">Valeur Incorrecte, doit etre positive</Sentence>
      <Sentence ID="308">Valeur Incorrecte, doit etre positive</Sentence>
      <Sentence ID="309">Valeur Incorrecte, doit etre positive</Sentence>
      <Sentence ID="311">Valeur Incorrecte</Sentence>
      <Sentence ID="312">Valeur Incorrecte</Sentence>
      <Sentence ID="313"></Sentence>
      <Sentence ID="314"></Sentence>
      <Sentence ID="315"></Sentence>
      <Sentence ID="316"></Sentence>
      <Sentence ID="317"></Sentence>
      <Sentence ID="318"></Sentence>
      <Sentence ID="319">Valeur Incorrecte</Sentence>
      <Sentence ID="321">Valeur Incorrecte</Sentence>
      <Sentence ID="322">Valeur Incorrecte</Sentence>
      <Sentence ID="323">Valeur Incorrecte</Sentence>
      <Sentence ID="324">Valeur Incorrecte</Sentence>
      <Sentence ID="325">Valeur Incorrecte</Sentence>
      <Sentence ID="326"></Sentence>
      <Sentence ID="401"></Sentence>
      <Sentence ID="402"></Sentence>
      <Sentence ID="403">Invisible</Sentence>
      <Sentence ID="404">Visible</Sentence>
      <Sentence ID="405">month</Sentence>
      <Sentence ID="406">week</Sentence>
      <Sentence ID="407">day</Sentence>
      <Sentence ID="408">12</Sentence>
      <Sentence ID="409">24</Sentence>
      <Sentence ID="411">MO</Sentence>
      <Sentence ID="412">TU</Sentence>
      <Sentence ID="413">WE</Sentence>
      <Sentence ID="414">TH</Sentence>
      <Sentence ID="415">FR</Sentence>
      <Sentence ID="416">SA</Sentence>
      <Sentence ID="417">SU</Sentence>
      <Sentence ID="418">No</Sentence>
      <Sentence ID="419">Yes</Sentence>
      <Sentence ID="421">No</Sentence>
      <Sentence ID="422">Yes</Sentence>
      <Sentence ID="423">No</Sentence>
      <Sentence ID="424">Yes</Sentence>
      <Sentence ID="425"></Sentence>
      <Sentence ID="426"></Sentence>
      <Sentence ID="427"></Sentence>
      <Sentence ID="428"></Sentence>
      <Sentence ID="429"></Sentence>
      <Sentence ID="431"></Sentence>
      <Sentence ID="432">Yes</Sentence>
      <Sentence ID="433">No</Sentence>
      <Sentence ID="501">Visibilite</Sentence>
      <Sentence ID="502">Visibilite</Sentence>
      <Sentence ID="503">Visibilite</Sentence>
      <Sentence ID="504">Prochaine</Sentence>
      <Sentence ID="505">Visibilite</Sentence>
      <Sentence ID="506">Visibilite</Sentence>
      <Sentence ID="507">Visibilite</Sentence>
      <Sentence ID="508">Visibilite</Sentence>
      <Sentence ID="509">Visibilite</Sentence>
      <Sentence ID="511">Précédente</Sentence>
      <Sentence ID="512">Visibilite</Sentence>
      <Sentence ID="513">Prochaine</Sentence>
      <Sentence ID="514"></Sentence>
      <Sentence ID="515"></Sentence>
      <Sentence ID="516"></Sentence>
      <Sentence ID="517"></Sentence>
      <Sentence ID="518"></Sentence>
      <Sentence ID="519"></Sentence>
      <Sentence ID="521"></Sentence>
      <Sentence ID="522"></Sentence>
      <Sentence ID="523"></Sentence>
      <Sentence ID="524"></Sentence>
      <Sentence ID="525"></Sentence>
      <Sentence ID="526"></Sentence>
      <Sentence ID="527"></Sentence>
      <Sentence ID="528"></Sentence>
      <Sentence ID="601">Visibilite</Sentence>
      <Sentence ID="602">Visibilite</Sentence>
      <Sentence ID="603">Visibilite</Sentence>
      <Sentence ID="604">Prochaine</Sentence>
      <Sentence ID="605">Visibilite</Sentence>
      <Sentence ID="606">Visibilite</Sentence>
      <Sentence ID="607">Visibilite</Sentence>
      <Sentence ID="608">Visibilite</Sentence>
      <Sentence ID="609">Visibilite</Sentence>
      <Sentence ID="611">Précédente</Sentence>
      <Sentence ID="612">Visibilite</Sentence>
      <Sentence ID="613">Prochaine</Sentence>
      <Sentence ID="701">Valeur Incorrecte</Sentence>
      <Sentence ID="702">Valeur Incorrecte</Sentence>
      <Sentence ID="703">Valeur Incorrecte</Sentence>
      <Sentence ID="704">Valeur Incorrecte</Sentence>
      <Sentence ID="705">Valeur Incorrecte</Sentence>
      <Sentence ID="706">Valeur Incorrecte</Sentence>
      <Sentence ID="707">Valeur Incorrecte</Sentence>
      <Sentence ID="708">Valeur Incorrecte</Sentence>
      <Sentence ID="709">Valeur Incorrecte</Sentence>
      <Sentence ID="711">Valeur Incorrecte</Sentence>
      <Sentence ID="712">Valeur Incorrecte</Sentence>
      <Sentence ID="713">Valeur Incorrecte</Sentence>
      <Sentence ID="714">Valeur Incorrecte</Sentence>
      <Sentence ID="801">Valeur Incorrecte</Sentence>
      <Sentence ID="802">Valeur Incorrecte</Sentence>
      <Sentence ID="803">Valeur Incorrecte</Sentence>
      <Sentence ID="804">Valeur Incorrecte</Sentence>
      <Sentence ID="805">Valeur Incorrecte</Sentence>
      <Sentence ID="806">Valeur Incorrecte</Sentence>
      <Sentence ID="807">Date format - YYYY-MM-DD</Sentence>
      <Sentence ID="808">Date format - YYYY-MM-DD</Sentence>
      <Sentence ID="809">Date format - YYYY-MM-DD</Sentence>
      <Sentence ID="811">Valeur Incorrecte</Sentence>
      <Sentence ID="812">'month','week','day'</Sentence>
      <Sentence ID="813">Date format - YYYY-MM-DD</Sentence>
      <Sentence ID="814">Date format - YYYY-MM-DD</Sentence>
      <Sentence ID="901">Start</Sentence>
      <Sentence ID="902">Start</Sentence>
      <Sentence ID="903">Start</Sentence>
      <Sentence ID="904">Start</Sentence>
      <Sentence ID="905">Start</Sentence>
      <Sentence ID="906">Start</Sentence>
      <Sentence ID="907">Start</Sentence>
      <Sentence ID="908">Start</Sentence>
      <Sentence ID="909">Start</Sentence>
      <Sentence ID="911">Start</Sentence>
      <Sentence ID="912">Start</Sentence>
      <Sentence ID="913">Start</Sentence>
      <Sentence ID="914">Start</Sentence>
      <Sentence ID="915">Start</Sentence>
      <Sentence ID="916">Start</Sentence>
      <Sentence ID="917">Start</Sentence>
      <Sentence ID="918">Start</Sentence>
      <Sentence ID="919">Start</Sentence>
      <Sentence ID="921">Start</Sentence>
      <Sentence ID="922">Start</Sentence>
      <Sentence ID="923">Start</Sentence>
      <Sentence ID="924">Start</Sentence>
      <Sentence ID="925">Start</Sentence>
      <Sentence ID="926">Start</Sentence>
      <Sentence ID="927">Start</Sentence>
      <Sentence ID="928">Start</Sentence>
      <Sentence ID="929">Start</Sentence>
      <Sentence ID="931">Start</Sentence>
      <Sentence ID="932">Start</Sentence>
      <Sentence ID="933">Start</Sentence>
      <Sentence ID="934">Start</Sentence>
      <Sentence ID="935">Start</Sentence>
      <Sentence ID="936">Start</Sentence>
      <Sentence ID="937">Start</Sentence>
      <Sentence ID="938">Start</Sentence>
      <Sentence ID="939">Start</Sentence>
      <Sentence ID="941">Start</Sentence>
      <Sentence ID="942">Start</Sentence>
      <Sentence ID="943">Start</Sentence>
      <Sentence ID="944">Start</Sentence>
      <Sentence ID="945">Start</Sentence>
      <Sentence ID="946">Start</Sentence>
      <Sentence ID="947">Start</Sentence>
      <Sentence ID="948">Start</Sentence>
      <Sentence ID="949">Start</Sentence>
      <Sentence ID="951">Start</Sentence>
    </Language>
    <Language Code="ru_RU">
      <Sentence ID="001">Кнопка</Sentence>
      <Sentence ID="002">Кнопка в виде ссылки или изображения</Sentence>
      <Sentence ID="003"></Sentence>
      <Sentence ID="101"></Sentence>
      <Sentence ID="102">Иерархия</Sentence>
      <Sentence ID="103">Отображение</Sentence>
      <Sentence ID="104">Z-Индекс</Sentence>
      <Sentence ID="105">Верх</Sentence>
      <Sentence ID="106">Лево</Sentence>
      <Sentence ID="107">Ширина</Sentence>
      <Sentence ID="108">Высота</Sentence>
      <Sentence ID="109">События</Sentence>
      <Sentence ID="111">Вид</Sentence>
      <Sentence ID="112">Отображаемая дата</Sentence>
      <Sentence ID="113">Формат времени</Sentence>
      <Sentence ID="114"></Sentence>
      <Sentence ID="115"></Sentence>
      <Sentence ID="116">Short Day Names</Sentence>
      <Sentence ID="117">Short Month Names</Sentence>
      <Sentence ID="118">Month Names</Sentence>
      <Sentence ID="119">Editable</Sentence>
      <Sentence ID="121">First hour</Sentence>
      <Sentence ID="122">All-day slot visibility</Sentence>
      <Sentence ID="123">All-day title</Sentence>
      <Sentence ID="124">Selectable</Sentence>
      <Sentence ID="125">Slot minutes interval</Sentence>
      <Sentence ID="126"></Sentence>
      <Sentence ID="201"></Sentence>
      <Sentence ID="202">Приоритет в потоке гипертекста</Sentence>
      <Sentence ID="203">Отображается объект или нет</Sentence>
      <Sentence ID="204">Положение в визуальной иерархии объектов</Sentence>
      <Sentence ID="205">Расстояние от верхней границы родительского контейнера до объекта в пикселях</Sentence>
      <Sentence ID="206">Расстояние от левой границы родительского контейнера до объекта в пикселях</Sentence>
      <Sentence ID="207">Ширина объекта в пикселях</Sentence>
      <Sentence ID="208">Высота объекта в пикселях</Sentence>
      <Sentence ID="209">Приоритет в потоке гипертекста</Sentence>
      <Sentence ID="211">Вид календаря при загрузке</Sentence>
      <Sentence ID="212">Дата при загрузке</Sentence>
      <Sentence ID="213">Determines the time-text that will be displayed on each event.</Sentence>
      <Sentence ID="214">The day that each week begins.</Sentence>
      <Sentence ID="215">Full names of days-of-week.</Sentence>
      <Sentence ID="216">Full names of days-of-week.</Sentence>
      <Sentence ID="217">Full names of days-of-week.</Sentence>
      <Sentence ID="218">Full names of days-of-week.</Sentence>
      <Sentence ID="219">Determines whether the events on the calendar can be modified.</Sentence>
      <Sentence ID="221">The text titling the "all-day" slot at the top of the calendar.</Sentence>
      <Sentence ID="222">Determines if the "all-day" slot is displayed at the top of the calendar.</Sentence>
      <Sentence ID="223">The text titling the "all-day" slot at the top of the calendar.</Sentence>
      <Sentence ID="224">Allows a user to highlight multiple days or timeslots by clicking and dragging.</Sentence>
      <Sentence ID="225">The frequency for displaying time slots, in minutes.</Sentence>
      <Sentence ID="226"></Sentence>
      <Sentence ID="301"></Sentence>
      <Sentence ID="302">Неправильное значение</Sentence>
      <Sentence ID="303">Неправильное значение</Sentence>
      <Sentence ID="304">Неправильное значение, должно быть целое число от 0 до 99</Sentence>
      <Sentence ID="305">Неправильное значение, должно быть целое положительное число</Sentence>
      <Sentence ID="306">Неправильное значение, должно быть целое положительное число</Sentence>
      <Sentence ID="307">Неправильное значение, должно быть целое положительное число</Sentence>
      <Sentence ID="308">Неправильное значение, должно быть целое положительное число</Sentence>
      <Sentence ID="309">Неправильное значение</Sentence>
      <Sentence ID="311">Неправильное значение</Sentence>
      <Sentence ID="312">Неправильное значение</Sentence>
      <Sentence ID="313"></Sentence>
      <Sentence ID="314"></Sentence>
      <Sentence ID="315"></Sentence>
      <Sentence ID="316"></Sentence>
      <Sentence ID="317"></Sentence>
      <Sentence ID="318"></Sentence>
      <Sentence ID="319">Неправильное значение</Sentence>
      <Sentence ID="321">Неправильное значение</Sentence>
      <Sentence ID="322">Неправильное значение</Sentence>
      <Sentence ID="323">Неправильное значение</Sentence>
      <Sentence ID="324">Неправильное значение</Sentence>
      <Sentence ID="325">Неправильное значение</Sentence>
      <Sentence ID="326"></Sentence>
      <Sentence ID="401"></Sentence>
      <Sentence ID="402"></Sentence>
      <Sentence ID="403">Не отображается</Sentence>
      <Sentence ID="404">Отображается</Sentence>
      <Sentence ID="405">месяц</Sentence>
      <Sentence ID="406">неделя</Sentence>
      <Sentence ID="407">день</Sentence>
      <Sentence ID="408">12</Sentence>
      <Sentence ID="409">24</Sentence>
      <Sentence ID="411">MO</Sentence>
      <Sentence ID="412">TU</Sentence>
      <Sentence ID="413">WE</Sentence>
      <Sentence ID="414">TH</Sentence>
      <Sentence ID="415">FR</Sentence>
      <Sentence ID="416">SA</Sentence>
      <Sentence ID="417">SU</Sentence>
      <Sentence ID="418">No</Sentence>
      <Sentence ID="419">Yes</Sentence>
      <Sentence ID="421">No</Sentence>
      <Sentence ID="422">Yes</Sentence>
      <Sentence ID="423">No</Sentence>
      <Sentence ID="424">Yes</Sentence>
      <Sentence ID="425"></Sentence>
      <Sentence ID="426"></Sentence>
      <Sentence ID="427"></Sentence>
      <Sentence ID="428"></Sentence>
      <Sentence ID="429"></Sentence>
      <Sentence ID="431"></Sentence>
      <Sentence ID="432">Yes</Sentence>
      <Sentence ID="433">No</Sentence>
      <Sentence ID="501">Отображение</Sentence>
      <Sentence ID="502">Отображение</Sentence>
      <Sentence ID="503">Отображение</Sentence>
      <Sentence ID="504">Вперед</Sentence>
      <Sentence ID="505">Отображение</Sentence>
      <Sentence ID="506">Отображение</Sentence>
      <Sentence ID="507">Отображение</Sentence>
      <Sentence ID="508">Отображение</Sentence>
      <Sentence ID="509">Отображение</Sentence>
      <Sentence ID="511">Назад</Sentence>
      <Sentence ID="512">Отображение</Sentence>
      <Sentence ID="513">Вперед</Sentence>
      <Sentence ID="514"></Sentence>
      <Sentence ID="515"></Sentence>
      <Sentence ID="516"></Sentence>
      <Sentence ID="517"></Sentence>
      <Sentence ID="518"></Sentence>
      <Sentence ID="519"></Sentence>
      <Sentence ID="521"></Sentence>
      <Sentence ID="522"></Sentence>
      <Sentence ID="523"></Sentence>
      <Sentence ID="524"></Sentence>
      <Sentence ID="525"></Sentence>
      <Sentence ID="526"></Sentence>
      <Sentence ID="527"></Sentence>
      <Sentence ID="528"></Sentence>
      <Sentence ID="601">Отображение</Sentence>
      <Sentence ID="602">Отображение</Sentence>
      <Sentence ID="603">Отображение</Sentence>
      <Sentence ID="604">Вперед</Sentence>
      <Sentence ID="605">Отображение</Sentence>
      <Sentence ID="606">Отображение</Sentence>
      <Sentence ID="607">Отображение</Sentence>
      <Sentence ID="608">Отображение</Sentence>
      <Sentence ID="609">Отображение</Sentence>
      <Sentence ID="611">Назад</Sentence>
      <Sentence ID="612">Отображение</Sentence>
      <Sentence ID="613">Вперед</Sentence>
      <Sentence ID="701">Неправильное значение</Sentence>
      <Sentence ID="702">Неправильное значение</Sentence>
      <Sentence ID="703">Неправильное значение</Sentence>
      <Sentence ID="704">Неправильное значение</Sentence>
      <Sentence ID="705">Неправильное значение</Sentence>
      <Sentence ID="706">Неправильное значение</Sentence>
      <Sentence ID="707">Неправильное значение</Sentence>
      <Sentence ID="708">Неправильное значение</Sentence>
      <Sentence ID="709">Неправильное значение</Sentence>
      <Sentence ID="711">Неправильное значение</Sentence>
      <Sentence ID="712">Неправильное значение</Sentence>
      <Sentence ID="713">Неправильное значение</Sentence>
      <Sentence ID="714">Неправильное значение</Sentence>
      <Sentence ID="801">Неправильное значение</Sentence>
      <Sentence ID="802">Неправильное значение</Sentence>
      <Sentence ID="803">Неправильное значение</Sentence>
      <Sentence ID="804">Неправильное значение</Sentence>
      <Sentence ID="805">Неправильное значение</Sentence>
      <Sentence ID="806">Неправильное значение</Sentence>
      <Sentence ID="807">Date format - ГГГГ-ММ-ДД</Sentence>
      <Sentence ID="808">Date format - ГГГГ-ММ-ДД</Sentence>
      <Sentence ID="809">Date format - ГГГГ-ММ-ДД</Sentence>
      <Sentence ID="811">Неправильное значение</Sentence>
      <Sentence ID="812">'month','week','day'</Sentence>
      <Sentence ID="813">Date format - ГГГГ-ММ-ДД</Sentence>
      <Sentence ID="814">Date format - ГГГГ-ММ-ДД</Sentence>
      <Sentence ID="901">Начало</Sentence>
      <Sentence ID="902">Начало</Sentence>
      <Sentence ID="903">Начало</Sentence>
      <Sentence ID="904">Начало</Sentence>
      <Sentence ID="905">Начало</Sentence>
      <Sentence ID="906">Начало</Sentence>
      <Sentence ID="907">Начало</Sentence>
      <Sentence ID="908">Начало</Sentence>
      <Sentence ID="909">Начало</Sentence>
      <Sentence ID="911">Начало</Sentence>
      <Sentence ID="912">Начало</Sentence>
      <Sentence ID="913">Начало</Sentence>
      <Sentence ID="914">Начало</Sentence>
      <Sentence ID="915">Начало</Sentence>
      <Sentence ID="916">Начало</Sentence>
      <Sentence ID="917">Начало</Sentence>
      <Sentence ID="918">Начало</Sentence>
      <Sentence ID="919">Начало</Sentence>
      <Sentence ID="921">Начало</Sentence>
      <Sentence ID="922">Начало</Sentence>
      <Sentence ID="923">Начало</Sentence>
      <Sentence ID="924">Начало</Sentence>
      <Sentence ID="925">Начало</Sentence>
      <Sentence ID="926">Начало</Sentence>
      <Sentence ID="927">Начало</Sentence>
      <Sentence ID="928">Начало</Sentence>
      <Sentence ID="929">Начало</Sentence>
      <Sentence ID="931">Начало</Sentence>
      <Sentence ID="932">Начало</Sentence>
      <Sentence ID="933">Начало</Sentence>
      <Sentence ID="934">Начало</Sentence>
      <Sentence ID="935">Начало</Sentence>
      <Sentence ID="936">Начало</Sentence>
      <Sentence ID="937">Начало</Sentence>
      <Sentence ID="938">Начало</Sentence>
      <Sentence ID="939">Начало</Sentence>
      <Sentence ID="941">Начало</Sentence>
      <Sentence ID="942">Начало</Sentence>
      <Sentence ID="943">Начало</Sentence>
      <Sentence ID="944">Начало</Sentence>
      <Sentence ID="945">Начало</Sentence>
      <Sentence ID="946">Начало</Sentence>
      <Sentence ID="947">Начало</Sentence>
      <Sentence ID="948">Начало</Sentence>
      <Sentence ID="949">Начало</Sentence>
      <Sentence ID="951">Начало</Sentence>
    </Language>
  </Languages>
  <Resources>
    <Resource ID="02dfd9db-16fe-3690-73e1-baf58cd3e6f4" Name="Style" Type="css"><![CDATA[LyoNCiAqIEZ1bGxDYWxlbmRhciB2MS41LjEgU3R5bGVzaGVldA0KICoNCiAqIENvcHlyaWdodCAo
			YykgMjAxMSBBZGFtIFNoYXcNCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BM
			IGxpY2Vuc2VzLCBsb2NhdGVkIGluDQogKiBNSVQtTElDRU5TRS50eHQgYW5kIEdQTC1MSUNFTlNF
			LnR4dCByZXNwZWN0aXZlbHkuDQogKg0KICogRGF0ZTogU2F0IEFwciA5IDE0OjA5OjUxIDIwMTEg
			LTA3MDANCiAqDQogKi8NCg0KDQouZmMgew0KCWRpcmVjdGlvbjogbHRyOw0KCXRleHQtYWxpZ246
			IGxlZnQ7DQoJfQ0KCQ0KLmZjIHRhYmxlIHsNCglib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0K
			CWJvcmRlci1zcGFjaW5nOiAwOw0KCX0NCgkNCmh0bWwgLmZjLA0KLmZjIHRhYmxlIHsNCglmb250
			LXNpemU6IDFlbTsNCgl9DQoJDQouZmMgdGQsDQouZmMgdGggew0KCXBhZGRpbmc6IDA7DQoJdmVy
			dGljYWwtYWxpZ246IHRvcDsNCgl9DQoNCg0KDQovKiBIZWFkZXINCi0tLS0tLS0tLS0tLS0tLS0t
			LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSov
			DQoNCi5mYy1oZWFkZXIgdGQgew0KCXdoaXRlLXNwYWNlOiBub3dyYXA7DQoJfQ0KDQouZmMtaGVh
			ZGVyLWxlZnQgew0KCXdpZHRoOiAyNSU7DQoJdGV4dC1hbGlnbjogbGVmdDsNCgl9DQoJDQouZmMt
			aGVhZGVyLWNlbnRlciB7DQoJdGV4dC1hbGlnbjogY2VudGVyOw0KCX0NCgkNCi5mYy1oZWFkZXIt
			cmlnaHQgew0KCXdpZHRoOiAyNSU7DQoJdGV4dC1hbGlnbjogcmlnaHQ7DQoJfQ0KCQ0KLmZjLWhl
			YWRlci10aXRsZSB7DQoJZGlzcGxheTogaW5saW5lLWJsb2NrOw0KCXZlcnRpY2FsLWFsaWduOiB0
			b3A7DQoJfQ0KCQ0KLmZjLWhlYWRlci10aXRsZSBoMiB7DQoJbWFyZ2luLXRvcDogMDsNCgl3aGl0
			ZS1zcGFjZTogbm93cmFwOw0KCX0NCgkNCi5mYyAuZmMtaGVhZGVyLXNwYWNlIHsNCglwYWRkaW5n
			LWxlZnQ6IDEwcHg7DQoJfQ0KCQ0KLmZjLWhlYWRlciAuZmMtYnV0dG9uIHsNCgltYXJnaW4tYm90
			dG9tOiAxZW07DQoJdmVydGljYWwtYWxpZ246IHRvcDsNCgl9DQoJDQovKiBidXR0b25zIGVkZ2Vz
			IGJ1dHRpbmcgdG9nZXRoZXIgKi8NCg0KLmZjLWhlYWRlciAuZmMtYnV0dG9uIHsNCgltYXJnaW4t
			cmlnaHQ6IC0xcHg7DQoJfQ0KCQ0KLmZjLWhlYWRlciAuZmMtY29ybmVyLXJpZ2h0IHsNCgltYXJn
			aW4tcmlnaHQ6IDFweDsgLyogYmFjayB0byBub3JtYWwgKi8NCgl9DQoJDQouZmMtaGVhZGVyIC51
			aS1jb3JuZXItcmlnaHQgew0KCW1hcmdpbi1yaWdodDogMDsgLyogYmFjayB0byBub3JtYWwgKi8N
			Cgl9DQoJDQovKiBidXR0b24gbGF5ZXJpbmcgKGZvciBib3JkZXIgcHJlY2VkZW5jZSkgKi8NCgkN
			Ci5mYy1oZWFkZXIgLmZjLXN0YXRlLWhvdmVyLA0KLmZjLWhlYWRlciAudWktc3RhdGUtaG92ZXIg
			ew0KCXotaW5kZXg6IDI7DQoJfQ0KCQ0KLmZjLWhlYWRlciAuZmMtc3RhdGUtZG93biB7DQoJei1p
			bmRleDogMzsNCgl9DQoNCi5mYy1oZWFkZXIgLmZjLXN0YXRlLWFjdGl2ZSwNCi5mYy1oZWFkZXIg
			LnVpLXN0YXRlLWFjdGl2ZSB7DQoJei1pbmRleDogNDsNCgl9DQoJDQoJDQoJDQovKiBDb250ZW50
			DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
			LS0tLS0tLS0tLS0tLS0tLS0qLw0KCQ0KLmZjLWNvbnRlbnQgew0KCWNsZWFyOiBib3RoOw0KCX0N
			CgkNCi5mYy12aWV3IHsNCgl3aWR0aDogMTAwJTsgLyogbmVlZGVkIGZvciB2aWV3IHN3aXRjaGlu
			ZyAod2hlbiB2aWV3IGlzIGFic29sdXRlKSAqLw0KCW92ZXJmbG93OiBoaWRkZW47DQoJfQ0KCQ0K
			CQ0KDQovKiBDZWxsIFN0eWxlcw0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
			LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KLmZjLXdpZGdldC1oZWFk
			ZXIsICAgIC8qIDx0aD4sIHVzdWFsbHkgKi8NCi5mYy13aWRnZXQtY29udGVudCB7ICAvKiA8dGQ+
			LCB1c3VhbGx5ICovDQoJYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCgl9DQoJDQouZmMtc3RhdGUt
			aGlnaGxpZ2h0IHsgLyogPHRkPiB0b2RheSBjZWxsICovIC8qIFRPRE86IGFkZCAuZmMtdG9kYXkg
			dG8gPHRoPiAqLw0KCWJhY2tncm91bmQ6ICNmZmM7DQoJfQ0KCQ0KLmZjLWNlbGwtb3ZlcmxheSB7
			IC8qIHNlbWktdHJhbnNwYXJlbnQgcmVjdGFuZ2xlIHdoaWxlIGRyYWdnaW5nICovDQoJYmFja2dy
			b3VuZDogIzljZjsNCglvcGFjaXR5OiAuMjsNCglmaWx0ZXI6IGFscGhhKG9wYWNpdHk9MjApOyAv
			KiBmb3IgSUUgKi8NCgl9DQoJDQoNCg0KLyogQnV0dG9ucw0KLS0tLS0tLS0tLS0tLS0tLS0tLS0t
			LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0K
			LmZjLWJ1dHRvbiB7DQoJcG9zaXRpb246IHJlbGF0aXZlOw0KCWRpc3BsYXk6IGlubGluZS1ibG9j
			azsNCgljdXJzb3I6IHBvaW50ZXI7DQoJfQ0KCQ0KLmZjLXN0YXRlLWRlZmF1bHQgeyAvKiBub24t
			dGhlbWUgKi8NCglib3JkZXItc3R5bGU6IHNvbGlkOw0KCWJvcmRlci13aWR0aDogMXB4IDA7DQoJ
			fQ0KCQ0KLmZjLWJ1dHRvbi1pbm5lciB7DQoJcG9zaXRpb246IHJlbGF0aXZlOw0KCWZsb2F0OiBs
			ZWZ0Ow0KCW92ZXJmbG93OiBoaWRkZW47DQoJfQ0KCQ0KLmZjLXN0YXRlLWRlZmF1bHQgLmZjLWJ1
			dHRvbi1pbm5lciB7IC8qIG5vbi10aGVtZSAqLw0KCWJvcmRlci1zdHlsZTogc29saWQ7DQoJYm9y
			ZGVyLXdpZHRoOiAwIDFweDsNCgl9DQoJDQouZmMtYnV0dG9uLWNvbnRlbnQgew0KCXBvc2l0aW9u
			OiByZWxhdGl2ZTsNCglmbG9hdDogbGVmdDsNCgloZWlnaHQ6IDEuOWVtOw0KCWxpbmUtaGVpZ2h0
			OiAxLjllbTsNCglwYWRkaW5nOiAwIC42ZW07DQoJd2hpdGUtc3BhY2U6IG5vd3JhcDsNCgl9DQoJ
			DQovKiBpY29uIChmb3IganF1ZXJ5IHVpKSAqLw0KCQ0KLmZjLWJ1dHRvbi1jb250ZW50IC5mYy1p
			Y29uLXdyYXAgew0KCXBvc2l0aW9uOiByZWxhdGl2ZTsNCglmbG9hdDogbGVmdDsNCgl0b3A6IDUw
			JTsNCgl9DQoJDQouZmMtYnV0dG9uLWNvbnRlbnQgLnVpLWljb24gew0KCXBvc2l0aW9uOiByZWxh
			dGl2ZTsNCglmbG9hdDogbGVmdDsNCgltYXJnaW4tdG9wOiAtNTAlOw0KCSptYXJnaW4tdG9wOiAw
			Ow0KCSp0b3A6IC01MCU7DQoJfQ0KCQ0KLyogZ2xvc3MgZWZmZWN0ICovDQoJDQouZmMtc3RhdGUt
			ZGVmYXVsdCAuZmMtYnV0dG9uLWVmZmVjdCB7DQoJcG9zaXRpb246IGFic29sdXRlOw0KCXRvcDog
			NTAlOw0KCWxlZnQ6IDA7DQoJfQ0KCQ0KLmZjLXN0YXRlLWRlZmF1bHQgLmZjLWJ1dHRvbi1lZmZl
			Y3Qgc3BhbiB7DQoJcG9zaXRpb246IGFic29sdXRlOw0KCXRvcDogLTEwMHB4Ow0KCWxlZnQ6IDA7
			DQoJd2lkdGg6IDUwMHB4Ow0KCWhlaWdodDogMTAwcHg7DQoJYm9yZGVyLXdpZHRoOiAxMDBweCAw
			IDAgMXB4Ow0KCWJvcmRlci1zdHlsZTogc29saWQ7DQoJYm9yZGVyLWNvbG9yOiAjZmZmOw0KCWJh
			Y2tncm91bmQ6ICM0NDQ7DQoJb3BhY2l0eTogLjA5Ow0KCWZpbHRlcjogYWxwaGEob3BhY2l0eT05
			KTsNCgl9DQoJDQovKiBidXR0b24gc3RhdGVzIChkZXRlcm1pbmVzIGNvbG9ycykgICovDQoJDQou
			ZmMtc3RhdGUtZGVmYXVsdCwNCi5mYy1zdGF0ZS1kZWZhdWx0IC5mYy1idXR0b24taW5uZXIgew0K
			CWJvcmRlci1zdHlsZTogc29saWQ7DQoJYm9yZGVyLWNvbG9yOiAjY2NjICNiYmIgI2FhYTsNCgli
			YWNrZ3JvdW5kOiAjRjNGM0YzOw0KCWNvbG9yOiAjMDAwOw0KCX0NCgkNCi5mYy1zdGF0ZS1ob3Zl
			ciwNCi5mYy1zdGF0ZS1ob3ZlciAuZmMtYnV0dG9uLWlubmVyIHsNCglib3JkZXItY29sb3I6ICM5
			OTk7DQoJfQ0KCQ0KLmZjLXN0YXRlLWRvd24sDQouZmMtc3RhdGUtZG93biAuZmMtYnV0dG9uLWlu
			bmVyIHsNCglib3JkZXItY29sb3I6ICM1NTU7DQoJYmFja2dyb3VuZDogIzc3NzsNCgl9DQoJDQou
			ZmMtc3RhdGUtYWN0aXZlLA0KLmZjLXN0YXRlLWFjdGl2ZSAuZmMtYnV0dG9uLWlubmVyIHsNCgli
			b3JkZXItY29sb3I6ICM1NTU7DQoJYmFja2dyb3VuZDogIzc3NzsNCgljb2xvcjogI2ZmZjsNCgl9
			DQoJDQouZmMtc3RhdGUtZGlzYWJsZWQsDQouZmMtc3RhdGUtZGlzYWJsZWQgLmZjLWJ1dHRvbi1p
			bm5lciB7DQoJY29sb3I6ICM5OTk7DQoJYm9yZGVyLWNvbG9yOiAjZGRkOw0KCX0NCgkNCi5mYy1z
			dGF0ZS1kaXNhYmxlZCB7DQoJY3Vyc29yOiBkZWZhdWx0Ow0KCX0NCgkNCi5mYy1zdGF0ZS1kaXNh
			YmxlZCAuZmMtYnV0dG9uLWVmZmVjdCB7DQoJZGlzcGxheTogbm9uZTsNCgl9DQoJDQoJDQoNCi8q
			IEdsb2JhbCBFdmVudCBTdHlsZXMNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
			LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoJIA0KLmZjLWV2ZW50IHsN
			Cglib3JkZXItc3R5bGU6IHNvbGlkOw0KCWJvcmRlci13aWR0aDogMDsNCglmb250LXNpemU6IC44
			NWVtOw0KCWN1cnNvcjogZGVmYXVsdDsNCgl9DQoJDQphLmZjLWV2ZW50LA0KLmZjLWV2ZW50LWRy
			YWdnYWJsZSB7DQoJY3Vyc29yOiBwb2ludGVyOw0KCX0NCgkNCmEuZmMtZXZlbnQgew0KCXRleHQt
			ZGVjb3JhdGlvbjogbm9uZTsNCgl9DQoJDQouZmMtcnRsIC5mYy1ldmVudCB7DQoJdGV4dC1hbGln
			bjogcmlnaHQ7DQoJfQ0KCQ0KLmZjLWV2ZW50LXNraW4gew0KCWJvcmRlci1jb2xvcjogIzM2Yzsg
			ICAgIC8qIGRlZmF1bHQgQk9SREVSIGNvbG9yICovDQoJYmFja2dyb3VuZC1jb2xvcjogIzM2Yzsg
			LyogZGVmYXVsdCBCQUNLR1JPVU5EIGNvbG9yICovDQoJY29sb3I6ICNmZmY7ICAgICAgICAgICAg
			LyogZGVmYXVsdCBURVhUIGNvbG9yICovDQoJfQ0KCQ0KLmZjLWV2ZW50LWlubmVyIHsNCglwb3Np
			dGlvbjogcmVsYXRpdmU7DQoJd2lkdGg6IDEwMCU7DQoJaGVpZ2h0OiAxMDAlOw0KCWJvcmRlci1z
			dHlsZTogc29saWQ7DQoJYm9yZGVyLXdpZHRoOiAwOw0KCW92ZXJmbG93OiBoaWRkZW47DQoJfQ0K
			CQ0KLmZjLWV2ZW50LXRpbWUsDQouZmMtZXZlbnQtdGl0bGUgew0KCXBhZGRpbmc6IDAgMXB4Ow0K
			CX0NCgkNCi5mYyAudWktcmVzaXphYmxlLWhhbmRsZSB7IC8qKiogVE9ETzogZG9uJ3QgdXNlIHVp
			LXJlc2l6YWJsZSBhbnltb3JlLCBjaGFuZ2UgY2xhc3MgKioqLw0KCWRpc3BsYXk6IGJsb2NrOw0K
			CXBvc2l0aW9uOiBhYnNvbHV0ZTsNCgl6LWluZGV4OiA5OTk5OTsNCglvdmVyZmxvdzogaGlkZGVu
			OyAvKiBoYWNreSBzcGFjZXMgKElFNi83KSAqLw0KCWZvbnQtc2l6ZTogMzAwJTsgIC8qICovDQoJ
			bGluZS1oZWlnaHQ6IDUwJTsgLyogKi8NCgl9DQoJDQoJDQoJDQovKiBIb3Jpem9udGFsIEV2ZW50
			cw0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
			LS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KLmZjLWV2ZW50LWhvcmkgew0KCWJvcmRlci13aWR0aDog
			MXB4IDA7DQoJbWFyZ2luLWJvdHRvbTogMXB4Ow0KCX0NCgkNCi8qIHJlc2l6YWJsZSAqLw0KCQ0K
			LmZjLWV2ZW50LWhvcmkgLnVpLXJlc2l6YWJsZS1lIHsNCgl0b3A6IDAgICAgICAgICAgICFpbXBv
			cnRhbnQ7IC8qIGltcG9ydGFudHMgb3ZlcnJpZGUgcHJlIGpxdWVyeSB1aSAxLjcgc3R5bGVzICov
			DQoJcmlnaHQ6IC0zcHggICAgICAhaW1wb3J0YW50Ow0KCXdpZHRoOiA3cHggICAgICAgIWltcG9y
			dGFudDsNCgloZWlnaHQ6IDEwMCUgICAgICFpbXBvcnRhbnQ7DQoJY3Vyc29yOiBlLXJlc2l6ZTsN
			Cgl9DQoJDQouZmMtZXZlbnQtaG9yaSAudWktcmVzaXphYmxlLXcgew0KCXRvcDogMCAgICAgICAg
			ICAgIWltcG9ydGFudDsNCglsZWZ0OiAtM3B4ICAgICAgICFpbXBvcnRhbnQ7DQoJd2lkdGg6IDdw
			eCAgICAgICAhaW1wb3J0YW50Ow0KCWhlaWdodDogMTAwJSAgICAgIWltcG9ydGFudDsNCgljdXJz
			b3I6IHctcmVzaXplOw0KCX0NCgkNCi5mYy1ldmVudC1ob3JpIC51aS1yZXNpemFibGUtaGFuZGxl
			IHsNCglfcGFkZGluZy1ib3R0b206IDE0cHg7IC8qIElFNiBoYWQgMCBoZWlnaHQgKi8NCgl9DQoJ
			DQoJDQoJDQovKiBGYWtlIFJvdW5kZWQgQ29ybmVycyAoZm9yIGJ1dHRvbnMgYW5kIGV2ZW50cykN
			Ci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
			LS0tLSovDQoJDQouZmMtY29ybmVyLWxlZnQgew0KCW1hcmdpbi1sZWZ0OiAxcHg7DQoJfQ0KCQ0K
			LmZjLWNvcm5lci1sZWZ0IC5mYy1idXR0b24taW5uZXIsDQouZmMtY29ybmVyLWxlZnQgLmZjLWV2
			ZW50LWlubmVyIHsNCgltYXJnaW4tbGVmdDogLTFweDsNCgl9DQoJDQouZmMtY29ybmVyLXJpZ2h0
			IHsNCgltYXJnaW4tcmlnaHQ6IDFweDsNCgl9DQoJDQouZmMtY29ybmVyLXJpZ2h0IC5mYy1idXR0
			b24taW5uZXIsDQouZmMtY29ybmVyLXJpZ2h0IC5mYy1ldmVudC1pbm5lciB7DQoJbWFyZ2luLXJp
			Z2h0OiAtMXB4Ow0KCX0NCgkNCi5mYy1jb3JuZXItdG9wIHsNCgltYXJnaW4tdG9wOiAxcHg7DQoJ
			fQ0KCQ0KLmZjLWNvcm5lci10b3AgLmZjLWV2ZW50LWlubmVyIHsNCgltYXJnaW4tdG9wOiAtMXB4
			Ow0KCX0NCgkNCi5mYy1jb3JuZXItYm90dG9tIHsNCgltYXJnaW4tYm90dG9tOiAxcHg7DQoJfQ0K
			CQ0KLmZjLWNvcm5lci1ib3R0b20gLmZjLWV2ZW50LWlubmVyIHsNCgltYXJnaW4tYm90dG9tOiAt
			MXB4Ow0KCX0NCgkNCgkNCgkNCi8qIEZha2UgUm91bmRlZCBDb3JuZXJzIFNQRUNJRklDQUxMWSBG
			T1IgRVZFTlRTDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
			LS0tLS0tLS0tLS0tLS0tLS0tLSovDQoJDQouZmMtY29ybmVyLWxlZnQgLmZjLWV2ZW50LWlubmVy
			IHsNCglib3JkZXItbGVmdC13aWR0aDogMXB4Ow0KCX0NCgkNCi5mYy1jb3JuZXItcmlnaHQgLmZj
			LWV2ZW50LWlubmVyIHsNCglib3JkZXItcmlnaHQtd2lkdGg6IDFweDsNCgl9DQoJDQouZmMtY29y
			bmVyLXRvcCAuZmMtZXZlbnQtaW5uZXIgew0KCWJvcmRlci10b3Atd2lkdGg6IDFweDsNCgl9DQoJ
			DQouZmMtY29ybmVyLWJvdHRvbSAuZmMtZXZlbnQtaW5uZXIgew0KCWJvcmRlci1ib3R0b20td2lk
			dGg6IDFweDsNCgl9DQoJDQoJDQoJDQovKiBSZXVzYWJsZSBTZXBhcmF0ZS1ib3JkZXIgVGFibGUN
			Ci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
			LS0tLSovDQoNCnRhYmxlLmZjLWJvcmRlci1zZXBhcmF0ZSB7DQoJYm9yZGVyLWNvbGxhcHNlOiBz
			ZXBhcmF0ZTsNCgl9DQoJDQouZmMtYm9yZGVyLXNlcGFyYXRlIHRoLA0KLmZjLWJvcmRlci1zZXBh
			cmF0ZSB0ZCB7DQoJYm9yZGVyLXdpZHRoOiAxcHggMCAwIDFweDsNCgl9DQoJDQouZmMtYm9yZGVy
			LXNlcGFyYXRlIHRoLmZjLWxhc3QsDQouZmMtYm9yZGVyLXNlcGFyYXRlIHRkLmZjLWxhc3Qgew0K
			CWJvcmRlci1yaWdodC13aWR0aDogMXB4Ow0KCX0NCgkNCi5mYy1ib3JkZXItc2VwYXJhdGUgdHIu
			ZmMtbGFzdCB0aCwNCi5mYy1ib3JkZXItc2VwYXJhdGUgdHIuZmMtbGFzdCB0ZCB7DQoJYm9yZGVy
			LWJvdHRvbS13aWR0aDogMXB4Ow0KCX0NCgkNCi5mYy1ib3JkZXItc2VwYXJhdGUgdGJvZHkgdHIu
			ZmMtZmlyc3QgdGQsDQouZmMtYm9yZGVyLXNlcGFyYXRlIHRib2R5IHRyLmZjLWZpcnN0IHRoIHsN
			Cglib3JkZXItdG9wLXdpZHRoOiAwOw0KCX0NCgkNCgkNCg0KLyogTW9udGggVmlldywgQmFzaWMg
			V2VlayBWaWV3LCBCYXNpYyBEYXkgVmlldw0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
			LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KLmZjLWdyaWQg
			dGggew0KCXRleHQtYWxpZ246IGNlbnRlcjsNCgl9DQoJDQouZmMtZ3JpZCAuZmMtZGF5LW51bWJl
			ciB7DQoJZmxvYXQ6IHJpZ2h0Ow0KCXBhZGRpbmc6IDAgMnB4Ow0KCX0NCgkNCi5mYy1ncmlkIC5m
			Yy1vdGhlci1tb250aCAuZmMtZGF5LW51bWJlciB7DQoJb3BhY2l0eTogMC4zOw0KCWZpbHRlcjog
			YWxwaGEob3BhY2l0eT0zMCk7IC8qIGZvciBJRSAqLw0KCS8qIG9wYWNpdHkgd2l0aCBzbWFsbCBm
			b250IGNhbiBzb21ldGltZXMgbG9vayB0b28gZmFkZWQNCgkgICBtaWdodCB3YW50IHRvIHNldCB0
			aGUgJ2NvbG9yJyBwcm9wZXJ0eSBpbnN0ZWFkDQoJICAgbWFraW5nIGRheS1udW1iZXJzIGJvbGQg
			YWxzbyBmaXhlcyB0aGUgcHJvYmxlbSAqLw0KCX0NCgkNCi5mYy1ncmlkIC5mYy1kYXktY29udGVu
			dCB7DQoJY2xlYXI6IGJvdGg7DQoJcGFkZGluZzogMnB4IDJweCAxcHg7IC8qIGRpc3RhbmNlIGJl
			dHdlZW4gZXZlbnRzIGFuZCBkYXkgZWRnZXMgKi8NCgl9DQoJDQovKiBldmVudCBzdHlsZXMgKi8N
			CgkNCi5mYy1ncmlkIC5mYy1ldmVudC10aW1lIHsNCglmb250LXdlaWdodDogYm9sZDsNCgl9DQoJ
			DQovKiByaWdodC10by1sZWZ0ICovDQoJDQouZmMtcnRsIC5mYy1ncmlkIC5mYy1kYXktbnVtYmVy
			IHsNCglmbG9hdDogbGVmdDsNCgl9DQoJDQouZmMtcnRsIC5mYy1ncmlkIC5mYy1ldmVudC10aW1l
			IHsNCglmbG9hdDogcmlnaHQ7DQoJfQ0KCQ0KCQ0KDQovKiBBZ2VuZGEgV2VlayBWaWV3LCBBZ2Vu
			ZGEgRGF5IFZpZXcNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
			LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCi5mYy1hZ2VuZGEgdGFibGUgew0KCWJv
			cmRlci1jb2xsYXBzZTogc2VwYXJhdGU7DQoJfQ0KCQ0KLmZjLWFnZW5kYS1kYXlzIHRoIHsNCgl0
			ZXh0LWFsaWduOiBjZW50ZXI7DQoJfQ0KCQ0KLmZjLWFnZW5kYSAuZmMtYWdlbmRhLWF4aXMgew0K
			CXdpZHRoOiA1MHB4Ow0KCXBhZGRpbmc6IDAgNHB4Ow0KCXZlcnRpY2FsLWFsaWduOiBtaWRkbGU7
			DQoJdGV4dC1hbGlnbjogcmlnaHQ7DQoJd2hpdGUtc3BhY2U6IG5vd3JhcDsNCglmb250LXdlaWdo
			dDogbm9ybWFsOw0KCX0NCgkNCi5mYy1hZ2VuZGEgLmZjLWRheS1jb250ZW50IHsNCglwYWRkaW5n
			OiAycHggMnB4IDFweDsNCgl9DQoJDQovKiBtYWtlIGF4aXMgYm9yZGVyIHRha2UgcHJlY2VkZW5j
			ZSAqLw0KCQ0KLmZjLWFnZW5kYS1kYXlzIC5mYy1hZ2VuZGEtYXhpcyB7DQoJYm9yZGVyLXJpZ2h0
			LXdpZHRoOiAxcHg7DQoJfQ0KCQ0KLmZjLWFnZW5kYS1kYXlzIC5mYy1jb2wwIHsNCglib3JkZXIt
			bGVmdC13aWR0aDogMDsNCgl9DQoJDQovKiBhbGwtZGF5IGFyZWEgKi8NCgkNCi5mYy1hZ2VuZGEt
			YWxsZGF5IHRoIHsNCglib3JkZXItd2lkdGg6IDAgMXB4Ow0KCX0NCgkNCi5mYy1hZ2VuZGEtYWxs
			ZGF5IC5mYy1kYXktY29udGVudCB7DQoJbWluLWhlaWdodDogMzRweDsgLyogVE9ETzogZG9lc250
			IHdvcmsgd2VsbCBpbiBxdWlya3Ntb2RlICovDQoJX2hlaWdodDogMzRweDsNCgl9DQoJDQovKiBk
			aXZpZGVyIChiZXR3ZWVuIGFsbC1kYXkgYW5kIHNsb3RzKSAqLw0KCQ0KLmZjLWFnZW5kYS1kaXZp
			ZGVyLWlubmVyIHsNCgloZWlnaHQ6IDJweDsNCglvdmVyZmxvdzogaGlkZGVuOw0KCX0NCgkNCi5m
			Yy13aWRnZXQtaGVhZGVyIC5mYy1hZ2VuZGEtZGl2aWRlci1pbm5lciB7DQoJYmFja2dyb3VuZDog
			I2VlZTsNCgl9DQoJDQovKiBzbG90IHJvd3MgKi8NCgkNCi5mYy1hZ2VuZGEtc2xvdHMgdGggew0K
			CWJvcmRlci13aWR0aDogMXB4IDFweCAwOw0KCX0NCgkNCi5mYy1hZ2VuZGEtc2xvdHMgdGQgew0K
			CWJvcmRlci13aWR0aDogMXB4IDAgMDsNCgliYWNrZ3JvdW5kOiBub25lOw0KCX0NCgkNCi5mYy1h
			Z2VuZGEtc2xvdHMgdGQgZGl2IHsNCgloZWlnaHQ6IDIwcHg7DQoJfQ0KCQ0KLmZjLWFnZW5kYS1z
			bG90cyB0ci5mYy1zbG90MCB0aCwNCi5mYy1hZ2VuZGEtc2xvdHMgdHIuZmMtc2xvdDAgdGQgew0K
			CWJvcmRlci10b3Atd2lkdGg6IDA7DQoJfQ0KDQouZmMtYWdlbmRhLXNsb3RzIHRyLmZjLW1pbm9y
			IHRoLA0KLmZjLWFnZW5kYS1zbG90cyB0ci5mYy1taW5vciB0ZCB7DQoJYm9yZGVyLXRvcC1zdHls
			ZTogZG90dGVkOw0KCX0NCgkNCi5mYy1hZ2VuZGEtc2xvdHMgdHIuZmMtbWlub3IgdGgudWktd2lk
			Z2V0LWhlYWRlciB7DQoJKmJvcmRlci10b3Atc3R5bGU6IHNvbGlkOyAvKiBkb2Vzbid0IHdvcmsg
			d2l0aCBiYWNrZ3JvdW5kIGluIElFNi83ICovDQoJfQ0KCQ0KDQoNCi8qIFZlcnRpY2FsIEV2ZW50
			cw0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
			LS0tLS0tLS0tLS0tLS0tLS0tKi8NCg0KLmZjLWV2ZW50LXZlcnQgew0KCWJvcmRlci13aWR0aDog
			MCAxcHg7DQoJfQ0KCQ0KLmZjLWV2ZW50LXZlcnQgLmZjLWV2ZW50LWhlYWQsDQouZmMtZXZlbnQt
			dmVydCAuZmMtZXZlbnQtY29udGVudCB7DQoJcG9zaXRpb246IHJlbGF0aXZlOw0KCXotaW5kZXg6
			IDI7DQoJd2lkdGg6IDEwMCU7DQoJb3ZlcmZsb3c6IGhpZGRlbjsNCgl9DQoJDQouZmMtZXZlbnQt
			dmVydCAuZmMtZXZlbnQtdGltZSB7DQoJd2hpdGUtc3BhY2U6IG5vd3JhcDsNCglmb250LXNpemU6
			IDEwcHg7DQoJfQ0KCQ0KLmZjLWV2ZW50LXZlcnQgLmZjLWV2ZW50LWJnIHsgLyogbWFrZXMgdGhl
			IGV2ZW50IGxpZ2h0ZXIgdy8gYSBzZW1pLXRyYW5zcGFyZW50IG92ZXJsYXkgICovDQoJcG9zaXRp
			b246IGFic29sdXRlOw0KCXotaW5kZXg6IDE7DQoJdG9wOiAwOw0KCWxlZnQ6IDA7DQoJd2lkdGg6
			IDEwMCU7DQoJaGVpZ2h0OiAxMDAlOw0KCWJhY2tncm91bmQ6ICNmZmY7DQoJb3BhY2l0eTogLjM7
			DQoJZmlsdGVyOiBhbHBoYShvcGFjaXR5PTMwKTsNCgl9DQoJDQouZmMgLnVpLWRyYWdnYWJsZS1k
			cmFnZ2luZyAuZmMtZXZlbnQtYmcsIC8qIFRPRE86IHNvbWV0aGluZyBuaWNlciBsaWtlIC5mYy1v
			cGFjaXR5ICovDQouZmMtc2VsZWN0LWhlbHBlciAuZmMtZXZlbnQtYmcgew0KCWRpc3BsYXk6IG5v
			bmVcOTsgLyogZm9yIElFNi83LzguIG5lc3RlZCBvcGFjaXR5IGZpbHRlcnMgd2hpbGUgZHJhZ2dp
			bmcgZG9uJ3Qgd29yayAqLw0KCX0NCgkNCi8qIHJlc2l6YWJsZSAqLw0KCQ0KLmZjLWV2ZW50LXZl
			cnQgLnVpLXJlc2l6YWJsZS1zIHsNCglib3R0b206IDAgICAgICAgICFpbXBvcnRhbnQ7IC8qIGlt
			cG9ydGFudHMgb3ZlcnJpZGUgcHJlIGpxdWVyeSB1aSAxLjcgc3R5bGVzICovDQoJd2lkdGg6IDEw
			MCUgICAgICAhaW1wb3J0YW50Ow0KCWhlaWdodDogOHB4ICAgICAgIWltcG9ydGFudDsNCglvdmVy
			ZmxvdzogaGlkZGVuICFpbXBvcnRhbnQ7DQoJbGluZS1oZWlnaHQ6IDhweCAhaW1wb3J0YW50Ow0K
			CWZvbnQtc2l6ZTogMTFweCAgIWltcG9ydGFudDsNCglmb250LWZhbWlseTogbW9ub3NwYWNlOw0K
			CXRleHQtYWxpZ246IGNlbnRlcjsNCgljdXJzb3I6IHMtcmVzaXplOw0KCX0NCgkNCi5mYy1hZ2Vu
			ZGEgLnVpLXJlc2l6YWJsZS1yZXNpemluZyB7IC8qIFRPRE86IGJldHRlciBzZWxlY3RvciAqLw0K
			CV9vdmVyZmxvdzogaGlkZGVuOw0KCX0NCgkNCgkNCg==]]></Resource>
    <Resource ID="10b18a20-59c9-2b2b-e4b3-7281bcc66d4f" Name="fullcalendar" Type="js"><![CDATA[KGZ1bmN0aW9uKFNlKSB7DQogICAgZnVuY3Rpb24gYSh0KSB7DQogICAgICAgIFNlLmV4dGVuZCghMCwgc2UsIHQpDQogICAgfQ0KICAgIGZ1bmN0aW9uIE1lKGEsIGksIGUpIHsNCiAgICAgICAgZnVuY3Rpb24gcih0KSB7DQogICAgICAgICAgICBHID8gZygpICYmICh3KCksDQogICAgICAgICAgICBiKHQpKSA6IGwoKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGwoKSB7DQogICAgICAgICAgICBaID0gaS50aGVtZSA/ICJ1aSIgOiAiZmMiLA0KICAgICAgICAgICAgYS5hZGRDbGFzcygiZmMiKSwNCiAgICAgICAgICAgIGkuaXNSVEwgPyBhLmFkZENsYXNzKCJmYy1ydGwiKSA6IGEuYWRkQ2xhc3MoImZjLWx0ciIpLA0KICAgICAgICAgICAgaS50aGVtZSAmJiBhLmFkZENsYXNzKCJ1aS13aWRnZXQiKSwNCiAgICAgICAgICAgIEcgPSBTZSgiPGRpdiBjbGFzcz0nZmMtY29udGVudCcgc3R5bGU9J3Bvc2l0aW9uOnJlbGF0aXZlJy8+IikucHJlcGVuZFRvKGEpLA0KICAgICAgICAgICAgViA9IG5ldyBUZShKLGkpLA0KICAgICAgICAgICAgVSA9IFYucmVuZGVyKCksDQogICAgICAgICAgICBVICYmIGEucHJlcGVuZChVKSwNCiAgICAgICAgICAgIGYoaS5kZWZhdWx0VmlldyksDQogICAgICAgICAgICBpLmhhbmRsZVdpbmRvd1Jlc2l6ZSAmJiBTZSh3aW5kb3cpLnJlc2l6ZShFKSwNCiAgICAgICAgICAgIGgoKSB8fCBkKCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBkKCkgew0KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAhSy5zdGFydCAmJiBoKCkgJiYgeSgpDQogICAgICAgICAgICB9LCAwKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGMoKSB7DQogICAgICAgICAgICBLICYmIChYKCJ2aWV3RGVzdHJveSIsIEssIEssIEsuZWxlbWVudCksDQogICAgICAgICAgICBLLnRyaWdnZXJFdmVudERlc3Ryb3koKSksDQogICAgICAgICAgICBTZSh3aW5kb3cpLnVuYmluZCgicmVzaXplIiwgRSksDQogICAgICAgICAgICBWLmRlc3Ryb3koKSwNCiAgICAgICAgICAgIEcucmVtb3ZlKCksDQogICAgICAgICAgICBhLnJlbW92ZUNsYXNzKCJmYyBmYy1ydGwgdWktd2lkZ2V0IikNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBnKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWUgLy8gYS5pcygiOnZpc2libGUiKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGgoKSB7DQogICAgICAgICAgICByZXR1cm4gU2UoImJvZHkiKS5pcygiOnZpc2libGUiKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGYodCkgew0KICAgICAgICAgICAgSyAmJiB0ID09IEsubmFtZSB8fCB2KHQpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gdih0KSB7DQogICAgICAgICAgICB5ZSsrLA0KICAgICAgICAgICAgSyAmJiAoWCgidmlld0Rlc3Ryb3kiLCBLLCBLLCBLLmVsZW1lbnQpLA0KICAgICAgICAgICAgVygpLA0KICAgICAgICAgICAgSy50cmlnZ2VyRXZlbnREZXN0cm95KCksDQogICAgICAgICAgICBCKCksDQogICAgICAgICAgICBLLmVsZW1lbnQucmVtb3ZlKCksDQogICAgICAgICAgICBWLmRlYWN0aXZhdGVCdXR0b24oSy5uYW1lKSksDQogICAgICAgICAgICBWLmFjdGl2YXRlQnV0dG9uKHQpLA0KICAgICAgICAgICAgSyA9IG5ldyBvZVt0XShTZSgiPGRpdiBjbGFzcz0nZmMtdmlldyBmYy12aWV3LSIgKyB0ICsgIicgc3R5bGU9J3Bvc2l0aW9uOnJlbGF0aXZlJy8+IikuYXBwZW5kVG8oRyksSiksDQogICAgICAgICAgICB5KCksDQogICAgICAgICAgICBqKCksDQogICAgICAgICAgICB5ZS0tLA0KICAgICAgICAgICAgWCgidmlld0NoYW5nZWQiLCB0aGlzLCBLLm5hbWUsIEsudGl0bGUpOw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIG0oKSB7DQogICAgICAgICAgICB2YXIgdCA9IHdlLm1vbnRoOw0KICAgICAgICAgICAgcmV0dXJuIHQgPyB0LmNhbGN1bGF0ZVN0YXJ0RW5kKGJlKSA6IFtOYU4sIE5hTl0NCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiB5KHQpIHsNCiAgICAgICAgICAgICghSy5zdGFydCB8fCB0IHx8IGJlIDwgSy5zdGFydCB8fCBiZSA+PSBLLmVuZCkgJiYgZygpICYmIGIodCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBiKHQpIHsNCiAgICAgICAgICAgIHllKyssDQogICAgICAgICAgICBLLnN0YXJ0ICYmIChYKCJ2aWV3RGVzdHJveSIsIEssIEssIEsuZWxlbWVudCksDQogICAgICAgICAgICBXKCksDQogICAgICAgICAgICB4KCkpLA0KICAgICAgICAgICAgQigpLA0KICAgICAgICAgICAgSy5yZW5kZXIoYmUsIHQgfHwgMCksDQogICAgICAgICAgICBDKCksDQogICAgICAgICAgICBqKCksDQogICAgICAgICAgICAoSy5hZnRlclJlbmRlciB8fCBIKSgpLA0KICAgICAgICAgICAgeigpLA0KICAgICAgICAgICAgRigpLA0KICAgICAgICAgICAgWCgidmlld1JlbmRlciIsIEssIEssIEsuZWxlbWVudCksDQogICAgICAgICAgICBLLnRyaWdnZXIoInZpZXdEaXNwbGF5IiwgbWUpLA0KICAgICAgICAgICAgeWUtLSwNCiAgICAgICAgICAgIGsoKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIEQoKSB7DQogICAgICAgICAgICBnKCkgJiYgKFcoKSwNCiAgICAgICAgICAgIHgoKSwNCiAgICAgICAgICAgIHcoKSwNCiAgICAgICAgICAgIEMoKSwNCiAgICAgICAgICAgIFQoKSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiB3KCkgew0KICAgICAgICAgICAgdWUgPSBpLmNvbnRlbnRIZWlnaHQgPyBpLmNvbnRlbnRIZWlnaHQgOiBpLmhlaWdodCA/IGkuaGVpZ2h0IC0gKFUgPyBVLmhlaWdodCgpIDogMCkgLSBTKEcpIDogTWF0aC5yb3VuZChHLndpZHRoKCkgLyBNYXRoLm1heChpLmFzcGVjdFJhdGlvLCAuNSkpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gQygpIHsNCiAgICAgICAgICAgIHZvaWQgMCA9PT0gdWUgJiYgdygpLA0KICAgICAgICAgICAgeWUrKywNCiAgICAgICAgICAgIEsuc2V0SGVpZ2h0KHVlKSwNCiAgICAgICAgICAgIEsuc2V0V2lkdGgoRy53aWR0aCgpKSwNCiAgICAgICAgICAgIHllLS0sDQogICAgICAgICAgICBRID0gYS5vdXRlcldpZHRoKCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBFKCkgew0KICAgICAgICAgICAgaWYgKCF5ZSkNCiAgICAgICAgICAgICAgICBpZiAoSy5zdGFydCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICsrbGU7DQogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBlID09IGxlICYmICF5ZSAmJiBnKCkgJiYgUSAhPSAoUSA9IGEub3V0ZXJXaWR0aCgpKSAmJiAoeWUrKywNCiAgICAgICAgICAgICAgICAgICAgICAgIEQoKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIEsudHJpZ2dlcigid2luZG93UmVzaXplIiwgbWUpLA0KICAgICAgICAgICAgICAgICAgICAgICAgeWUtLSkNCiAgICAgICAgICAgICAgICAgICAgfSwgMjAwKQ0KICAgICAgICAgICAgICAgIH0gZWxzZQ0KICAgICAgICAgICAgICAgICAgICBkKCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBNKHQpIHsNCiAgICAgICAgICAgIHgoKSwNCiAgICAgICAgICAgIFQodCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBUKHQpIHsNCiAgICAgICAgICAgIGcoKSAmJiAoSy5zZXRFdmVudERhdGEoRGUpLA0KICAgICAgICAgICAgSy5yZW5kZXJFdmVudHMoRGUsIHQpLA0KICAgICAgICAgICAgSy50cmlnZ2VyKCJldmVudEFmdGVyQWxsUmVuZGVyIikpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24geCgpIHsNCiAgICAgICAgICAgIEsudHJpZ2dlckV2ZW50RGVzdHJveSgpLA0KICAgICAgICAgICAgSy5jbGVhckV2ZW50cygpLA0KICAgICAgICAgICAgSy5jbGVhckV2ZW50RGF0YSgpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gaygpIHsNCiAgICAgICAgICAgICFpLmxhenlGZXRjaGluZyB8fCB2ZShLLnZpc1N0YXJ0LCBLLnZpc0VuZCkgPyBSKCkgOiBUKCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBSKCkgew0KICAgICAgICAgICAgaWUoSy52aXNTdGFydCwgSy52aXNFbmQpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24geigpIHsNCiAgICAgICAgICAgIFYudXBkYXRlVGl0bGUoSy50aXRsZSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBGKCkgew0KICAgICAgICAgICAgdmFyIHQgPSBuZXcgRGF0ZTsNCiAgICAgICAgICAgIHQgPj0gSy5zdGFydCAmJiB0IDwgSy5lbmQgPyBWLmRpc2FibGVCdXR0b24oInRvZGF5IikgOiBWLmVuYWJsZUJ1dHRvbigidG9kYXkiKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIE4ocywgZSwgdCkgew0KICAgICAgICAgICAgSy5zZWxlY3QocywgZSwgdm9pZCAwID09PSB0IHx8IHQpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gVygpIHsNCiAgICAgICAgICAgIEsgJiYgSy51bnNlbGVjdCgpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gTygpIHsNCiAgICAgICAgICAgIHkoLTEpOw0KICAgICAgICAgICAgdmFyIHQgPSBtKCk7DQogICAgICAgICAgICBYKCJkYXRlQ2hhbmdlZCIsIHRoaXMsIEsubmFtZSwgSy50aXRsZSwgdFswXSwgdFsxXSwgSy52aXNTdGFydCwgSy52aXNFbmQpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gQSgpIHsNCiAgICAgICAgICAgIHkoMSk7DQogICAgICAgICAgICB2YXIgdCA9IG0oKTsNCiAgICAgICAgICAgIFgoImRhdGVDaGFuZ2VkIiwgdGhpcywgSy5uYW1lLCBLLnRpdGxlLCB0WzBdLCB0WzFdLCBLLnZpc1N0YXJ0LCBLLnZpc0VuZCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBMKCkgew0KICAgICAgICAgICAgcyhiZSwgLTEpLA0KICAgICAgICAgICAgeSgpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gXygpIHsNCiAgICAgICAgICAgIHMoYmUsIDEpLA0KICAgICAgICAgICAgeSgpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gUChzLCBlLCB0KSB7DQogICAgICAgICAgICBzIGluc3RhbmNlb2YgRGF0ZSA/IGJlID0gemUocykgOiBvKGJlLCBzLCBlLCB0KSwNCiAgICAgICAgICAgIHkoKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHEobiwgZSwgdCkgew0KICAgICAgICAgICAgdm9pZCAwICE9PSBuICYmIHMoYmUsIG4pLA0KICAgICAgICAgICAgdm9pZCAwICE9PSBlICYmIHhlKGJlLCBlKSwNCiAgICAgICAgICAgIHZvaWQgMCAhPT0gdCAmJiBrZShiZSwgdCksDQogICAgICAgICAgICB5KCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBZKCkgew0KICAgICAgICAgICAgcmV0dXJuIHplKGJlKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIEIoKSB7DQogICAgICAgICAgICBHLmNzcyh7DQogICAgICAgICAgICAgICAgd2lkdGg6ICIxMDAlIiwNCiAgICAgICAgICAgICAgICBoZWlnaHQ6IEcuaGVpZ2h0KCksDQogICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICJoaWRkZW4iDQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGooKSB7DQogICAgICAgICAgICBHLmNzcyh7DQogICAgICAgICAgICAgICAgd2lkdGg6ICIiLA0KICAgICAgICAgICAgICAgIGhlaWdodDogIiIsDQogICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICIiDQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIEkoKSB7DQogICAgICAgICAgICByZXR1cm4gSw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIFgoYSwgZSkgew0KICAgICAgICAgICAgaWYgKGlbYV0pDQogICAgICAgICAgICAgICAgcmV0dXJuIGlbYV0uYXBwbHkoZSB8fCBtZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSkNCiAgICAgICAgfQ0KICAgICAgICB2YXIgSiA9IHRoaXM7DQogICAgICAgIEoub3B0aW9ucyA9IGksDQogICAgICAgIEoucmVuZGVyID0gciwNCiAgICAgICAgSi5kZXN0cm95ID0gYywNCiAgICAgICAgSi5yZWZldGNoRXZlbnRzID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB4KCksDQogICAgICAgICAgICBSKCkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIEoucmVwb3J0RXZlbnRzID0gZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgRGUgPSB0LA0KICAgICAgICAgICAgVCgpDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBKLnJlcG9ydEV2ZW50Q2hhbmdlID0gZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgTSh0KQ0KICAgICAgICB9DQogICAgICAgICwNCiAgICAgICAgSi5yZXJlbmRlckV2ZW50cyA9IE0sDQogICAgICAgIEouY2hhbmdlVmlldyA9IGYsDQogICAgICAgIEouc2VsZWN0ID0gTiwNCiAgICAgICAgSi51bnNlbGVjdCA9IFcsDQogICAgICAgIEoucHJldiA9IE8sDQogICAgICAgIEoubmV4dCA9IEEsDQogICAgICAgIEoucHJldlllYXIgPSBMLA0KICAgICAgICBKLm5leHRZZWFyID0gXywNCiAgICAgICAgSi50b2RheSA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgYmUgPSBuZXcgRGF0ZSwNCiAgICAgICAgICAgIHkoKQ0KICAgICAgICB9DQogICAgICAgICwNCiAgICAgICAgSi5nb3RvRGF0ZSA9IFAsDQogICAgICAgIEouaW5jcmVtZW50RGF0ZSA9IHEsDQogICAgICAgIEouZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKGEsIGUpIHsNCiAgICAgICAgICAgIHJldHVybiBwKGEsIGUsIGkpDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBKLmZvcm1hdERhdGVzID0gZnVuY3Rpb24ocywgZSwgdCkgew0KICAgICAgICAgICAgcmV0dXJuIHUocywgZSwgdCwgaSkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIEouZ2V0RGF0ZSA9IFksDQogICAgICAgIEouZ2V0VmlldyA9IEksDQogICAgICAgIEoub3B0aW9uID0gZnVuY3Rpb24oYSwgZSkgew0KICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZSA/IGlbYV0gOiB2b2lkICgoImhlaWdodCIgPT0gYSB8fCAiY29udGVudEhlaWdodCIgPT0gYSB8fCAiYXNwZWN0UmF0aW8iID09IGEpICYmIChpW2FdID0gZSwNCiAgICAgICAgICAgIEQoKSkpDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBKLnRyaWdnZXIgPSBYLA0KICAgICAgICBKLmNhbGN1bGF0ZU1vbnRoU3RhcnRFbmQgPSBtLA0KICAgICAgICBuLmNhbGwoSiwgaSwgZSk7DQogICAgICAgIHZhciBWLCBVLCBHLCBaLCBLLCBRLCB1ZSwgZmUsIHZlID0gSi5pc0ZldGNoTmVlZGVkLCBpZSA9IEouZmV0Y2hFdmVudHMsIG1lID0gYVswXSwgbGUgPSAwLCB5ZSA9IDAsIGJlID0gbmV3IERhdGUsIERlID0gW10sIHdlID0ge307DQogICAgICAgIG8oYmUsIGkueWVhciwgaS5tb250aCwgaS5kYXRlKSwNCiAgICAgICAgaS5kcm9wcGFibGUgJiYgU2UoZG9jdW1lbnQpLmJpbmQoImRyYWdzdGFydCIsIGZ1bmN0aW9uKGEsIHQpIHsNCiAgICAgICAgICAgIHZhciBuID0gYS50YXJnZXQNCiAgICAgICAgICAgICAgLCBzID0gU2Uobik7DQogICAgICAgICAgICBpZiAoIXMucGFyZW50cygiLmZjIikubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgdmFyIHIgPSBpLmRyb3BBY2NlcHQ7DQogICAgICAgICAgICAgICAgKFNlLmlzRnVuY3Rpb24ocikgPyByLmNhbGwobiwgcykgOiBzLmlzKHIpKSAmJiAoZmUgPSBuLA0KICAgICAgICAgICAgICAgIEsuZHJhZ1N0YXJ0KGZlLCBhLCB0KSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSkuYmluZCgiZHJhZ3N0b3AiLCBmdW5jdGlvbihhLCBlKSB7DQogICAgICAgICAgICBmZSAmJiAoSy5kcmFnU3RvcChmZSwgYSwgZSksDQogICAgICAgICAgICBmZSA9IG51bGwpDQogICAgICAgIH0pDQogICAgfQ0KICAgIGZ1bmN0aW9uIFRlKGEsIGQpIHsNCiAgICAgICAgZnVuY3Rpb24gcygpIHsNCiAgICAgICAgICAgIHAgPSBkLnRoZW1lID8gInVpIiA6ICJmYyI7DQogICAgICAgICAgICB2YXIgZSA9IGQuaGVhZGVyOw0KICAgICAgICAgICAgaWYgKGUpDQogICAgICAgICAgICAgICAgcmV0dXJuIHUgPSBTZSgiPHRhYmxlIGNsYXNzPSdmYy1oZWFkZXInIHN0eWxlPSd3aWR0aDoxMDAlJy8+IikuYXBwZW5kKFNlKCI8dHIvPiIpLmFwcGVuZChyKCJsZWZ0IikpLmFwcGVuZChyKCJjZW50ZXIiKSkuYXBwZW5kKHIoInJpZ2h0IikpKSwNCiAgICAgICAgICAgICAgICB1DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gbigpIHsNCiAgICAgICAgICAgIHUucmVtb3ZlKCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiByKHQpIHsNCiAgICAgICAgICAgIHZhciBzID0gU2UoIjx0ZCBjbGFzcz0nZmMtaGVhZGVyLSIgKyB0ICsgIicvPiIpDQogICAgICAgICAgICAgICwgbiA9IGQuaGVhZGVyW3RdOw0KICAgICAgICAgICAgcmV0dXJuIG4gJiYgU2UuZWFjaChuLnNwbGl0KCIgIiksIGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgICAgICAwIDwgdCAmJiBzLmFwcGVuZCgiPHNwYW4gY2xhc3M9J2ZjLWhlYWRlci1zcGFjZScvPiIpOw0KICAgICAgICAgICAgICAgIHZhciBuOw0KICAgICAgICAgICAgICAgIFNlLmVhY2godGhpcy5zcGxpdCgiLCIpLCBmdW5jdGlvbih0LCBlKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgidGl0bGUiID09IGUpDQogICAgICAgICAgICAgICAgICAgICAgICBzLmFwcGVuZCgiPHNwYW4gY2xhc3M9J2ZjLWhlYWRlci10aXRsZSc+PGgyPiZuYnNwOzwvaDI+PC9zcGFuPiIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiBuLmFkZENsYXNzKHAgKyAiLWNvcm5lci1yaWdodCIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHI7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYVtlXSA/IHIgPSBhW2VdIDogb2VbZV0gJiYgKHIgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLnJlbW92ZUNsYXNzKHAgKyAiLXN0YXRlLWhvdmVyIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5jaGFuZ2VWaWV3KGUpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgICAgICAgICAgcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZC50aGVtZSA/IE4oZC5idXR0b25JY29ucywgZSkgOiBudWxsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGkgPSBOKGQuYnV0dG9uVGV4dCwgZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgYyA9IFNlKCI8c3BhbiBjbGFzcz0nZmMtYnV0dG9uIGZjLWJ1dHRvbi0iICsgZSArICIgIiArIHAgKyAiLXN0YXRlLWRlZmF1bHQnPiIgKyAobyA/ICI8c3BhbiBjbGFzcz0nZmMtaWNvbi13cmFwJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLSIgKyBvICsgIicvPjwvc3Bhbj4iIDogaSkgKyAiPC9zcGFuPiIpLmNsaWNrKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmhhc0NsYXNzKHAgKyAiLXN0YXRlLWRpc2FibGVkIikgfHwgcigpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkubW91c2Vkb3duKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLm5vdCgiLiIgKyBwICsgIi1zdGF0ZS1hY3RpdmUiKS5ub3QoIi4iICsgcCArICItc3RhdGUtZGlzYWJsZWQiKS5hZGRDbGFzcyhwICsgIi1zdGF0ZS1kb3duIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5tb3VzZXVwKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLnJlbW92ZUNsYXNzKHAgKyAiLXN0YXRlLWRvd24iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmhvdmVyKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLm5vdCgiLiIgKyBwICsgIi1zdGF0ZS1hY3RpdmUiKS5ub3QoIi4iICsgcCArICItc3RhdGUtZGlzYWJsZWQiKS5hZGRDbGFzcyhwICsgIi1zdGF0ZS1ob3ZlciIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMucmVtb3ZlQ2xhc3MocCArICItc3RhdGUtaG92ZXIiKS5yZW1vdmVDbGFzcyhwICsgIi1zdGF0ZS1kb3duIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5hcHBlbmRUbyhzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqKGMpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gfHwgYy5hZGRDbGFzcyhwICsgIi1jb3JuZXItbGVmdCIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBjDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KSwNCiAgICAgICAgICAgICAgICBuICYmIG4uYWRkQ2xhc3MocCArICItY29ybmVyLXJpZ2h0IikNCiAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgcw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIG8oZSkgew0KICAgICAgICAgICAgdS5maW5kKCJoMiIpLmh0bWwoZSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBsKGUpIHsNCiAgICAgICAgICAgIHUuZmluZCgic3Bhbi5mYy1idXR0b24tIiArIGUpLmFkZENsYXNzKHAgKyAiLXN0YXRlLWFjdGl2ZSIpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gaShlKSB7DQogICAgICAgICAgICB1LmZpbmQoInNwYW4uZmMtYnV0dG9uLSIgKyBlKS5yZW1vdmVDbGFzcyhwICsgIi1zdGF0ZS1hY3RpdmUiKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGMoZSkgew0KICAgICAgICAgICAgdS5maW5kKCJzcGFuLmZjLWJ1dHRvbi0iICsgZSkuYWRkQ2xhc3MocCArICItc3RhdGUtZGlzYWJsZWQiKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGcoZSkgew0KICAgICAgICAgICAgdS5maW5kKCJzcGFuLmZjLWJ1dHRvbi0iICsgZSkucmVtb3ZlQ2xhc3MocCArICItc3RhdGUtZGlzYWJsZWQiKQ0KICAgICAgICB9DQogICAgICAgIHZhciBoID0gdGhpczsNCiAgICAgICAgaC5yZW5kZXIgPSBzLA0KICAgICAgICBoLmRlc3Ryb3kgPSBuLA0KICAgICAgICBoLnVwZGF0ZVRpdGxlID0gbywNCiAgICAgICAgaC5hY3RpdmF0ZUJ1dHRvbiA9IGwsDQogICAgICAgIGguZGVhY3RpdmF0ZUJ1dHRvbiA9IGksDQogICAgICAgIGguZGlzYWJsZUJ1dHRvbiA9IGMsDQogICAgICAgIGguZW5hYmxlQnV0dG9uID0gZzsNCiAgICAgICAgdmFyIHAsIHUgPSBTZShbXSkNCiAgICB9DQogICAgZnVuY3Rpb24gbihpLCBlKSB7DQogICAgICAgIGZ1bmN0aW9uIGEodCwgZSkgew0KICAgICAgICAgICAgcmV0dXJuICFDIHx8IHQgPCBDIHx8IGUgPiBFDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gcyh0LCBlKSB7DQogICAgICAgICAgICBDID0gdCwNCiAgICAgICAgICAgIEUgPSBlLA0KICAgICAgICAgICAgQiA9IFtdOw0KICAgICAgICAgICAgdmFyIGEgPSArK1ANCiAgICAgICAgICAgICAgLCBuID0gSC5sZW5ndGg7DQogICAgICAgICAgICBxID0gbjsNCiAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgbjsgcysrKQ0KICAgICAgICAgICAgICAgIGgoSFtzXSwgYSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBoKGUsIHQpIHsNCiAgICAgICAgICAgIHYoZSwgZnVuY3Rpb24oYSkgew0KICAgICAgICAgICAgICAgIGlmICh0ID09IFApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGkuZXZlbnREYXRhVHJhbnNmb3JtICYmIChhID0gU2UubWFwKGEsIGkuZXZlbnREYXRhVHJhbnNmb3JtKSksDQogICAgICAgICAgICAgICAgICAgICAgICBlLmV2ZW50RGF0YVRyYW5zZm9ybSAmJiAoYSA9IFNlLm1hcChhLCBlLmV2ZW50RGF0YVRyYW5zZm9ybSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBhLmxlbmd0aDsgbisrKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFbbl0uc291cmNlID0gZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtKGFbbl0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgQiA9IEIuY29uY2F0KGEpDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcS0tLA0KICAgICAgICAgICAgICAgICAgICBxIHx8IHgoQikNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHYoZSwgYSkgew0KICAgICAgICAgICAgdmFyIHQsIHMsIG4gPSByZS5zb3VyY2VGZXRjaGVyczsNCiAgICAgICAgICAgIGZvciAodCA9IDA7IHQgPCBuLmxlbmd0aDsgdCsrKSB7DQogICAgICAgICAgICAgICAgaWYgKHMgPSBuW3RdKGUsIEMsIEUsIGEpLA0KICAgICAgICAgICAgICAgICEwID09PSBzKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgaWYgKCJvYmplY3QiID09IHR5cGVvZiBzKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCB2KHMsIGEpDQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgbCA9IGUuZXZlbnRzOw0KICAgICAgICAgICAgaWYgKGwpDQogICAgICAgICAgICAgICAgU2UuaXNGdW5jdGlvbihsKSA/IChfKCksDQogICAgICAgICAgICAgICAgbCh6ZShDKSwgemUoRSksIGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgICAgICAgICAgYSh0KSwNCiAgICAgICAgICAgICAgICAgICAgZigpDQogICAgICAgICAgICAgICAgfSkpIDogU2UuaXNBcnJheShsKSA/IGEobCkgOiBhKCk7DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICB2YXIgYyA9IGUudXJsOw0KICAgICAgICAgICAgICAgIGlmIChjKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBnLCBoID0gZS5zdWNjZXNzLCB1ID0gZS5lcnJvciwgeSA9IGUuY29tcGxldGU7DQogICAgICAgICAgICAgICAgICAgIGcgPSBTZS5pc0Z1bmN0aW9uKGUuZGF0YSkgPyBlLmRhdGEoKSA6IGUuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBTZS5leHRlbmQoe30sIGcgfHwge30pDQogICAgICAgICAgICAgICAgICAgICAgLCBtID0gTChlLnN0YXJ0UGFyYW0sIGkuc3RhcnRQYXJhbSkNCiAgICAgICAgICAgICAgICAgICAgICAsIHcgPSBMKGUuZW5kUGFyYW0sIGkuZW5kUGFyYW0pOw0KICAgICAgICAgICAgICAgICAgICBtICYmIChiW21dID0gTWF0aC5yb3VuZCgrQyAvIDFlMykpLA0KICAgICAgICAgICAgICAgICAgICB3ICYmIChiW3ddID0gTWF0aC5yb3VuZCgrRSAvIDFlMykpLA0KICAgICAgICAgICAgICAgICAgICBfKCksDQogICAgICAgICAgICAgICAgICAgIFNlLmFqYXgoU2UuZXh0ZW5kKHt9LCBkLCBlLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBiLA0KICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBzIHx8IFtdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gQShoLCB0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlLmlzQXJyYXkobikgJiYgKHMgPSBuKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhKHMpDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEodSwgdGhpcywgYXJndW1lbnRzKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQSh5LCB0aGlzLCBhcmd1bWVudHMpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KSkNCiAgICAgICAgICAgICAgICB9IGVsc2UNCiAgICAgICAgICAgICAgICAgICAgYSgpDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gbih0KSB7DQogICAgICAgICAgICB0ID0gcih0KSwNCiAgICAgICAgICAgIHQgJiYgKHErKywNCiAgICAgICAgICAgIGgodCwgUCkpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gcih0KSB7DQogICAgICAgICAgICBpZiAoU2UuaXNGdW5jdGlvbih0KSB8fCBTZS5pc0FycmF5KHQpID8gdCA9IHsNCiAgICAgICAgICAgICAgICBldmVudHM6IHQNCiAgICAgICAgICAgIH0gOiAic3RyaW5nIiA9PSB0eXBlb2YgdCAmJiAodCA9IHsNCiAgICAgICAgICAgICAgICB1cmw6IHQNCiAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgIm9iamVjdCIgPT0gdHlwZW9mIHQpDQogICAgICAgICAgICAgICAgcmV0dXJuIHkodCksDQogICAgICAgICAgICAgICAgSC5wdXNoKHQpLA0KICAgICAgICAgICAgICAgIHQNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBvKHMpIHsNCiAgICAgICAgICAgIEggPSBTZS5ncmVwKEgsIGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gIWIodCwgcykNCiAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgQiA9IFNlLmdyZXAoQiwgZnVuY3Rpb24oZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAhYihlLnNvdXJjZSwgcykNCiAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgeChCKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGMoZSkgew0KICAgICAgICAgICAgdmFyIHQsIGksIGQgPSBCLmxlbmd0aCwgcyA9IFQoKS5kZWZhdWx0RXZlbnRFbmQsIHIgPSBlLnN0YXJ0IC0gZS5fc3RhcnQsIG8gPSBlLmVuZCA/IGUuZW5kIC0gKGUuX2VuZCB8fCBzKGUpKSA6IDA7DQogICAgICAgICAgICBmb3IgKHQgPSAwOyB0IDwgZDsgdCsrKQ0KICAgICAgICAgICAgICAgIGkgPSBCW3RdLA0KICAgICAgICAgICAgICAgIGkuX2lkID09IGUuX2lkICYmIGkgIT0gZSAmJiAoaS5zdGFydCA9IG5ldyBEYXRlKCtpLnN0YXJ0ICsgciksDQogICAgICAgICAgICAgICAgaS5lbmQgPSBlLmVuZCA/IGkuZW5kID8gbmV3IERhdGUoK2kuZW5kICsgbykgOiBuZXcgRGF0ZSgrcyhpKSArIG8pIDogbnVsbCwNCiAgICAgICAgICAgICAgICBpLnRpdGxlID0gZS50aXRsZSwNCiAgICAgICAgICAgICAgICBpLnVybCA9IGUudXJsLA0KICAgICAgICAgICAgICAgIGkuYWxsRGF5ID0gZS5hbGxEYXksDQogICAgICAgICAgICAgICAgaS5jbGFzc05hbWUgPSBlLmNsYXNzTmFtZSwNCiAgICAgICAgICAgICAgICBpLmVkaXRhYmxlID0gZS5lZGl0YWJsZSwNCiAgICAgICAgICAgICAgICBpLmNvbG9yID0gZS5jb2xvciwNCiAgICAgICAgICAgICAgICBpLmJhY2tncm91bmRDb2xvciA9IGUuYmFja2dyb3VuZENvbG9yLA0KICAgICAgICAgICAgICAgIGkuYm9yZGVyQ29sb3IgPSBlLmJvcmRlckNvbG9yLA0KICAgICAgICAgICAgICAgIGkudGV4dENvbG9yID0gZS50ZXh0Q29sb3IsDQogICAgICAgICAgICAgICAgbShpKSk7DQogICAgICAgICAgICBtKGUpLA0KICAgICAgICAgICAgeChCKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGcoYSwgZSkgew0KICAgICAgICAgICAgbShhKSwNCiAgICAgICAgICAgIGEuc291cmNlIHx8IChlICYmIChrLmV2ZW50cy5wdXNoKGEpLA0KICAgICAgICAgICAgYS5zb3VyY2UgPSBrKSwNCiAgICAgICAgICAgIEIucHVzaChhKSksDQogICAgICAgICAgICB4KEIpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gcChhKSB7DQogICAgICAgICAgICBpZiAoIWEpIHsNCiAgICAgICAgICAgICAgICBCID0gW107DQogICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBILmxlbmd0aDsgcysrKQ0KICAgICAgICAgICAgICAgICAgICBTZS5pc0FycmF5KEhbc10uZXZlbnRzKSAmJiAoSFtzXS5ldmVudHMgPSBbXSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKCFTZS5pc0Z1bmN0aW9uKGEpKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciByID0gYSArICIiOw0KICAgICAgICAgICAgICAgICAgICBhID0gZnVuY3Rpb24oZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuX2lkID09IHINCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBCID0gU2UuZ3JlcChCLCBhLCAhMCk7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBILmxlbmd0aDsgcysrKQ0KICAgICAgICAgICAgICAgICAgICBTZS5pc0FycmF5KEhbc10uZXZlbnRzKSAmJiAoSFtzXS5ldmVudHMgPSBTZS5ncmVwKEhbc10uZXZlbnRzLCBhLCAhMCkpDQogICAgICAgICAgICB9DQogICAgICAgICAgICB4KEIpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gdShlKSB7DQogICAgICAgICAgICByZXR1cm4gU2UuaXNGdW5jdGlvbihlKSA/IFNlLmdyZXAoQiwgZSkgOiBlID8gKGUgKz0gIiIsDQogICAgICAgICAgICBTZS5ncmVwKEIsIGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdC5faWQgPT0gZQ0KICAgICAgICAgICAgfSkpIDogQg0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIF8oKSB7DQogICAgICAgICAgICBZKysgfHwgUygibG9hZGluZyIsIG51bGwsICEwLCBUKCkpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gZigpIHsNCiAgICAgICAgICAgIC0tWSB8fCBTKCJsb2FkaW5nIiwgbnVsbCwgITEsIFQoKSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBtKGUpIHsNCiAgICAgICAgICAgIHZhciB0ID0gZS5zb3VyY2UgfHwge30NCiAgICAgICAgICAgICAgLCBhID0gTCh0Lmlnbm9yZVRpbWV6b25lLCBpLmlnbm9yZVRpbWV6b25lKTsNCiAgICAgICAgICAgIGUuX2lkID0gZS5faWQgfHwgKHZvaWQgMCA9PT0gZS5pZCA/ICJfZmMiICsgbGUrKyA6IGUuaWQgKyAiIiksDQogICAgICAgICAgICBlLmRhdGUgJiYgKCFlLnN0YXJ0ICYmIChlLnN0YXJ0ID0gZS5kYXRlKSwNCiAgICAgICAgICAgIGRlbGV0ZSBlLmRhdGUpLA0KICAgICAgICAgICAgZS5fc3RhcnQgPSB6ZShlLnN0YXJ0ID0gbChlLnN0YXJ0LCBhKSksDQogICAgICAgICAgICBlLmVuZCA9IGwoZS5lbmQsIGEpLA0KICAgICAgICAgICAgZS5lbmQgJiYgZS5lbmQgPD0gZS5zdGFydCAmJiAoZS5lbmQgPSBudWxsKSwNCiAgICAgICAgICAgIGUuX2VuZCA9IGUuZW5kID8gemUoZS5lbmQpIDogbnVsbCwNCiAgICAgICAgICAgIHZvaWQgMCA9PT0gZS5hbGxEYXkgJiYgKGUuYWxsRGF5ID0gTCh0LmFsbERheURlZmF1bHQsIGkuYWxsRGF5RGVmYXVsdCkpLA0KICAgICAgICAgICAgZS5jbGFzc05hbWUgPyAic3RyaW5nIiA9PSB0eXBlb2YgZS5jbGFzc05hbWUgJiYgKGUuY2xhc3NOYW1lID0gZS5jbGFzc05hbWUuc3BsaXQoL1xzKy8pKSA6IGUuY2xhc3NOYW1lID0gW10NCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiB5KHMpIHsNCiAgICAgICAgICAgIHMuY2xhc3NOYW1lID8gInN0cmluZyIgPT0gdHlwZW9mIHMuY2xhc3NOYW1lICYmIChzLmNsYXNzTmFtZSA9IHMuY2xhc3NOYW1lLnNwbGl0KC9ccysvKSkgOiBzLmNsYXNzTmFtZSA9IFtdOw0KICAgICAgICAgICAgZm9yICh2YXIgZSA9IHJlLnNvdXJjZU5vcm1hbGl6ZXJzLCB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspDQogICAgICAgICAgICAgICAgZVt0XShzKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGIoYSwgZSkgew0KICAgICAgICAgICAgcmV0dXJuIGEgJiYgZSAmJiBEKGEpID09IEQoZSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBEKHQpIHsNCiAgICAgICAgICAgIHJldHVybiAoIm9iamVjdCIgPT0gdHlwZW9mIHQgPyB0LmV2ZW50cyB8fCB0LnVybCA6ICIiKSB8fCB0DQogICAgICAgIH0NCiAgICAgICAgdmFyIHcgPSB0aGlzOw0KICAgICAgICB3LmlzRmV0Y2hOZWVkZWQgPSBhLA0KICAgICAgICB3LmZldGNoRXZlbnRzID0gcywNCiAgICAgICAgdy5hZGRFdmVudFNvdXJjZSA9IG4sDQogICAgICAgIHcucmVtb3ZlRXZlbnRTb3VyY2UgPSBvLA0KICAgICAgICB3LnVwZGF0ZUV2ZW50ID0gYywNCiAgICAgICAgdy5yZW5kZXJFdmVudCA9IGcsDQogICAgICAgIHcucmVtb3ZlRXZlbnRzID0gcCwNCiAgICAgICAgdy5jbGllbnRFdmVudHMgPSB1LA0KICAgICAgICB3Lm5vcm1hbGl6ZUV2ZW50ID0gbTsNCiAgICAgICAgZm9yICh2YXIgQywgRSwgUyA9IHcudHJpZ2dlciwgVCA9IHcuZ2V0VmlldywgeCA9IHcucmVwb3J0RXZlbnRzLCBrID0gew0KICAgICAgICAgICAgZXZlbnRzOiBbXQ0KICAgICAgICB9LCBIID0gW2tdLCBQID0gMCwgcSA9IDAsIFkgPSAwLCBCID0gW10sIGogPSAwOyBqIDwgZS5sZW5ndGg7IGorKykNCiAgICAgICAgICAgIHIoZVtqXSkNCiAgICB9DQogICAgZnVuY3Rpb24gcyhzLCBlLCB0KSB7DQogICAgICAgIHJldHVybiBzLnNldEZ1bGxZZWFyKHMuZ2V0RnVsbFllYXIoKSArIGUpLA0KICAgICAgICB0IHx8IGMocyksDQogICAgICAgIHMNCiAgICB9DQogICAgZnVuY3Rpb24geGUociwgZSwgdCkgew0KICAgICAgICBpZiAoK3IpIHsNCiAgICAgICAgICAgIHZhciBhID0gci5nZXRNb250aCgpICsgZQ0KICAgICAgICAgICAgICAsIG4gPSB6ZShyKTsNCiAgICAgICAgICAgIGZvciAobi5zZXREYXRlKDEpLA0KICAgICAgICAgICAgbi5zZXRNb250aChhKSwNCiAgICAgICAgICAgIHIuc2V0TW9udGgoYSksDQogICAgICAgICAgICB0IHx8IGMocik7IHIuZ2V0TW9udGgoKSAhPSBuLmdldE1vbnRoKCk7ICkNCiAgICAgICAgICAgICAgICByLnNldERhdGUoci5nZXREYXRlKCkgKyAociA8IG4gPyAxIDogLTEpKQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiByDQogICAgfQ0KICAgIGZ1bmN0aW9uIGtlKG8sIGUsIHQpIHsNCiAgICAgICAgaWYgKCtvKSB7DQogICAgICAgICAgICB2YXIgYSA9IG8uZ2V0RGF0ZSgpICsgZQ0KICAgICAgICAgICAgICAsIG4gPSB6ZShvKTsNCiAgICAgICAgICAgIG4uc2V0SG91cnMoOSksDQogICAgICAgICAgICBuLnNldERhdGUoYSksDQogICAgICAgICAgICBvLnNldERhdGUoYSksDQogICAgICAgICAgICB0IHx8IGMobyksDQogICAgICAgICAgICByKG8sIG4pDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIG8NCiAgICB9DQogICAgZnVuY3Rpb24gcihhLCBlKSB7DQogICAgICAgIGlmICgrYSkNCiAgICAgICAgICAgIGZvciAoOyBhLmdldERhdGUoKSAhPSBlLmdldERhdGUoKTsgKQ0KICAgICAgICAgICAgICAgIGEuc2V0VGltZSgrYSArIDM2ZTUgKiAoYSA8IGUgPyAxIDogLTEpKQ0KICAgIH0NCiAgICBmdW5jdGlvbiBIZShhLCBlKSB7DQogICAgICAgIHJldHVybiBhLnNldE1pbnV0ZXMoYS5nZXRNaW51dGVzKCkgKyBlKSwNCiAgICAgICAgYQ0KICAgIH0NCiAgICBmdW5jdGlvbiBjKHQpIHsNCiAgICAgICAgcmV0dXJuIHQuc2V0SG91cnMoMCksDQogICAgICAgIHQuc2V0TWludXRlcygwKSwNCiAgICAgICAgdC5zZXRTZWNvbmRzKDApLA0KICAgICAgICB0LnNldE1pbGxpc2Vjb25kcygwKSwNCiAgICAgICAgdA0KICAgIH0NCiAgICBmdW5jdGlvbiB6ZShhLCBlKSB7DQogICAgICAgIHJldHVybiBlID8gYyhuZXcgRGF0ZSgrYSkpIDogbmV3IERhdGUoK2EpDQogICAgfQ0KICAgIGZ1bmN0aW9uIGkoKSB7DQogICAgICAgIHZhciBhLCBzID0gMDsNCiAgICAgICAgZG8NCiAgICAgICAgICAgIGEgPSBuZXcgRGF0ZSgxOTcwLHMrKywxKTsNCiAgICAgICAgd2hpbGUgKGEuZ2V0SG91cnMoKSk7cmV0dXJuIGENCiAgICB9DQogICAgZnVuY3Rpb24gaChhLCBlKSB7DQogICAgICAgIHJldHVybiBNYXRoLnJvdW5kKCh6ZShhLCAhMCkgLSB6ZShlLCAhMCkpIC8gODY0ZTUpDQogICAgfQ0KICAgIGZ1bmN0aW9uIG8ocywgZSwgdCwgYSkgew0KICAgICAgICB2b2lkIDAgIT09IGUgJiYgZSAhPSBzLmdldEZ1bGxZZWFyKCkgJiYgKHMuc2V0RGF0ZSgxKSwNCiAgICAgICAgcy5zZXRNb250aCgwKSwNCiAgICAgICAgcy5zZXRGdWxsWWVhcihlKSksDQogICAgICAgIHZvaWQgMCAhPT0gdCAmJiB0ICE9IHMuZ2V0TW9udGgoKSAmJiAocy5zZXREYXRlKDEpLA0KICAgICAgICBzLnNldE1vbnRoKHQpKSwNCiAgICAgICAgdm9pZCAwICE9PSBhICYmIHMuc2V0RGF0ZShhKQ0KICAgIH0NCiAgICBmdW5jdGlvbiBsKGEsIGUpIHsNCiAgICAgICAgcmV0dXJuICJvYmplY3QiID09IHR5cGVvZiBhID8gYSA6ICJudW1iZXIiID09IHR5cGVvZiBhID8gbmV3IERhdGUoMWUzICogYSkgOiAic3RyaW5nIiA9PSB0eXBlb2YgYSA/IGEubWF0Y2goL15cZCsoXC5cZCspPyQvKSA/IG5ldyBEYXRlKDFlMyAqIHBhcnNlRmxvYXQoYSkpIDogKHZvaWQgMCA9PT0gZSAmJiAoZSA9ICEwKSwNCiAgICAgICAgZyhhLCBlKSB8fCAoYSA/IG5ldyBEYXRlKGEpIDogbnVsbCkpIDogbnVsbA0KICAgIH0NCiAgICBmdW5jdGlvbiBnKG8sIGUpIHsNCiAgICAgICAgdmFyIHQgPSBvLm1hdGNoKC9eKFswLTldezR9KSgtKFswLTldezJ9KSgtKFswLTldezJ9KShbVCBdKFswLTldezJ9KTooWzAtOV17Mn0pKDooWzAtOV17Mn0pKFwuKFswLTldKykpPyk/KFp8KChbLStdKShbMC05XXsyfSkoOj8oWzAtOV17Mn0pKT8pKT8pPyk/KT8kLyk7DQogICAgICAgIGlmICghdCkNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB2YXIgYSA9IG5ldyBEYXRlKHRbMV0sMCwxKTsNCiAgICAgICAgaWYgKGUgfHwgIXRbMTNdKSB7DQogICAgICAgICAgICB2YXIgbCA9IG5ldyBEYXRlKHRbMV0sMCwxLDksMCk7DQogICAgICAgICAgICB0WzNdICYmIChhLnNldE1vbnRoKHRbM10gLSAxKSwNCiAgICAgICAgICAgIGwuc2V0TW9udGgodFszXSAtIDEpKSwNCiAgICAgICAgICAgIHRbNV0gJiYgKGEuc2V0RGF0ZSh0WzVdKSwNCiAgICAgICAgICAgIGwuc2V0RGF0ZSh0WzVdKSksDQogICAgICAgICAgICByKGEsIGwpLA0KICAgICAgICAgICAgdFs3XSAmJiBhLnNldEhvdXJzKHRbN10pLA0KICAgICAgICAgICAgdFs4XSAmJiBhLnNldE1pbnV0ZXModFs4XSksDQogICAgICAgICAgICB0WzEwXSAmJiBhLnNldFNlY29uZHModFsxMF0pLA0KICAgICAgICAgICAgdFsxMl0gJiYgYS5zZXRNaWxsaXNlY29uZHMoMWUzICogKygiMC4iICsgdFsxMl0pKSwNCiAgICAgICAgICAgIHIoYSwgbCkNCiAgICAgICAgfSBlbHNlIGlmIChhLnNldFVUQ0Z1bGxZZWFyKHRbMV0sIHRbM10gPyB0WzNdIC0gMSA6IDAsIHRbNV0gfHwgMSksDQogICAgICAgIGEuc2V0VVRDSG91cnModFs3XSB8fCAwLCB0WzhdIHx8IDAsIHRbMTBdIHx8IDAsIHRbMTJdID8gMWUzICogKygiMC4iICsgdFsxMl0pIDogMCksDQogICAgICAgIHRbMTRdKSB7DQogICAgICAgICAgICB2YXIgcyA9IDYwICogK3RbMTZdICsgKHRbMThdID8gK3RbMThdIDogMCk7DQogICAgICAgICAgICBzICo9ICItIiA9PSB0WzE1XSA/IDEgOiAtMSwNCiAgICAgICAgICAgIGEgPSBuZXcgRGF0ZSgrYSArIDFlMyAqICg2MCAqIHMpKQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBhDQogICAgfQ0KICAgIGZ1bmN0aW9uIGUocykgew0KICAgICAgICBpZiAoIm51bWJlciIgPT0gdHlwZW9mIHMpDQogICAgICAgICAgICByZXR1cm4gNjAgKiBzOw0KICAgICAgICBpZiAoIm9iamVjdCIgPT0gdHlwZW9mIHMpDQogICAgICAgICAgICByZXR1cm4gNjAgKiBzLmdldEhvdXJzKCkgKyBzLmdldE1pbnV0ZXMoKTsNCiAgICAgICAgdmFyIGUgPSBzLm1hdGNoKC8oXGQrKSg/OjooXGQrKSk/XHMqKFx3Kyk/Lyk7DQogICAgICAgIGlmIChlKSB7DQogICAgICAgICAgICB2YXIgdCA9IHBhcnNlSW50KGVbMV0sIDEwKTsNCiAgICAgICAgICAgIHJldHVybiBlWzNdICYmICh0ICU9IDEyLA0KICAgICAgICAgICAgInAiID09IGVbM10udG9Mb3dlckNhc2UoKS5jaGFyQXQoMCkgJiYgKHQgKz0gMTIpKSwNCiAgICAgICAgICAgIDYwICogdCArIChlWzJdID8gcGFyc2VJbnQoZVsyXSwgMTApIDogMCkNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBwKHMsIGUsIHQpIHsNCiAgICAgICAgcmV0dXJuIHUocywgbnVsbCwgZSwgdCkNCiAgICB9DQogICAgZnVuY3Rpb24gdShpLCBlLCB0LCBhKSB7DQogICAgICAgIGEgPSBhIHx8IHNlOw0KICAgICAgICB2YXIgYywgdiwgbSwgeSwgYiA9IGksIEQgPSBlLCB3ID0gdC5sZW5ndGgsIGggPSAiIjsNCiAgICAgICAgZm9yIChjID0gMDsgYyA8IHc7IGMrKykNCiAgICAgICAgICAgIGlmICh2ID0gdC5jaGFyQXQoYyksDQogICAgICAgICAgICAiJyIgPT0gdikgew0KICAgICAgICAgICAgICAgIGZvciAobSA9IGMgKyAxOyBtIDwgdzsgbSsrKQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIiciID09IHQuY2hhckF0KG0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBiICYmIChoICs9IG0gPT0gYyArIDEgPyAiJyIgOiB0LnN1YnN0cmluZyhjICsgMSwgbSksDQogICAgICAgICAgICAgICAgICAgICAgICBjID0gbSk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2UgaWYgKCIoIiA9PSB2KSB7DQogICAgICAgICAgICAgICAgZm9yIChtID0gYyArIDE7IG0gPCB3OyBtKyspDQogICAgICAgICAgICAgICAgICAgIGlmICgiKSIgPT0gdC5jaGFyQXQobSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBDID0gcChiLCB0LnN1YnN0cmluZyhjICsgMSwgbSksIGEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoQy5yZXBsYWNlKC9cRC8sICIiKSwgMTApICYmIChoICs9IEMpLA0KICAgICAgICAgICAgICAgICAgICAgICAgYyA9IG07DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2UgaWYgKCJbIiA9PSB2KSB7DQogICAgICAgICAgICAgICAgZm9yIChtID0gYyArIDE7IG0gPCB3OyBtKyspDQogICAgICAgICAgICAgICAgICAgIGlmICgiXSIgPT0gdC5jaGFyQXQobSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBFID0gdC5zdWJzdHJpbmcoYyArIDEsIG0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICwgQyA9IHAoYiwgRSwgYSk7DQogICAgICAgICAgICAgICAgICAgICAgICBDICE9IHAoRCwgRSwgYSkgJiYgKGggKz0gQyksDQogICAgICAgICAgICAgICAgICAgICAgICBjID0gbTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSBpZiAoInsiID09IHYpDQogICAgICAgICAgICAgICAgYiA9IGUsDQogICAgICAgICAgICAgICAgRCA9IGk7DQogICAgICAgICAgICBlbHNlIGlmICgifSIgPT0gdikNCiAgICAgICAgICAgICAgICBiID0gaSwNCiAgICAgICAgICAgICAgICBEID0gZTsNCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGZvciAobSA9IHc7IG0gPiBjOyBtLS0pDQogICAgICAgICAgICAgICAgICAgIGlmICh5ID0gY2VbdC5zdWJzdHJpbmcoYywgbSldKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBiICYmIChoICs9IHkoYiwgYSkpLA0KICAgICAgICAgICAgICAgICAgICAgICAgYyA9IG0gLSAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG0gPT0gYyAmJiBiICYmIChoICs9IHYpDQogICAgICAgICAgICB9DQogICAgICAgIHJldHVybiBoDQogICAgfQ0KICAgIGZ1bmN0aW9uIHQocykgew0KICAgICAgICB2YXIgZSwgbiA9IG5ldyBEYXRlKHMuZ2V0VGltZSgpKTsNCiAgICAgICAgcmV0dXJuIG4uc2V0RGF0ZShuLmdldERhdGUoKSArIDQgLSAobi5nZXREYXkoKSB8fCA3KSksDQogICAgICAgIGUgPSBuLmdldFRpbWUoKSwNCiAgICAgICAgbi5zZXRNb250aCgwKSwNCiAgICAgICAgbi5zZXREYXRlKDEpLA0KICAgICAgICBNYXRoLmZsb29yKE1hdGgucm91bmQoKGUgLSBuKSAvIDg2NGU1KSAvIDcpICsgMQ0KICAgIH0NCiAgICBmdW5jdGlvbiB5KHQpIHsNCiAgICAgICAgcmV0dXJuIHQuZW5kID8gZih0LmVuZCwgdC5hbGxEYXkpIDoga2UoemUodC5zdGFydCksIDEpDQogICAgfQ0KICAgIGZ1bmN0aW9uIGYoYSwgcykgew0KICAgICAgICByZXR1cm4gYSA9IHplKGEpLA0KICAgICAgICBzIHx8IGEuZ2V0SG91cnMoKSB8fCBhLmdldE1pbnV0ZXMoKSA/IGtlKGEsIDEpIDogYyhhKQ0KICAgIH0NCiAgICBmdW5jdGlvbiB2KGEsIGUsIHQpIHsNCiAgICAgICAgYS51bmJpbmQoIm1vdXNlb3ZlciIpLm1vdXNlb3ZlcihmdW5jdGlvbihhKSB7DQogICAgICAgICAgICBmb3IgKHZhciBzLCBuLCBpLCBjID0gYS50YXJnZXQ7IGMgIT0gdGhpczsgKQ0KICAgICAgICAgICAgICAgIHMgPSBjLA0KICAgICAgICAgICAgICAgIGMgPSBjLnBhcmVudE5vZGU7DQogICAgICAgICAgICB2b2lkIDAgIT09IChuID0gcy5fZmNpKSAmJiAocy5fZmNpID0gdm9pZCAwLA0KICAgICAgICAgICAgaSA9IGVbbl0sDQogICAgICAgICAgICB0KGkuZXZlbnQsIGkuZWxlbWVudCwgaSksDQogICAgICAgICAgICBTZShhLnRhcmdldCkudHJpZ2dlcihhKSksDQogICAgICAgICAgICBhLnN0b3BQcm9wYWdhdGlvbigpDQogICAgICAgIH0pDQogICAgfQ0KICAgIGZ1bmN0aW9uIG0oZSwgdCwgYSkgew0KICAgICAgICBmb3IgKHZhciBzLCBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspDQogICAgICAgICAgICBzID0gU2UoZVtuXSksDQogICAgICAgICAgICBzLndpZHRoKE1hdGgubWF4KDAsIHQgLSBEKHMsIGEpKSkNCiAgICB9DQogICAgZnVuY3Rpb24gYihlLCB0LCBhKSB7DQogICAgICAgIGZvciAodmFyIHMsIG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykNCiAgICAgICAgICAgIHMgPSBTZShlW25dKSwNCiAgICAgICAgICAgIHMuaGVpZ2h0KE1hdGgubWF4KDAsIHQgLSBTKHMsIGEpKSkNCiAgICB9DQogICAgZnVuY3Rpb24gRChhLCBlKSB7DQogICAgICAgIHJldHVybiB3KGEpICsgRShhKSArIChlID8gQyhhKSA6IDApDQogICAgfQ0KICAgIGZ1bmN0aW9uIHcodCkgew0KICAgICAgICByZXR1cm4gKHBhcnNlRmxvYXQoU2UuY3NzKHRbMF0sICJwYWRkaW5nTGVmdCIsICEwKSkgfHwgMCkgKyAocGFyc2VGbG9hdChTZS5jc3ModFswXSwgInBhZGRpbmdSaWdodCIsICEwKSkgfHwgMCkNCiAgICB9DQogICAgZnVuY3Rpb24gQyh0KSB7DQogICAgICAgIHJldHVybiAocGFyc2VGbG9hdChTZS5jc3ModFswXSwgIm1hcmdpbkxlZnQiLCAhMCkpIHx8IDApICsgKHBhcnNlRmxvYXQoU2UuY3NzKHRbMF0sICJtYXJnaW5SaWdodCIsICEwKSkgfHwgMCkNCiAgICB9DQogICAgZnVuY3Rpb24gRSh0KSB7DQogICAgICAgIHJldHVybiAocGFyc2VGbG9hdChTZS5jc3ModFswXSwgImJvcmRlckxlZnRXaWR0aCIsICEwKSkgfHwgMCkgKyAocGFyc2VGbG9hdChTZS5jc3ModFswXSwgImJvcmRlclJpZ2h0V2lkdGgiLCAhMCkpIHx8IDApDQogICAgfQ0KICAgIGZ1bmN0aW9uIFMoYSwgZSkgew0KICAgICAgICByZXR1cm4gTShhKSArIHgoYSkgKyAoZSA/IFQoYSkgOiAwKQ0KICAgIH0NCiAgICBmdW5jdGlvbiBNKHQpIHsNCiAgICAgICAgcmV0dXJuIChwYXJzZUZsb2F0KFNlLmNzcyh0WzBdLCAicGFkZGluZ1RvcCIsICEwKSkgfHwgMCkgKyAocGFyc2VGbG9hdChTZS5jc3ModFswXSwgInBhZGRpbmdCb3R0b20iLCAhMCkpIHx8IDApDQogICAgfQ0KICAgIGZ1bmN0aW9uIFQodCkgew0KICAgICAgICByZXR1cm4gKHBhcnNlRmxvYXQoU2UuY3NzKHRbMF0sICJtYXJnaW5Ub3AiLCAhMCkpIHx8IDApICsgKHBhcnNlRmxvYXQoU2UuY3NzKHRbMF0sICJtYXJnaW5Cb3R0b20iLCAhMCkpIHx8IDApDQogICAgfQ0KICAgIGZ1bmN0aW9uIHgodCkgew0KICAgICAgICByZXR1cm4gKHBhcnNlRmxvYXQoU2UuY3NzKHRbMF0sICJib3JkZXJUb3BXaWR0aCIsICEwKSkgfHwgMCkgKyAocGFyc2VGbG9hdChTZS5jc3ModFswXSwgImJvcmRlckJvdHRvbVdpZHRoIiwgITApKSB8fCAwKQ0KICAgIH0NCiAgICBmdW5jdGlvbiBIKCkge30NCiAgICBmdW5jdGlvbiBrKGEsIGUpIHsNCiAgICAgICAgcmV0dXJuIGEgLSBlDQogICAgfQ0KICAgIGZ1bmN0aW9uIFIodCkgew0KICAgICAgICByZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCwgdCkNCiAgICB9DQogICAgZnVuY3Rpb24geih0KSB7DQogICAgICAgIHJldHVybiAoMTAgPiB0ID8gIjAiIDogIiIpICsgdA0KICAgIH0NCiAgICBmdW5jdGlvbiBOKHIsIGUpIHsNCiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcltlXSkNCiAgICAgICAgICAgIHJldHVybiByW2VdOw0KICAgICAgICBmb3IgKHZhciB0LCBvID0gZS5zcGxpdCgvKD89W0EtWl0pLyksIG4gPSBvLmxlbmd0aCAtIDE7IDAgPD0gbjsgbi0tKQ0KICAgICAgICAgICAgaWYgKHQgPSByW29bbl0udG9Mb3dlckNhc2UoKV0sDQogICAgICAgICAgICB2b2lkIDAgIT09IHQpDQogICAgICAgICAgICAgICAgcmV0dXJuIHQ7DQogICAgICAgIHJldHVybiByWyIiXQ0KICAgIH0NCiAgICBmdW5jdGlvbiBGKHQpIHsNCiAgICAgICAgcmV0dXJuIHQucmVwbGFjZSgvJi9nLCAiJmFtcDsiKS5yZXBsYWNlKC88L2csICImbHQ7IikucmVwbGFjZSgvPi9nLCAiJmd0OyIpLnJlcGxhY2UoLycvZywgIiYjMDM5OyIpLnJlcGxhY2UoLyIvZywgIiZxdW90OyIpLnJlcGxhY2UoL1xuL2csICI8YnIgLz4iKQ0KICAgIH0NCiAgICBmdW5jdGlvbiBqKHQpIHsNCiAgICAgICAgdC5hdHRyKCJ1bnNlbGVjdGFibGUiLCAib24iKS5jc3MoIk1velVzZXJTZWxlY3QiLCAibm9uZSIpLmJpbmQoInNlbGVjdHN0YXJ0LnVpIiwgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gITENCiAgICAgICAgfSkNCiAgICB9DQogICAgZnVuY3Rpb24gTyhlKSB7DQogICAgICAgIGUuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygiZmMtZmlyc3QgZmMtbGFzdCIpLmZpbHRlcigiOmZpcnN0LWNoaWxkIikuYWRkQ2xhc3MoImZjLWZpcnN0IikuZW5kKCkuZmlsdGVyKCI6bGFzdC1jaGlsZCIpLmFkZENsYXNzKCJmYy1sYXN0IikNCiAgICB9DQogICAgZnVuY3Rpb24gVyhjLCBlKSB7DQogICAgICAgIHZhciB0ID0gYy5zb3VyY2UgfHwge30NCiAgICAgICAgICAsIGEgPSBjLmNvbG9yDQogICAgICAgICAgLCBuID0gdC5jb2xvcg0KICAgICAgICAgICwgcyA9IGUoImV2ZW50Q29sb3IiKQ0KICAgICAgICAgICwgciA9IGMuYmFja2dyb3VuZENvbG9yIHx8IGEgfHwgdC5iYWNrZ3JvdW5kQ29sb3IgfHwgbiB8fCBlKCJldmVudEJhY2tncm91bmRDb2xvciIpIHx8IHMNCiAgICAgICAgICAsIGkgPSBjLmJvcmRlckNvbG9yIHx8IGEgfHwgdC5ib3JkZXJDb2xvciB8fCBuIHx8IGUoImV2ZW50Qm9yZGVyQ29sb3IiKSB8fCBzDQogICAgICAgICAgLCBvID0gYy50ZXh0Q29sb3IgfHwgdC50ZXh0Q29sb3IgfHwgZSgiZXZlbnRUZXh0Q29sb3IiKQ0KICAgICAgICAgICwgbCA9IFtdOw0KICAgICAgICByZXR1cm4gciAmJiBsLnB1c2goImJhY2tncm91bmQtY29sb3I6IiArIHIpLA0KICAgICAgICBpICYmIGwucHVzaCgiYm9yZGVyLWNvbG9yOiIgKyBpKSwNCiAgICAgICAgbyAmJiBsLnB1c2goImNvbG9yOiIgKyBvKSwNCiAgICAgICAgbC5qb2luKCI7IikNCiAgICB9DQogICAgZnVuY3Rpb24gQShhLCBvLCB0KSB7DQogICAgICAgIGlmIChTZS5pc0Z1bmN0aW9uKGEpICYmIChhID0gW2FdKSwNCiAgICAgICAgYSkgew0KICAgICAgICAgICAgdmFyIG4sIGw7DQogICAgICAgICAgICBmb3IgKG4gPSAwOyBuIDwgYS5sZW5ndGg7IG4rKykNCiAgICAgICAgICAgICAgICBsID0gYVtuXS5hcHBseShvLCB0KSB8fCBsOw0KICAgICAgICAgICAgcmV0dXJuIGwNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBMKCkgew0KICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykNCiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGFyZ3VtZW50c1t0XSkNCiAgICAgICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzW3RdDQogICAgfQ0KICAgIGZ1bmN0aW9uIF8obywgZSwgYSkgew0KICAgICAgICBmdW5jdGlvbiBzKHMsIGUsIHQpIHsNCiAgICAgICAgICAgIE9lID0gcywNCiAgICAgICAgICAgIEFlID0gZSwNCiAgICAgICAgICAgIExlID0gdCwNCiAgICAgICAgICAgIG4oKSwNCiAgICAgICAgICAgIEogfHwgcigpLA0KICAgICAgICAgICAgbCgpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gbigpIHsNCiAgICAgICAgICAgIEJlID0gVmUoInRoZW1lIikgPyAidWkiIDogImZjIiwNCiAgICAgICAgICAgIGplID0gVmUoImNvbHVtbkZvcm1hdCIpLA0KICAgICAgICAgICAgSWUgPSBWZSgid2Vla051bWJlcnMiKSwNCiAgICAgICAgICAgIFhlID0gVmUoIndlZWtOdW1iZXJUaXRsZSIpLA0KICAgICAgICAgICAgSmUgPSAiaXNvIiA9PSBWZSgid2Vla051bWJlckNhbGN1bGF0aW9uIikgPyAiVyIgOiAidyINCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiByKCkgew0KICAgICAgICAgICAgSGUgPSBTZSgiPGRpdiBjbGFzcz0nZmMtZXZlbnQtY29udGFpbmVyJyBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDo4O3RvcDowO2xlZnQ6MCcvPiIpLmFwcGVuZFRvKG8pDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gbCgpIHsNCiAgICAgICAgICAgIHZhciBlID0gaSgpOw0KICAgICAgICAgICAgeiAmJiB6LnJlbW92ZSgpLA0KICAgICAgICAgICAgeiA9IFNlKGUpLmFwcGVuZFRvKG8pLA0KICAgICAgICAgICAgTiA9IHouZmluZCgidGhlYWQiKSwNCiAgICAgICAgICAgIHEgPSBOLmZpbmQoIi5mYy1kYXktaGVhZGVyIiksDQogICAgICAgICAgICBKID0gei5maW5kKCJ0Ym9keSIpLA0KICAgICAgICAgICAgdmUgPSBKLmZpbmQoInRyIiksDQogICAgICAgICAgICBDZSA9IEouZmluZCgiLmZjLWRheSIpLA0KICAgICAgICAgICAgTWUgPSB2ZS5maW5kKCJ0ZDpmaXJzdC1jaGlsZCIpLA0KICAgICAgICAgICAgVGUgPSB2ZS5lcSgwKS5maW5kKCIuZmMtZGF5ID4gZGl2IiksDQogICAgICAgICAgICB4ZSA9IHZlLmVxKDApLmZpbmQoIi5mYy1kYXktY29udGVudCA+IGRpdiIpLA0KICAgICAgICAgICAgTyhOLmFkZChOLmZpbmQoInRyIikpKSwNCiAgICAgICAgICAgIE8odmUpLA0KICAgICAgICAgICAgdmUuZXEoMCkuYWRkQ2xhc3MoImZjLWZpcnN0IiksDQogICAgICAgICAgICB2ZS5maWx0ZXIoIjpsYXN0IikuYWRkQ2xhc3MoImZjLWxhc3QiKSwNCiAgICAgICAgICAgIENlLmVhY2goZnVuY3Rpb24oYSwgZSkgew0KICAgICAgICAgICAgICAgIHZhciB0ID0gYmUoTWF0aC5mbG9vcihhIC8gQWUpLCBhICUgQWUpOw0KICAgICAgICAgICAgICAgIGNlKCJkYXlSZW5kZXIiLCBSLCB0LCBTZShlKSkNCiAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgdihDZSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBpKCkgew0KICAgICAgICAgICAgdmFyIHQgPSAiPHRhYmxlIGNsYXNzPSdmYy1ib3JkZXItc2VwYXJhdGUnIHN0eWxlPSd3aWR0aDoxMDAlJyBjZWxsc3BhY2luZz0nMCc+IiArIGQoKSArIGgoKSArICI8L3RhYmxlPiI7DQogICAgICAgICAgICByZXR1cm4gdA0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGQoKSB7DQogICAgICAgICAgICB2YXIgcywgciwgbyA9IEJlICsgIi13aWRnZXQtaGVhZGVyIiwgYSA9ICIiOw0KICAgICAgICAgICAgZm9yIChhICs9ICI8dGhlYWQ+PHRyPiIsDQogICAgICAgICAgICBJZSAmJiAoYSArPSAiPHRoIGNsYXNzPSdmYy13ZWVrLW51bWJlciAiICsgbyArICInPiIgKyBGKFhlKSArICI8L3RoPiIpLA0KICAgICAgICAgICAgcyA9IDA7IHMgPCBBZTsgcysrKQ0KICAgICAgICAgICAgICAgIHIgPSBiZSgwLCBzKSwNCiAgICAgICAgICAgICAgICBhICs9ICI8dGggY2xhc3M9J2ZjLWRheS1oZWFkZXIgZmMtIiArIGRlW3IuZ2V0RGF5KCldICsgIiAiICsgbyArICInPiIgKyBGKEVlKHIsIGplKSkgKyAiPC90aD4iOw0KICAgICAgICAgICAgcmV0dXJuIGEgKz0gIjwvdHI+PC90aGVhZD4iLA0KICAgICAgICAgICAgYQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGgoKSB7DQogICAgICAgICAgICB2YXIgciwgbywgbCwgaSA9IEJlICsgIi13aWRnZXQtY29udGVudCIsIG4gPSAiIjsNCiAgICAgICAgICAgIGZvciAobiArPSAiPHRib2R5PiIsDQogICAgICAgICAgICByID0gMDsgciA8IE9lOyByKyspIHsNCiAgICAgICAgICAgICAgICBmb3IgKG4gKz0gIjx0ciBjbGFzcz0nZmMtd2Vlayc+IiwNCiAgICAgICAgICAgICAgICBJZSAmJiAobCA9IGJlKHIsIDApLA0KICAgICAgICAgICAgICAgIG4gKz0gIjx0ZCBjbGFzcz0nZmMtd2Vlay1udW1iZXIgIiArIGkgKyAiJz48ZGl2PiIgKyBGKEVlKGwsIEplKSkgKyAiPC9kaXY+PC90ZD4iKSwNCiAgICAgICAgICAgICAgICBvID0gMDsgbyA8IEFlOyBvKyspDQogICAgICAgICAgICAgICAgICAgIGwgPSBiZShyLCBvKSwNCiAgICAgICAgICAgICAgICAgICAgbiArPSBwKGwpOw0KICAgICAgICAgICAgICAgIG4gKz0gIjwvdHI+Ig0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG4gKz0gIjwvdGJvZHk+IiwNCiAgICAgICAgICAgIG4NCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBwKG8pIHsNCiAgICAgICAgICAgIHZhciBlID0gQmUgKyAiLXdpZGdldC1jb250ZW50Ig0KICAgICAgICAgICAgICAsIHQgPSBSLnN0YXJ0LmdldE1vbnRoKCkNCiAgICAgICAgICAgICAgLCBhID0gYyhuZXcgRGF0ZSkNCiAgICAgICAgICAgICAgLCBuID0gIiINCiAgICAgICAgICAgICAgLCBsID0gWyJmYy1kYXkiLCAiZmMtIiArIGRlW28uZ2V0RGF5KCldLCBlXTsNCiAgICAgICAgICAgIHJldHVybiBvLmdldE1vbnRoKCkgIT0gdCAmJiBsLnB1c2goImZjLW90aGVyLW1vbnRoIiksDQogICAgICAgICAgICArbyA9PSArYSA/IGwucHVzaCgiZmMtdG9kYXkiLCBCZSArICItc3RhdGUtaGlnaGxpZ2h0IikgOiBvIDwgYSA/IGwucHVzaCgiZmMtcGFzdCIpIDogbC5wdXNoKCJmYy1mdXR1cmUiKSwNCiAgICAgICAgICAgIG4gKz0gIjx0ZCBjbGFzcz0nIiArIGwuam9pbigiICIpICsgIicgZGF0YS1kYXRlPSciICsgRWUobywgInl5eXktTU0tZGQiKSArICInPjxkaXY+IiwNCiAgICAgICAgICAgIExlICYmIChuICs9ICI8ZGl2IGNsYXNzPSdmYy1kYXktbnVtYmVyJz4iICsgby5nZXREYXRlKCkgKyAiPC9kaXY+IiksDQogICAgICAgICAgICBuICs9ICI8ZGl2IGNsYXNzPSdmYy1kYXktY29udGVudCc+PGRpdiBzdHlsZT0ncG9zaXRpb246cmVsYXRpdmUnPiZuYnNwOzwvZGl2PjwvZGl2PjwvZGl2PjwvdGQ+IiwNCiAgICAgICAgICAgIG4NCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiB1KGEpIHsNCiAgICAgICAgICAgIEZlID0gYTsNCiAgICAgICAgICAgIHZhciBvLCBsLCBpLCBlID0gRmUgLSBOLmhlaWdodCgpOw0KICAgICAgICAgICAgInZhcmlhYmxlIiA9PSBWZSgid2Vla01vZGUiKSA/IG8gPSBsID0gTWF0aC5mbG9vcihlIC8gKDEgPT0gT2UgPyAyIDogNikpIDogKG8gPSBNYXRoLmZsb29yKGUgLyBPZSksDQogICAgICAgICAgICBsID0gZSAtIG8gKiAoT2UgLSAxKSksDQogICAgICAgICAgICBNZS5lYWNoKGZ1bmN0aW9uKHQsIGUpIHsNCiAgICAgICAgICAgICAgICB0IDwgT2UgJiYgKGkgPSBTZShlKSwNCiAgICAgICAgICAgICAgICBpLmZpbmQoIj4gZGl2IikuY3NzKCJtaW4taGVpZ2h0IiwgKHQgPT0gT2UgLSAxID8gbCA6IG8pIC0gUyhpKSkpDQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGYodCkgew0KICAgICAgICAgICAgUmUgPSB0LA0KICAgICAgICAgICAgcWUuY2xlYXIoKSwNCiAgICAgICAgICAgIFllLmNsZWFyKCksDQogICAgICAgICAgICBXZSA9IDAsDQogICAgICAgICAgICBJZSAmJiAoV2UgPSBOLmZpbmQoInRoLmZjLXdlZWstbnVtYmVyIikub3V0ZXJXaWR0aCgpKSwNCiAgICAgICAgICAgIE5lID0gTWF0aC5mbG9vcigoUmUgLSBXZSkgLyBBZSksDQogICAgICAgICAgICBtKHEuc2xpY2UoMCwgLTEpLCBOZSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiB2KHQpIHsNCiAgICAgICAgICAgIHQuY2xpY2soeSkubW91c2Vkb3duKHllKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHkoYSkgew0KICAgICAgICAgICAgaWYgKCFWZSgic2VsZWN0YWJsZSIpKSB7DQogICAgICAgICAgICAgICAgdmFyIGUgPSBnKFNlKHRoaXMpLmRhdGEoImRhdGUiKSk7DQogICAgICAgICAgICAgICAgY2UoImRheUNsaWNrIiwgdGhpcywgZSwgITAsIGEpDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gYihvLCBlLCB0KSB7DQogICAgICAgICAgICB0ICYmIF9lLmJ1aWxkKCk7DQogICAgICAgICAgICBmb3IgKHZhciBhLCBsID0gRGUobywgZSksIHMgPSAwOyBzIDwgbC5sZW5ndGg7IHMrKykNCiAgICAgICAgICAgICAgICBhID0gbFtzXSwNCiAgICAgICAgICAgICAgICB2KEQoYS5yb3csIGEubGVmdENvbCwgYS5yb3csIGEucmlnaHRDb2wpKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIEQoZSwgdCwgYSwgbikgew0KICAgICAgICAgICAgdmFyIHMgPSBfZS5yZWN0KGUsIHQsIGEsIG4sIG8pOw0KICAgICAgICAgICAgcmV0dXJuIGZlKHMsIG8pDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gdyhyLCBlLCB0KSB7DQogICAgICAgICAgICB2YXIgYSA9IHdlKHIpDQogICAgICAgICAgICAgICwgbiA9IENlW2Eucm93ICogQWUgKyBhLmNvbF07DQogICAgICAgICAgICBjZSgiZGF5Q2xpY2siLCBuLCByLCBlLCB0KQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIEMoYSwgZSkgew0KICAgICAgICAgICAgUGUuc3RhcnQoZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgICAgIG1lKCksDQogICAgICAgICAgICAgICAgdCAmJiBEKHQucm93LCB0LmNvbCwgdC5yb3csIHQuY29sKQ0KICAgICAgICAgICAgfSwgZSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBFKHIsIGUsIHQpIHsNCiAgICAgICAgICAgIHZhciBhID0gUGUuc3RvcCgpOw0KICAgICAgICAgICAgaWYgKG1lKCksDQogICAgICAgICAgICBhKSB7DQogICAgICAgICAgICAgICAgdmFyIG4gPSBiZShhKTsNCiAgICAgICAgICAgICAgICBjZSgiZHJvcCIsIHIsIG4sICEwLCBlLCB0KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIE0odCkgew0KICAgICAgICAgICAgcmV0dXJuIHFlLmxlZnQodCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBUKHQpIHsNCiAgICAgICAgICAgIHJldHVybiBxZS5yaWdodCh0KQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHgodCkgew0KICAgICAgICAgICAgcmV0dXJuIFllLmxlZnQodCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBrKHQpIHsNCiAgICAgICAgICAgIHJldHVybiBZZS5yaWdodCh0KQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIEgodCkgew0KICAgICAgICAgICAgcmV0dXJuIHZlLmVxKHQpDQogICAgICAgIH0NCiAgICAgICAgdmFyIFIgPSB0aGlzOw0KICAgICAgICBSLnJlbmRlckJhc2ljID0gcywNCiAgICAgICAgUi5zZXRIZWlnaHQgPSB1LA0KICAgICAgICBSLnNldFdpZHRoID0gZiwNCiAgICAgICAgUi5yZW5kZXJEYXlPdmVybGF5ID0gYiwNCiAgICAgICAgUi5kZWZhdWx0U2VsZWN0aW9uRW5kID0gZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgcmV0dXJuIHplKHQpDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBSLnJlbmRlclNlbGVjdGlvbiA9IGZ1bmN0aW9uKGEsIGUpIHsNCiAgICAgICAgICAgIGIoYSwga2UoemUoZSksIDEpLCAhMCkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFIuY2xlYXJTZWxlY3Rpb24gPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIG1lKCkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFIucmVwb3J0RGF5Q2xpY2sgPSB3LA0KICAgICAgICBSLmRyYWdTdGFydCA9IEMsDQogICAgICAgIFIuZHJhZ1N0b3AgPSBFLA0KICAgICAgICBSLmRlZmF1bHRFdmVudEVuZCA9IGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgIHJldHVybiB6ZSh0LnN0YXJ0KQ0KICAgICAgICB9DQogICAgICAgICwNCiAgICAgICAgUi5nZXRIb3Zlckxpc3RlbmVyID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gUGUNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFIuY29sTGVmdCA9IE0sDQogICAgICAgIFIuY29sUmlnaHQgPSBULA0KICAgICAgICBSLmNvbENvbnRlbnRMZWZ0ID0geCwNCiAgICAgICAgUi5jb2xDb250ZW50UmlnaHQgPSBrLA0KICAgICAgICBSLmdldElzQ2VsbEFsbERheSA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuICEwDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBSLmFsbERheVJvdyA9IEgsDQogICAgICAgIFIuZ2V0Um93Q250ID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gT2UNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFIuZ2V0Q29sQ250ID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gQWUNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFIuZ2V0Q29sV2lkdGggPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiBOZQ0KICAgICAgICB9DQogICAgICAgICwNCiAgICAgICAgUi5nZXREYXlTZWdtZW50Q29udGFpbmVyID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gSGUNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIHN0LmNhbGwoUiwgbywgZSwgYSksDQogICAgICAgIGdlLmNhbGwoUiksDQogICAgICAgIGllLmNhbGwoUiksDQogICAgICAgIFAuY2FsbChSKTsNCiAgICAgICAgdmFyIHosIE4sIHEsIEosIHZlLCBDZSwgTWUsIFRlLCB4ZSwgSGUsIFJlLCBGZSwgTmUsIFdlLCBPZSwgQWUsIExlLCBfZSwgUGUsIHFlLCBZZSwgQmUsIGplLCBJZSwgWGUsIEplLCBWZSA9IFIub3B0LCBjZSA9IFIudHJpZ2dlciwgZmUgPSBSLnJlbmRlck92ZXJsYXksIG1lID0gUi5jbGVhck92ZXJsYXlzLCB5ZSA9IFIuZGF5U2VsZWN0aW9uTW91c2Vkb3duLCBiZSA9IFIuY2VsbFRvRGF0ZSwgd2UgPSBSLmRhdGVUb0NlbGwsIERlID0gUi5yYW5nZVRvU2VnbWVudHMsIEVlID0gZS5mb3JtYXREYXRlOw0KICAgICAgICBqKG8uYWRkQ2xhc3MoImZjLWdyaWQiKSksDQogICAgICAgIF9lID0gbmV3IGhlKGZ1bmN0aW9uKGEsIG4pIHsNCiAgICAgICAgICAgIHZhciBzLCBpLCBkOw0KICAgICAgICAgICAgcS5lYWNoKGZ1bmN0aW9uKGEsIGUpIHsNCiAgICAgICAgICAgICAgICBzID0gU2UoZSksDQogICAgICAgICAgICAgICAgaSA9IHMub2Zmc2V0KCkubGVmdCwNCiAgICAgICAgICAgICAgICBhICYmIChkWzFdID0gaSksDQogICAgICAgICAgICAgICAgZCA9IFtpXSwNCiAgICAgICAgICAgICAgICBuW2FdID0gZA0KICAgICAgICAgICAgfSksDQogICAgICAgICAgICBkWzFdID0gaSArIHMub3V0ZXJXaWR0aCgpLA0KICAgICAgICAgICAgdmUuZWFjaChmdW5jdGlvbih0LCBlKSB7DQogICAgICAgICAgICAgICAgdCA8IE9lICYmIChzID0gU2UoZSksDQogICAgICAgICAgICAgICAgaSA9IHMub2Zmc2V0KCkudG9wLA0KICAgICAgICAgICAgICAgIHQgJiYgKGRbMV0gPSBpKSwNCiAgICAgICAgICAgICAgICBkID0gW2ldLA0KICAgICAgICAgICAgICAgIGFbdF0gPSBkKQ0KICAgICAgICAgICAgfSksDQogICAgICAgICAgICBkWzFdID0gaSArIHMub3V0ZXJIZWlnaHQoKQ0KICAgICAgICB9DQogICAgICAgICksDQogICAgICAgIFBlID0gbmV3IHBlKF9lKSwNCiAgICAgICAgcWUgPSBuZXcgdWUoZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgcmV0dXJuIFRlLmVxKHQpDQogICAgICAgIH0NCiAgICAgICAgKSwNCiAgICAgICAgWWUgPSBuZXcgdWUoZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgcmV0dXJuIHhlLmVxKHQpDQogICAgICAgIH0NCiAgICAgICAgKQ0KICAgIH0NCiAgICBmdW5jdGlvbiBQKCkgew0KICAgICAgICB2YXIgcyA9IHRoaXM7DQogICAgICAgIHMucmVuZGVyRXZlbnRzID0gZnVuY3Rpb24oZSwgdCkgew0KICAgICAgICAgICAgcy5yZW5kZXJEYXlFdmVudHMoZSwgdCkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIHMuY2xlYXJFdmVudHMgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHMuZ2V0RGF5U2VnbWVudENvbnRhaW5lcigpLmVtcHR5KCkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIGFlLmNhbGwocykNCiAgICB9DQogICAgZnVuY3Rpb24gcShhLCBvLCBuKSB7DQogICAgICAgIGZ1bmN0aW9uIHModCkgew0KICAgICAgICAgICAgU3QgPSB0LA0KICAgICAgICAgICAgcigpLA0KICAgICAgICAgICAgSiA/IGgoKSA6IGcoKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHIoKSB7DQogICAgICAgICAgICBSdCA9IF90KCJ0aGVtZSIpID8gInVpIiA6ICJmYyIsDQogICAgICAgICAgICB6dCA9IF90KCJpc1JUTCIpLA0KICAgICAgICAgICAgRnQgPSBlKF90KCJtaW5UaW1lIikpLA0KICAgICAgICAgICAgTnQgPSBlKF90KCJtYXhUaW1lIikpLA0KICAgICAgICAgICAgV3QgPSBfdCgiY29sdW1uRm9ybWF0IiksDQogICAgICAgICAgICBPdCA9IF90KCJ3ZWVrTnVtYmVycyIpLA0KICAgICAgICAgICAgQXQgPSBfdCgid2Vla051bWJlclRpdGxlIiksDQogICAgICAgICAgICBMdCA9ICJpc28iID09IF90KCJ3ZWVrTnVtYmVyQ2FsY3VsYXRpb24iKSA/ICJXIiA6ICJ3IiwNCiAgICAgICAgICAgIHd0ID0gX3QoInNuYXBNaW51dGVzIikgfHwgX3QoInNsb3RNaW51dGVzIikNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBnKCkgew0KICAgICAgICAgICAgdmFyIGUsIHMsIGQsIGMsIHAsIHUgPSBSdCArICItd2lkZ2V0LWhlYWRlciIsIGcgPSBSdCArICItd2lkZ2V0LWNvbnRlbnQiLCBmID0gMCA9PSBfdCgic2xvdE1pbnV0ZXMiKSAlIDE1Ow0KICAgICAgICAgICAgZm9yIChoKCksDQogICAgICAgICAgICBvdCA9IFNlKCI8ZGl2IHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjI7bGVmdDowO3dpZHRoOjEwMCUnLz4iKS5hcHBlbmRUbyhhKSwNCiAgICAgICAgICAgIF90KCJhbGxEYXlTbG90IikgPyAobHQgPSBTZSgiPGRpdiBjbGFzcz0nZmMtZXZlbnQtY29udGFpbmVyJyBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDo4O3RvcDowO2xlZnQ6MCcvPiIpLmFwcGVuZFRvKG90KSwNCiAgICAgICAgICAgIGUgPSAiPHRhYmxlIHN0eWxlPSd3aWR0aDoxMDAlJyBjbGFzcz0nZmMtYWdlbmRhLWFsbGRheScgY2VsbHNwYWNpbmc9JzAnPjx0cj48dGggY2xhc3M9JyIgKyB1ICsgIiBmYy1hZ2VuZGEtYXhpcyc+IiArIF90KCJhbGxEYXlUZXh0IikgKyAiPC90aD48dGQ+PGRpdiBjbGFzcz0nZmMtZGF5LWNvbnRlbnQnPjxkaXYgc3R5bGU9J3Bvc2l0aW9uOnJlbGF0aXZlJy8+PC9kaXY+PC90ZD48dGggY2xhc3M9JyIgKyB1ICsgIiBmYy1hZ2VuZGEtZ3V0dGVyJz4mbmJzcDs8L3RoPjwvdHI+PC90YWJsZT4iLA0KICAgICAgICAgICAgaXQgPSBTZShlKS5hcHBlbmRUbyhvdCksDQogICAgICAgICAgICBkdCA9IGl0LmZpbmQoInRyIiksDQogICAgICAgICAgICBEKGR0LmZpbmQoInRkIikpLA0KICAgICAgICAgICAgb3QuYXBwZW5kKCI8ZGl2IGNsYXNzPSdmYy1hZ2VuZGEtZGl2aWRlciAiICsgdSArICInPjxkaXYgY2xhc3M9J2ZjLWFnZW5kYS1kaXZpZGVyLWlubmVyJy8+PC9kaXY+IikpIDogbHQgPSBTZShbXSksDQogICAgICAgICAgICBjdCA9IFNlKCI8ZGl2IHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxMDAlO292ZXJmbG93LXg6aGlkZGVuO292ZXJmbG93LXk6YXV0bycvPiIpLmFwcGVuZFRvKG90KSwNCiAgICAgICAgICAgIGd0ID0gU2UoIjxkaXYgc3R5bGU9J3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjEwMCU7b3ZlcmZsb3c6aGlkZGVuJy8+IikuYXBwZW5kVG8oY3QpLA0KICAgICAgICAgICAgaHQgPSBTZSgiPGRpdiBjbGFzcz0nZmMtZXZlbnQtY29udGFpbmVyJyBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDo4O3RvcDowO2xlZnQ6MCcvPiIpLmFwcGVuZFRvKGd0KSwNCiAgICAgICAgICAgIGUgPSAiPHRhYmxlIGNsYXNzPSdmYy1hZ2VuZGEtc2xvdHMnIHN0eWxlPSd3aWR0aDoxMDAlJyBjZWxsc3BhY2luZz0nMCc+PHRib2R5PiIsDQogICAgICAgICAgICBzID0gaSgpLA0KICAgICAgICAgICAgYyA9IEhlKHplKHMpLCBOdCksDQogICAgICAgICAgICBIZShzLCBGdCksDQogICAgICAgICAgICBNdCA9IDAsDQogICAgICAgICAgICBkID0gMDsgcyA8IGM7IGQrKykNCiAgICAgICAgICAgICAgICBwID0gcy5nZXRNaW51dGVzKCksDQogICAgICAgICAgICAgICAgZSArPSAiPHRyIGNsYXNzPSdmYy1zbG90IiArIGQgKyAiICIgKyAocCA/ICJmYy1taW5vciIgOiAiIikgKyAiJz48dGggY2xhc3M9J2ZjLWFnZW5kYS1heGlzICIgKyB1ICsgIic+IiArIChmICYmIHAgPyAiJm5ic3A7IiA6ICRlKHMsIF90KCJheGlzRm9ybWF0IikpKSArICI8L3RoPjx0ZCBjbGFzcz0nIiArIGcgKyAiJz48ZGl2IHN0eWxlPSdwb3NpdGlvbjpyZWxhdGl2ZSc+Jm5ic3A7PC9kaXY+PC90ZD48L3RyPiIsDQogICAgICAgICAgICAgICAgSGUocywgX3QoInNsb3RNaW51dGVzIikpLA0KICAgICAgICAgICAgICAgIE10Kys7DQogICAgICAgICAgICBlICs9ICI8L3Rib2R5PjwvdGFibGU+IiwNCiAgICAgICAgICAgIHB0ID0gU2UoZSkuYXBwZW5kVG8oZ3QpLA0KICAgICAgICAgICAgdyhwdC5maW5kKCJ0ZCIpKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGgoKSB7DQogICAgICAgICAgICB2YXIgZSA9IGwoKTsNCiAgICAgICAgICAgIEogJiYgSi5yZW1vdmUoKSwNCiAgICAgICAgICAgIEogPSBTZShlKS5hcHBlbmRUbyhhKSwNCiAgICAgICAgICAgIFYgPSBKLmZpbmQoInRoZWFkIiksDQogICAgICAgICAgICBVID0gVi5maW5kKCJ0aCIpLnNsaWNlKDEsIC0xKSwNCiAgICAgICAgICAgIEcgPSBKLmZpbmQoInRib2R5IiksDQogICAgICAgICAgICBaID0gRy5maW5kKCJ0ZCIpLnNsaWNlKDAsIC0xKSwNCiAgICAgICAgICAgIHZlID0gWi5maW5kKCI+IGRpdiIpLA0KICAgICAgICAgICAgQ2UgPSBaLmZpbmQoIi5mYy1kYXktY29udGVudCA+IGRpdiIpLA0KICAgICAgICAgICAgbnQgPSBaLmVxKDApLA0KICAgICAgICAgICAgcnQgPSB2ZS5lcSgwKSwNCiAgICAgICAgICAgIE8oVi5hZGQoVi5maW5kKCJ0ciIpKSksDQogICAgICAgICAgICBPKEcuYWRkKEcuZmluZCgidHIiKSkpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gbCgpIHsNCiAgICAgICAgICAgIHZhciB0ID0gIjx0YWJsZSBzdHlsZT0nd2lkdGg6MTAwJScgY2xhc3M9J2ZjLWFnZW5kYS1kYXlzIGZjLWJvcmRlci1zZXBhcmF0ZScgY2VsbHNwYWNpbmc9JzAnPiIgKyBwKCkgKyB1KCkgKyAiPC90YWJsZT4iOw0KICAgICAgICAgICAgcmV0dXJuIHQNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBwKCkgew0KICAgICAgICAgICAgdmFyIHIsIG8sIGwsIGkgPSBSdCArICItd2lkZ2V0LWhlYWRlciIsIG4gPSAiIjsNCiAgICAgICAgICAgIGZvciAobiArPSAiPHRoZWFkPjx0cj4iLA0KICAgICAgICAgICAgT3QgPyAociA9IFplKDAsIDApLA0KICAgICAgICAgICAgbyA9ICRlKHIsIEx0KSwNCiAgICAgICAgICAgIHp0ID8gbyArPSBBdCA6IG8gPSBBdCArIG8sDQogICAgICAgICAgICBuICs9ICI8dGggY2xhc3M9J2ZjLWFnZW5kYS1heGlzIGZjLXdlZWstbnVtYmVyICIgKyBpICsgIic+IiArIEYobykgKyAiPC90aD4iKSA6IG4gKz0gIjx0aCBjbGFzcz0nZmMtYWdlbmRhLWF4aXMgIiArIGkgKyAiJz4mbmJzcDs8L3RoPiIsDQogICAgICAgICAgICBsID0gMDsgbCA8IFN0OyBsKyspDQogICAgICAgICAgICAgICAgciA9IFplKDAsIGwpLA0KICAgICAgICAgICAgICAgIG4gKz0gIjx0aCBjbGFzcz0nZmMtIiArIGRlW3IuZ2V0RGF5KCldICsgIiBmYy1jb2wiICsgbCArICIgIiArIGkgKyAiJz4iICsgRigkZShyLCBXdCkpICsgIjwvdGg+IjsNCiAgICAgICAgICAgIHJldHVybiBuICs9ICI8dGggY2xhc3M9J2ZjLWFnZW5kYS1ndXR0ZXIgIiArIGkgKyAiJz4mbmJzcDs8L3RoPjwvdHI+PC90aGVhZD4iLA0KICAgICAgICAgICAgbg0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHUoKSB7DQogICAgICAgICAgICB2YXIgZCwgZywgaCwgcCwgdSwgZiA9IFJ0ICsgIi13aWRnZXQtaGVhZGVyIiwgciA9IFJ0ICsgIi13aWRnZXQtY29udGVudCIsIGkgPSBjKG5ldyBEYXRlKSwgbyA9ICIiOw0KICAgICAgICAgICAgZm9yIChvICs9ICI8dGJvZHk+PHRyPjx0aCBjbGFzcz0nZmMtYWdlbmRhLWF4aXMgIiArIGYgKyAiJz4mbmJzcDs8L3RoPiIsDQogICAgICAgICAgICBoID0gIiIsDQogICAgICAgICAgICBnID0gMDsgZyA8IFN0OyBnKyspDQogICAgICAgICAgICAgICAgZCA9IFplKDAsIGcpLA0KICAgICAgICAgICAgICAgIHUgPSBbImZjLWNvbCIgKyBnLCAiZmMtIiArIGRlW2QuZ2V0RGF5KCldLCByXSwNCiAgICAgICAgICAgICAgICArZCA9PSAraSA/IHUucHVzaChSdCArICItc3RhdGUtaGlnaGxpZ2h0IiwgImZjLXRvZGF5IikgOiBkIDwgaSA/IHUucHVzaCgiZmMtcGFzdCIpIDogdS5wdXNoKCJmYy1mdXR1cmUiKSwNCiAgICAgICAgICAgICAgICBwID0gIjx0ZCBjbGFzcz0nIiArIHUuam9pbigiICIpICsgIic+PGRpdj48ZGl2IGNsYXNzPSdmYy1kYXktY29udGVudCc+PGRpdiBzdHlsZT0ncG9zaXRpb246cmVsYXRpdmUnPiZuYnNwOzwvZGl2PjwvZGl2PjwvZGl2PjwvdGQ+IiwNCiAgICAgICAgICAgICAgICBoICs9IHA7DQogICAgICAgICAgICByZXR1cm4gbyArPSBoLA0KICAgICAgICAgICAgbyArPSAiPHRkIGNsYXNzPSdmYy1hZ2VuZGEtZ3V0dGVyICIgKyByICsgIic+Jm5ic3A7PC90ZD48L3RyPjwvdGJvZHk+IiwNCiAgICAgICAgICAgIG8NCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBmKHMpIHsNCiAgICAgICAgICAgIHZvaWQgMCA9PT0gcyAmJiAocyA9IHZ0KSwNCiAgICAgICAgICAgIHZ0ID0gcywNCiAgICAgICAgICAgIGV0ID0ge307DQogICAgICAgICAgICB2YXIgciA9IEcucG9zaXRpb24oKS50b3ANCiAgICAgICAgICAgICAgLCB0ID0gY3QucG9zaXRpb24oKS50b3ANCiAgICAgICAgICAgICAgLCBhID0gTWF0aC5taW4ocyAtIHIsIHB0LmhlaWdodCgpICsgdCArIDEpOw0KICAgICAgICAgICAgcnQuaGVpZ2h0KGEgLSBTKG50KSksDQogICAgICAgICAgICBvdC5jc3MoInRvcCIsIHIpLA0KICAgICAgICAgICAgY3QuaGVpZ2h0KGEgLSB0IC0gMSksDQogICAgICAgICAgICBEdCA9IHB0LmZpbmQoInRyOmZpcnN0IikuaGVpZ2h0KCkgKyAxLA0KICAgICAgICAgICAgQ3QgPSBfdCgic2xvdE1pbnV0ZXMiKSAvIHd0LA0KICAgICAgICAgICAgRXQgPSBEdCAvIEN0DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gdih0KSB7DQogICAgICAgICAgICBmdCA9IHQsDQogICAgICAgICAgICBrdC5jbGVhcigpLA0KICAgICAgICAgICAgSHQuY2xlYXIoKTsNCiAgICAgICAgICAgIHZhciBlID0gVi5maW5kKCJ0aDpmaXJzdCIpOw0KICAgICAgICAgICAgaXQgJiYgKGUgPSBlLmFkZChpdC5maW5kKCJ0aDpmaXJzdCIpKSksDQogICAgICAgICAgICBlID0gZS5hZGQocHQuZmluZCgidGg6Zmlyc3QiKSksDQogICAgICAgICAgICBtdCA9IDAsDQogICAgICAgICAgICBtKGUud2lkdGgoIiIpLmVhY2goZnVuY3Rpb24oYSwgZSkgew0KICAgICAgICAgICAgICAgIG10ID0gTWF0aC5tYXgobXQsIFNlKGUpLm91dGVyV2lkdGgoKSkNCiAgICAgICAgICAgIH0pLCBtdCk7DQogICAgICAgICAgICB2YXIgYSA9IEouZmluZCgiLmZjLWFnZW5kYS1ndXR0ZXIiKTsNCiAgICAgICAgICAgIGl0ICYmIChhID0gYS5hZGQoaXQuZmluZCgidGguZmMtYWdlbmRhLWd1dHRlciIpKSk7DQogICAgICAgICAgICB2YXIgbyA9IGN0WzBdLmNsaWVudFdpZHRoOw0KICAgICAgICAgICAgYnQgPSBjdC53aWR0aCgpIC0gbywNCiAgICAgICAgICAgIGJ0ID8gKG0oYSwgYnQpLA0KICAgICAgICAgICAgYS5zaG93KCkucHJldigpLnJlbW92ZUNsYXNzKCJmYy1sYXN0IikpIDogYS5oaWRlKCkucHJldigpLmFkZENsYXNzKCJmYy1sYXN0IiksDQogICAgICAgICAgICB5dCA9IE1hdGguZmxvb3IoKG8gLSBtdCkgLyBTdCksDQogICAgICAgICAgICBtKFUuc2xpY2UoMCwgLTEpLCB5dCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiB5KCkgew0KICAgICAgICAgICAgZnVuY3Rpb24gcygpIHsNCiAgICAgICAgICAgICAgICBjdC5zY3JvbGxUb3AoYSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBlID0gaSgpDQogICAgICAgICAgICAgICwgdCA9IHplKGUpOw0KICAgICAgICAgICAgdC5zZXRIb3VycyhfdCgiZmlyc3RIb3VyIikpOw0KICAgICAgICAgICAgdmFyIGEgPSBBKGUsIHQpICsgMTsNCiAgICAgICAgICAgIHMoKSwNCiAgICAgICAgICAgIHNldFRpbWVvdXQocywgMCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBEKHQpIHsNCiAgICAgICAgICAgIHQuY2xpY2soQykubW91c2Vkb3duKFVlKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHcodCkgew0KICAgICAgICAgICAgdC5jbGljayhDKS5tb3VzZWRvd24ocSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBDKHQpIHsNCiAgICAgICAgICAgIGlmICghX3QoInNlbGVjdGFibGUiKSkgew0KICAgICAgICAgICAgICAgIHZhciBlID0gTWF0aC5taW4oU3QgLSAxLCBNYXRoLmZsb29yKCh0LnBhZ2VYIC0gSi5vZmZzZXQoKS5sZWZ0IC0gbXQpIC8geXQpKQ0KICAgICAgICAgICAgICAgICAgLCBhID0gWmUoMCwgZSkNCiAgICAgICAgICAgICAgICAgICwgbiA9IHRoaXMucGFyZW50Tm9kZS5jbGFzc05hbWUubWF0Y2goL2ZjLXNsb3QoXGQrKS8pOw0KICAgICAgICAgICAgICAgIGlmIChuKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBzID0gcGFyc2VJbnQoblsxXSkgKiBfdCgic2xvdE1pbnV0ZXMiKQ0KICAgICAgICAgICAgICAgICAgICAgICwgciA9IE1hdGguZmxvb3IocyAvIDYwKTsNCiAgICAgICAgICAgICAgICAgICAgYS5zZXRIb3VycyhyKSwNCiAgICAgICAgICAgICAgICAgICAgYS5zZXRNaW51dGVzKHMgJSA2MCArIEZ0KSwNCiAgICAgICAgICAgICAgICAgICAgWWUoImRheUNsaWNrIiwgWltlXSwgYSwgITEsIHQpDQogICAgICAgICAgICAgICAgfSBlbHNlDQogICAgICAgICAgICAgICAgICAgIFllKCJkYXlDbGljayIsIFpbZV0sIGEsICEwLCB0KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIEUobywgZSwgdCkgew0KICAgICAgICAgICAgdCAmJiBUdC5idWlsZCgpOw0KICAgICAgICAgICAgZm9yICh2YXIgYSwgbCA9IFFlKG8sIGUpLCBzID0gMDsgcyA8IGwubGVuZ3RoOyBzKyspDQogICAgICAgICAgICAgICAgYSA9IGxbc10sDQogICAgICAgICAgICAgICAgRChNKGEucm93LCBhLmxlZnRDb2wsIGEucm93LCBhLnJpZ2h0Q29sKSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBNKHIsIGUsIHQsIGEpIHsNCiAgICAgICAgICAgIHZhciBuID0gVHQucmVjdChyLCBlLCB0LCBhLCBvdCk7DQogICAgICAgICAgICByZXR1cm4gQmUobiwgb3QpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gVChvLCBlKSB7DQogICAgICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IFN0OyB0KyspIHsNCiAgICAgICAgICAgICAgICB2YXIgaSA9IFplKDAsIHQpDQogICAgICAgICAgICAgICAgICAsIG4gPSBrZSh6ZShpKSwgMSkNCiAgICAgICAgICAgICAgICAgICwgcyA9IG5ldyBEYXRlKE1hdGgubWF4KGksIG8pKQ0KICAgICAgICAgICAgICAgICAgLCByID0gbmV3IERhdGUoTWF0aC5taW4obiwgZSkpOw0KICAgICAgICAgICAgICAgIGlmIChzIDwgcikgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IFR0LnJlY3QoMCwgdCwgMCwgdCwgZ3QpDQogICAgICAgICAgICAgICAgICAgICAgLCBkID0gQShpLCBzKQ0KICAgICAgICAgICAgICAgICAgICAgICwgYyA9IEEoaSwgcik7DQogICAgICAgICAgICAgICAgICAgIGwudG9wID0gZCwNCiAgICAgICAgICAgICAgICAgICAgbC5oZWlnaHQgPSBjIC0gZCwNCiAgICAgICAgICAgICAgICAgICAgdyhCZShsLCBndCkpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHgodCkgew0KICAgICAgICAgICAgcmV0dXJuIGt0LmxlZnQodCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBIKHQpIHsNCiAgICAgICAgICAgIHJldHVybiBIdC5sZWZ0KHQpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gUih0KSB7DQogICAgICAgICAgICByZXR1cm4ga3QucmlnaHQodCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiB6KHQpIHsNCiAgICAgICAgICAgIHJldHVybiBIdC5yaWdodCh0KQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIE4odCkgew0KICAgICAgICAgICAgcmV0dXJuIF90KCJhbGxEYXlTbG90IikgJiYgIXQucm93DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gVyhzKSB7DQogICAgICAgICAgICB2YXIgZSA9IFplKDAsIHMuY29sKQ0KICAgICAgICAgICAgICAsIHQgPSBzLnJvdzsNCiAgICAgICAgICAgIHJldHVybiBfdCgiYWxsRGF5U2xvdCIpICYmIHQtLSwNCiAgICAgICAgICAgIDAgPD0gdCAmJiBIZShlLCBGdCArIHQgKiB3dCksDQogICAgICAgICAgICBlDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gQShvLCBsKSB7DQogICAgICAgICAgICBpZiAobyA9IHplKG8sICEwKSwNCiAgICAgICAgICAgIGwgPCBIZSh6ZShvKSwgRnQpKQ0KICAgICAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICAgICAgaWYgKGwgPj0gSGUoemUobyksIE50KSkNCiAgICAgICAgICAgICAgICByZXR1cm4gcHQuaGVpZ2h0KCk7DQogICAgICAgICAgICB2YXIgdCA9IF90KCJzbG90TWludXRlcyIpDQogICAgICAgICAgICAgICwgYSA9IDYwICogbC5nZXRIb3VycygpICsgbC5nZXRNaW51dGVzKCkgLSBGdA0KICAgICAgICAgICAgICAsIG4gPSBNYXRoLmZsb29yKGEgLyB0KQ0KICAgICAgICAgICAgICAsIHMgPSBldFtuXTsNCiAgICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHMgJiYgKHMgPSBldFtuXSA9IHB0LmZpbmQoInRyIikuZXEobikuZmluZCgidGQgZGl2IilbMF0ub2Zmc2V0VG9wKSwNCiAgICAgICAgICAgIE1hdGgubWF4KDAsIE1hdGgucm91bmQocyAtIDEgKyBEdCAqIChhICUgdCAvIHQpKSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBMKCkgew0KICAgICAgICAgICAgcmV0dXJuIGR0DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gXyhhLCBlKSB7DQogICAgICAgICAgICB2YXIgdCA9IF90KCJzZWxlY3RIZWxwZXIiKTsNCiAgICAgICAgICAgIGlmIChUdC5idWlsZCgpLA0KICAgICAgICAgICAgdCkgew0KICAgICAgICAgICAgICAgIHZhciBuID0gS2UoYSkuY29sOw0KICAgICAgICAgICAgICAgIGlmICgwIDw9IG4gJiYgbiA8IFN0KSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBzID0gVHQucmVjdCgwLCBuLCAwLCBuLCBndCkNCiAgICAgICAgICAgICAgICAgICAgICAsIHIgPSBBKGEsIGEpDQogICAgICAgICAgICAgICAgICAgICAgLCBpID0gQShhLCBlKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiByKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocy50b3AgPSByLA0KICAgICAgICAgICAgICAgICAgICAgICAgcy5oZWlnaHQgPSBpIC0gciwNCiAgICAgICAgICAgICAgICAgICAgICAgIHMubGVmdCArPSAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgcy53aWR0aCAtPSA1LA0KICAgICAgICAgICAgICAgICAgICAgICAgU2UuaXNGdW5jdGlvbih0KSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdChhLCBlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvICYmIChzLnBvc2l0aW9uID0gImFic29sdXRlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dCA9IFNlKG8pLmNzcyhzKS5hcHBlbmRUbyhndCkpDQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmlzU3RhcnQgPSAhMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmlzRW5kID0gITAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXQgPSBTZShHZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBbImZjLXNlbGVjdC1oZWxwZXIiXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGFibGU6ICExDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgcykpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0LmNzcygib3BhY2l0eSIsIF90KCJkcmFnT3BhY2l0eSIpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHV0ICYmICh3KHV0KSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGd0LmFwcGVuZCh1dCksDQogICAgICAgICAgICAgICAgICAgICAgICBtKHV0LCBzLndpZHRoLCAhMCksDQogICAgICAgICAgICAgICAgICAgICAgICBiKHV0LCBzLmhlaWdodCwgITApKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlDQogICAgICAgICAgICAgICAgVChhLCBlKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIFAoKSB7DQogICAgICAgICAgICBWZSgpLA0KICAgICAgICAgICAgdXQgJiYgKHV0LnJlbW92ZSgpLA0KICAgICAgICAgICAgdXQgPSBudWxsKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHEoYSkgew0KICAgICAgICAgICAgaWYgKDEgPT0gYS53aGljaCAmJiBfdCgic2VsZWN0YWJsZSIpKSB7DQogICAgICAgICAgICAgICAgSmUoYSk7DQogICAgICAgICAgICAgICAgdmFyIHI7DQogICAgICAgICAgICAgICAgeHQuc3RhcnQoZnVuY3Rpb24odCwgZSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoUCgpLA0KICAgICAgICAgICAgICAgICAgICB0ICYmIHQuY29sID09IGUuY29sICYmICFOKHQpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IFcoZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgLCBuID0gVyh0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBbYSwgSGUoemUoYSksIHd0KSwgbiwgSGUoemUobiksIHd0KV0uc29ydChrKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIF8oclswXSwgclszXSkNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICByID0gbnVsbA0KICAgICAgICAgICAgICAgIH0sIGEpLA0KICAgICAgICAgICAgICAgIFNlKGRvY3VtZW50KS5vbmUoIm1vdXNldXAiLCBmdW5jdGlvbih0KSB7DQogICAgICAgICAgICAgICAgICAgIHh0LnN0b3AoKSwNCiAgICAgICAgICAgICAgICAgICAgciAmJiAoK3JbMF0gPT0gK3JbMV0gJiYgWShyWzBdLCAhMSwgdCksDQogICAgICAgICAgICAgICAgICAgIFhlKHJbMF0sIHJbM10sICExLCB0KSkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIFkocywgZSwgdCkgew0KICAgICAgICAgICAgWWUoImRheUNsaWNrIiwgWltLZShzKS5jb2xdLCBzLCBlLCB0KQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIEIoYSwgZSkgew0KICAgICAgICAgICAgeHQuc3RhcnQoZnVuY3Rpb24ocykgew0KICAgICAgICAgICAgICAgIGlmIChWZSgpLA0KICAgICAgICAgICAgICAgIHMpDQogICAgICAgICAgICAgICAgICAgIGlmIChOKHMpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgTShzLnJvdywgcy5jb2wsIHMucm93LCBzLmNvbCk7DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBXKHMpDQogICAgICAgICAgICAgICAgICAgICAgICAgICwgdCA9IEhlKHplKGUpLCBfdCgiZGVmYXVsdEV2ZW50TWludXRlcyIpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIFQoZSwgdCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwgZSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBJKHMsIGUsIHQpIHsNCiAgICAgICAgICAgIHZhciBhID0geHQuc3RvcCgpOw0KICAgICAgICAgICAgVmUoKSwNCiAgICAgICAgICAgIGEgJiYgWWUoImRyb3AiLCBzLCBXKGEpLCBOKGEpLCBlLCB0KQ0KICAgICAgICB9DQogICAgICAgIHZhciBYID0gdGhpczsNCiAgICAgICAgWC5yZW5kZXJBZ2VuZGEgPSBzLA0KICAgICAgICBYLnNldFdpZHRoID0gdiwNCiAgICAgICAgWC5zZXRIZWlnaHQgPSBmLA0KICAgICAgICBYLmFmdGVyUmVuZGVyID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB5KCkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFguZGVmYXVsdEV2ZW50RW5kID0gZnVuY3Rpb24oYSkgew0KICAgICAgICAgICAgdmFyIGUgPSB6ZShhLnN0YXJ0KTsNCiAgICAgICAgICAgIHJldHVybiBhLmFsbERheSA/IGUgOiBIZShlLCBfdCgiZGVmYXVsdEV2ZW50TWludXRlcyIpKQ0KICAgICAgICB9DQogICAgICAgICwNCiAgICAgICAgWC50aW1lUG9zaXRpb24gPSBBLA0KICAgICAgICBYLmdldElzQ2VsbEFsbERheSA9IE4sDQogICAgICAgIFguYWxsRGF5Um93ID0gTCwNCiAgICAgICAgWC5nZXRDb29yZGluYXRlR3JpZCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuIFR0DQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBYLmdldEhvdmVyTGlzdGVuZXIgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiB4dA0KICAgICAgICB9DQogICAgICAgICwNCiAgICAgICAgWC5jb2xMZWZ0ID0geCwNCiAgICAgICAgWC5jb2xSaWdodCA9IFIsDQogICAgICAgIFguY29sQ29udGVudExlZnQgPSBILA0KICAgICAgICBYLmNvbENvbnRlbnRSaWdodCA9IHosDQogICAgICAgIFguZ2V0RGF5U2VnbWVudENvbnRhaW5lciA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuIGx0DQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBYLmdldFNsb3RTZWdtZW50Q29udGFpbmVyID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gaHQNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFguZ2V0TWluTWludXRlID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gRnQNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFguZ2V0TWF4TWludXRlID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gTnQNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFguZ2V0U2xvdENvbnRhaW5lciA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuIGd0DQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBYLmdldFJvd0NudCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcmV0dXJuIDENCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFguZ2V0Q29sQ250ID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gU3QNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFguZ2V0Q29sV2lkdGggPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiB5dA0KICAgICAgICB9DQogICAgICAgICwNCiAgICAgICAgWC5nZXRTbmFwSGVpZ2h0ID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gRXQNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFguZ2V0U25hcE1pbnV0ZXMgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiB3dA0KICAgICAgICB9DQogICAgICAgICwNCiAgICAgICAgWC5kZWZhdWx0U2VsZWN0aW9uRW5kID0gZnVuY3Rpb24oYSwgZSkgew0KICAgICAgICAgICAgcmV0dXJuIGUgPyB6ZShhKSA6IEhlKHplKGEpLCBfdCgic2xvdE1pbnV0ZXMiKSkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFgucmVuZGVyRGF5T3ZlcmxheSA9IEUsDQogICAgICAgIFgucmVuZGVyU2VsZWN0aW9uID0gZnVuY3Rpb24ocywgZSwgdCkgew0KICAgICAgICAgICAgdCA/IF90KCJhbGxEYXlTbG90IikgJiYgRShzLCBrZSh6ZShlKSwgMSksICEwKSA6IF8ocywgZSkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIFguY2xlYXJTZWxlY3Rpb24gPSBQLA0KICAgICAgICBYLnJlcG9ydERheUNsaWNrID0gWSwNCiAgICAgICAgWC5kcmFnU3RhcnQgPSBCLA0KICAgICAgICBYLmRyYWdTdG9wID0gSSwNCiAgICAgICAgc3QuY2FsbChYLCBhLCBvLCBuKSwNCiAgICAgICAgZ2UuY2FsbChYKSwNCiAgICAgICAgaWUuY2FsbChYKSwNCiAgICAgICAgYXQuY2FsbChYKTsNCiAgICAgICAgdmFyIEosIFYsIFUsIEcsIFosIHZlLCBDZSwgbnQsIHJ0LCBvdCwgbHQsIGl0LCBkdCwgY3QsIGd0LCBodCwgcHQsIHV0LCBmdCwgdnQsIG10LCB5dCwgYnQsIER0LCB3dCwgQ3QsIEV0LCBTdCwgTXQsIFR0LCB4dCwga3QsIEh0LCBSdCwgenQsIEZ0LCBOdCwgV3QsIE90LCBBdCwgTHQsIF90ID0gWC5vcHQsIFllID0gWC50cmlnZ2VyLCBCZSA9IFgucmVuZGVyT3ZlcmxheSwgVmUgPSBYLmNsZWFyT3ZlcmxheXMsIFhlID0gWC5yZXBvcnRTZWxlY3Rpb24sIEplID0gWC51bnNlbGVjdCwgVWUgPSBYLmRheVNlbGVjdGlvbk1vdXNlZG93biwgR2UgPSBYLnNsb3RTZWdIdG1sLCBaZSA9IFguY2VsbFRvRGF0ZSwgS2UgPSBYLmRhdGVUb0NlbGwsIFFlID0gWC5yYW5nZVRvU2VnbWVudHMsICRlID0gby5mb3JtYXREYXRlLCBldCA9IHt9Ow0KICAgICAgICBqKGEuYWRkQ2xhc3MoImZjLWFnZW5kYSIpKSwNCiAgICAgICAgVHQgPSBuZXcgaGUoZnVuY3Rpb24oZSwgYSkgew0KICAgICAgICAgICAgZnVuY3Rpb24gdCh0KSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KGMsIE1hdGgubWluKGcsIHQpKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHMsIG4sIHI7DQogICAgICAgICAgICBVLmVhY2goZnVuY3Rpb24obywgZSkgew0KICAgICAgICAgICAgICAgIHMgPSBTZShlKSwNCiAgICAgICAgICAgICAgICBuID0gcy5vZmZzZXQoKS5sZWZ0LA0KICAgICAgICAgICAgICAgIG8gJiYgKHJbMV0gPSBuKSwNCiAgICAgICAgICAgICAgICByID0gW25dLA0KICAgICAgICAgICAgICAgIGFbb10gPSByDQogICAgICAgICAgICB9KSwNCiAgICAgICAgICAgIHJbMV0gPSBuICsgcy5vdXRlcldpZHRoKCksDQogICAgICAgICAgICBfdCgiYWxsRGF5U2xvdCIpICYmIChzID0gZHQsDQogICAgICAgICAgICBuID0gcy5vZmZzZXQoKS50b3AsDQogICAgICAgICAgICBlWzBdID0gW24sIG4gKyBzLm91dGVySGVpZ2h0KCldKTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSBndC5vZmZzZXQoKS50b3AsIGMgPSBjdC5vZmZzZXQoKS50b3AsIGcgPSBjICsgY3Qub3V0ZXJIZWlnaHQoKSwgaCA9IDA7IGggPCBNdCAqIEN0OyBoKyspDQogICAgICAgICAgICAgICAgZS5wdXNoKFt0KGkgKyBFdCAqIGgpLCB0KGkgKyBFdCAqIChoICsgMSkpXSkNCiAgICAgICAgfQ0KICAgICAgICApLA0KICAgICAgICB4dCA9IG5ldyBwZShUdCksDQogICAgICAgIGt0ID0gbmV3IHVlKGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgIHJldHVybiB2ZS5lcSh0KQ0KICAgICAgICB9DQogICAgICAgICksDQogICAgICAgIEh0ID0gbmV3IHVlKGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgIHJldHVybiBDZS5lcSh0KQ0KICAgICAgICB9DQogICAgICAgICkNCiAgICB9DQogICAgZnVuY3Rpb24gYXQoKSB7DQogICAgICAgIGZ1bmN0aW9uIGkocykgew0KICAgICAgICAgICAgdmFyIGUsIGksIGQsIGMsIGgsIHkgPSBSKCksIHAgPSBNKCksIHUgPSBFKCksIGYgPSBTZS5tYXAocywgbiksIHYgPSBbXTsNCiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB5OyBpKyspDQogICAgICAgICAgICAgICAgZm9yIChlID0gVCgwLCBpKSwNCiAgICAgICAgICAgICAgICBIZShlLCBwKSwNCiAgICAgICAgICAgICAgICBoID0gYShzLCBmLCBlLCBIZSh6ZShlKSwgdSAtIHApKSwNCiAgICAgICAgICAgICAgICBoID0gWShoKSwNCiAgICAgICAgICAgICAgICBkID0gMDsgZCA8IGgubGVuZ3RoOyBkKyspDQogICAgICAgICAgICAgICAgICAgIGMgPSBoW2RdLA0KICAgICAgICAgICAgICAgICAgICBjLmNvbCA9IGksDQogICAgICAgICAgICAgICAgICAgIHYucHVzaChjKTsNCiAgICAgICAgICAgIHJldHVybiB2DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gYShpLCBlLCB0LCBhKSB7DQogICAgICAgICAgICB2YXIgbiwgaCwgdiwgbSwgeSwgYiwgRCwgdywgQyA9IFtdLCB1ID0gaS5sZW5ndGg7DQogICAgICAgICAgICBmb3IgKG4gPSAwOyBuIDwgdTsgbisrKQ0KICAgICAgICAgICAgICAgIGggPSBpW25dLA0KICAgICAgICAgICAgICAgIHYgPSBoLnN0YXJ0LA0KICAgICAgICAgICAgICAgIG0gPSBlW25dLA0KICAgICAgICAgICAgICAgIG0gPiB0ICYmIHYgPCBhICYmICh2IDwgdCA/ICh5ID0gemUodCksDQogICAgICAgICAgICAgICAgRCA9ICExKSA6ICh5ID0gdiwNCiAgICAgICAgICAgICAgICBEID0gITApLA0KICAgICAgICAgICAgICAgIG0gPiBhID8gKGIgPSB6ZShhKSwNCiAgICAgICAgICAgICAgICB3ID0gITEpIDogKGIgPSBtLA0KICAgICAgICAgICAgICAgIHcgPSAhMCksDQogICAgICAgICAgICAgICAgQy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGgsDQogICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB5LA0KICAgICAgICAgICAgICAgICAgICBlbmQ6IGIsDQogICAgICAgICAgICAgICAgICAgIGlzU3RhcnQ6IEQsDQogICAgICAgICAgICAgICAgICAgIGlzRW5kOiB3DQogICAgICAgICAgICAgICAgfSkpOw0KICAgICAgICAgICAgcmV0dXJuIEMuc29ydChLKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIG4odCkgew0KICAgICAgICAgICAgcmV0dXJuIHQuZW5kID8gemUodC5lbmQpIDogSGUoemUodC5zdGFydCksIE4oImRlZmF1bHRFdmVudE1pbnV0ZXMiKSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBlKHQsIGUpIHsNCiAgICAgICAgICAgIHZhciBhLCBuLCBpLCBkLCBNLCBGLCBXLCBPLCBBLCBMLCBfLCBxLCBZLCBCLCBqLCBJLCBYID0gdC5sZW5ndGgsIFQgPSAiIiwgSiA9IHgoKSwgViA9IE4oImlzUlRMIik7DQogICAgICAgICAgICBmb3IgKGEgPSAwOyBhIDwgWDsgYSsrKQ0KICAgICAgICAgICAgICAgIG4gPSB0W2FdLA0KICAgICAgICAgICAgICAgIGkgPSBuLmV2ZW50LA0KICAgICAgICAgICAgICAgIGQgPSBrKG4uc3RhcnQsIG4uc3RhcnQpLA0KICAgICAgICAgICAgICAgIE0gPSBrKG4uc3RhcnQsIG4uZW5kKSwNCiAgICAgICAgICAgICAgICBGID0gSChuLmNvbCksDQogICAgICAgICAgICAgICAgVyA9IHoobi5jb2wpLA0KICAgICAgICAgICAgICAgIE8gPSBXIC0gRiwNCiAgICAgICAgICAgICAgICBXIC09IC4wMjUgKiBPLA0KICAgICAgICAgICAgICAgIE8gPSBXIC0gRiwNCiAgICAgICAgICAgICAgICBBID0gTyAqIChuLmZvcndhcmRDb29yZCAtIG4uYmFja3dhcmRDb29yZCksDQogICAgICAgICAgICAgICAgTigic2xvdEV2ZW50T3ZlcmxhcCIpICYmIChBID0gTWF0aC5tYXgoMiAqIChBIC0gMTApLCBBKSksDQogICAgICAgICAgICAgICAgViA/IChfID0gVyAtIG4uYmFja3dhcmRDb29yZCAqIE8sDQogICAgICAgICAgICAgICAgTCA9IF8gLSBBKSA6IChMID0gRiArIG4uYmFja3dhcmRDb29yZCAqIE8sDQogICAgICAgICAgICAgICAgXyA9IEwgKyBBKSwNCiAgICAgICAgICAgICAgICBMID0gTWF0aC5tYXgoTCwgRiksDQogICAgICAgICAgICAgICAgXyA9IE1hdGgubWluKF8sIFcpLA0KICAgICAgICAgICAgICAgIEEgPSBfIC0gTCwNCiAgICAgICAgICAgICAgICBuLnRvcCA9IGQsDQogICAgICAgICAgICAgICAgbi5sZWZ0ID0gTCwNCiAgICAgICAgICAgICAgICBuLm91dGVyV2lkdGggPSBBLA0KICAgICAgICAgICAgICAgIG4ub3V0ZXJIZWlnaHQgPSBNIC0gZCwNCiAgICAgICAgICAgICAgICBUICs9IEMoaSwgbik7DQogICAgICAgICAgICBmb3IgKEpbMF0uaW5uZXJIVE1MID0gVCwNCiAgICAgICAgICAgIHEgPSBKLmNoaWxkcmVuKCksDQogICAgICAgICAgICBhID0gMDsgYSA8IFg7IGErKykNCiAgICAgICAgICAgICAgICBuID0gdFthXSwNCiAgICAgICAgICAgICAgICBpID0gbi5ldmVudCwNCiAgICAgICAgICAgICAgICBZID0gU2UocVthXSksDQogICAgICAgICAgICAgICAgQiA9IHUoImV2ZW50UmVuZGVyIiwgaSwgaSwgWSksDQogICAgICAgICAgICAgICAgITEgPT09IEIgPyBZLnJlbW92ZSgpIDogKEIgJiYgITAgIT09IEIgJiYgKFkucmVtb3ZlKCksDQogICAgICAgICAgICAgICAgWSA9IFNlKEIpLmNzcyh7DQogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAiYWJzb2x1dGUiLA0KICAgICAgICAgICAgICAgICAgICB0b3A6IG4udG9wLA0KICAgICAgICAgICAgICAgICAgICBsZWZ0OiBuLmxlZnQNCiAgICAgICAgICAgICAgICB9KS5hcHBlbmRUbyhKKSksDQogICAgICAgICAgICAgICAgbi5lbGVtZW50ID0gWSwNCiAgICAgICAgICAgICAgICBpLl9pZCA9PT0gZSA/IGwoaSwgWSwgbikgOiBZWzBdLl9mY2kgPSBhLA0KICAgICAgICAgICAgICAgIFAoaSwgWSkpOw0KICAgICAgICAgICAgZm9yICh2KEosIHQsIGwpLA0KICAgICAgICAgICAgYSA9IDA7IGEgPCBYOyBhKyspDQogICAgICAgICAgICAgICAgbiA9IHRbYV0sDQogICAgICAgICAgICAgICAgKFkgPSBuLmVsZW1lbnQpICYmIChuLnZzaWRlcyA9IFMoWSwgITApLA0KICAgICAgICAgICAgICAgIG4uaHNpZGVzID0gRChZLCAhMCksDQogICAgICAgICAgICAgICAgaiA9IFkuZmluZCgiLmZjLWV2ZW50LXRpdGxlIiksDQogICAgICAgICAgICAgICAgai5sZW5ndGggJiYgKG4uY29udGVudFRvcCA9IGpbMF0ub2Zmc2V0VG9wKSk7DQogICAgICAgICAgICBmb3IgKGEgPSAwOyBhIDwgWDsgYSsrKQ0KICAgICAgICAgICAgICAgIG4gPSB0W2FdLA0KICAgICAgICAgICAgICAgIChZID0gbi5lbGVtZW50KSAmJiAoWVswXS5zdHlsZS53aWR0aCA9IE1hdGgubWF4KDAsIG4ub3V0ZXJXaWR0aCAtIG4uaHNpZGVzKSArICJweCIsDQogICAgICAgICAgICAgICAgSSA9IE1hdGgubWF4KDAsIG4ub3V0ZXJIZWlnaHQgLSBuLnZzaWRlcyksDQogICAgICAgICAgICAgICAgWVswXS5zdHlsZS5oZWlnaHQgPSBJICsgInB4IiwNCiAgICAgICAgICAgICAgICBpID0gbi5ldmVudCwNCiAgICAgICAgICAgICAgICB2b2lkIDAgIT09IG4uY29udGVudFRvcCAmJiAxMCA+IEkgLSBuLmNvbnRlbnRUb3AgJiYgKFkuZmluZCgiZGl2LmZjLWV2ZW50LXRpbWUiKS50ZXh0KEcoaS5zdGFydCwgTigidGltZUZvcm1hdCIpKSArICIgLSAiICsgaS50aXRsZSksDQogICAgICAgICAgICAgICAgWS5maW5kKCJkaXYuZmMtZXZlbnQtdGl0bGUiKS5yZW1vdmUoKSksDQogICAgICAgICAgICAgICAgdSgiZXZlbnRBZnRlclJlbmRlciIsIGksIGksIFkpKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIEModCwgZSkgew0KICAgICAgICAgICAgdmFyIGEgPSAiPCINCiAgICAgICAgICAgICAgLCBvID0gdC51cmwNCiAgICAgICAgICAgICAgLCBzID0gVyh0LCBOKQ0KICAgICAgICAgICAgICAsIHIgPSBbImZjLWV2ZW50IiwgImZjLWV2ZW50LXZlcnQiXTsNCiAgICAgICAgICAgIHJldHVybiBkKHQpICYmIHIucHVzaCgiZmMtZXZlbnQtZHJhZ2dhYmxlIiksDQogICAgICAgICAgICBlLmlzU3RhcnQgJiYgci5wdXNoKCJmYy1ldmVudC1zdGFydCIpLA0KICAgICAgICAgICAgZS5pc0VuZCAmJiByLnB1c2goImZjLWV2ZW50LWVuZCIpLA0KICAgICAgICAgICAgciA9IHIuY29uY2F0KHQuY2xhc3NOYW1lKSwNCiAgICAgICAgICAgIHQuc291cmNlICYmIChyID0gci5jb25jYXQodC5zb3VyY2UuY2xhc3NOYW1lIHx8IFtdKSksDQogICAgICAgICAgICBhICs9IG8gPyAiYSBocmVmPSciICsgRih0LnVybCkgKyAiJyIgOiAiZGl2IiwNCiAgICAgICAgICAgIGEgKz0gIiBjbGFzcz0nIiArIHIuam9pbigiICIpICsgIicgc3R5bGU9J3Bvc2l0aW9uOmFic29sdXRlO3RvcDoiICsgZS50b3AgKyAicHg7bGVmdDoiICsgZS5sZWZ0ICsgInB4OyIgKyBzICsgIic+PGRpdiBjbGFzcz0nZmMtZXZlbnQtaW5uZXInPjxkaXYgY2xhc3M9J2ZjLWV2ZW50LXRpbWUnPiIgKyBGKFoodC5zdGFydCwgdC5lbmQsIE4oInRpbWVGb3JtYXQiKSkpICsgIjwvZGl2PjxkaXYgY2xhc3M9J2ZjLWV2ZW50LXRpdGxlJz4iICsgRih0LnRpdGxlIHx8ICIiKSArICI8L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSdmYy1ldmVudC1iZyc+PC9kaXY+IiwNCiAgICAgICAgICAgIGUuaXNFbmQgJiYgYyh0KSAmJiAoYSArPSAiPGRpdiBjbGFzcz0ndWktcmVzaXphYmxlLWhhbmRsZSB1aS1yZXNpemFibGUtcyc+PTwvZGl2PiIpLA0KICAgICAgICAgICAgYSArPSAiPC8iICsgKG8gPyAiYSIgOiAiZGl2IikgKyAiPiIsDQogICAgICAgICAgICBhDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gbChvLCBlLCB0KSB7DQogICAgICAgICAgICB2YXIgYSA9IGUuZmluZCgiZGl2LmZjLWV2ZW50LXRpbWUiKTsNCiAgICAgICAgICAgIGQobykgJiYgcyhvLCBlLCBhKSwNCiAgICAgICAgICAgIHQuaXNFbmQgJiYgYyhvKSAmJiByKG8sIGUsIGEpLA0KICAgICAgICAgICAgZyhvLCBlKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHMoYywgZiwgZSkgew0KICAgICAgICAgICAgZnVuY3Rpb24gYSgpIHsNCiAgICAgICAgICAgICAgICBKKCksDQogICAgICAgICAgICAgICAgQyAmJiAoeiA/IChlLmhpZGUoKSwNCiAgICAgICAgICAgICAgICBmLmRyYWdnYWJsZSgib3B0aW9uIiwgImdyaWQiLCBudWxsKSwNCiAgICAgICAgICAgICAgICBYKGtlKHplKGMuc3RhcnQpLCBQKSwga2UoeShjKSwgUCkpKSA6ICh0KFkpLA0KICAgICAgICAgICAgICAgIGUuY3NzKCJkaXNwbGF5IiwgIiIpLA0KICAgICAgICAgICAgICAgIGYuZHJhZ2dhYmxlKCJvcHRpb24iLCAiZ3JpZCIsIFtTLCBNXSkpKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZnVuY3Rpb24gdCh0KSB7DQogICAgICAgICAgICAgICAgdmFyIGEsIG4gPSBIZSh6ZShjLnN0YXJ0KSwgdCk7DQogICAgICAgICAgICAgICAgYy5lbmQgJiYgKGEgPSBIZSh6ZShjLmVuZCksIHQpKSwNCiAgICAgICAgICAgICAgICBlLnRleHQoWihuLCBhLCBOKCJ0aW1lRm9ybWF0IikpKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHMsIHYsIEMsIEgsIHosIEYsIFcsIF8sIFAsIFksIEksIFYgPSBvLmdldENvb3JkaW5hdGVHcmlkKCksIG4gPSBSKCksIFMgPSBPKCksIE0gPSBBKCksIHggPSBMKCk7DQogICAgICAgICAgICBmLmRyYWdnYWJsZSh7DQogICAgICAgICAgICAgICAgc2Nyb2xsOiAhMSwNCiAgICAgICAgICAgICAgICBncmlkOiBbUywgTV0sDQogICAgICAgICAgICAgICAgYXhpczogMSA9PSBuICYmICJ5IiwNCiAgICAgICAgICAgICAgICBvcGFjaXR5OiBOKCJkcmFnT3BhY2l0eSIpLA0KICAgICAgICAgICAgICAgIHJldmVydER1cmF0aW9uOiBOKCJkcmFnUmV2ZXJ0RHVyYXRpb24iKSwNCiAgICAgICAgICAgICAgICBzdGFydDogZnVuY3Rpb24oZSwgdCkgew0KICAgICAgICAgICAgICAgICAgICB1KCJldmVudERyYWdTdGFydCIsIGYsIGMsIGUsIHQpLA0KICAgICAgICAgICAgICAgICAgICBCKGMsIGYpLA0KICAgICAgICAgICAgICAgICAgICBWLmJ1aWxkKCksDQogICAgICAgICAgICAgICAgICAgIHMgPSBmLnBvc2l0aW9uKCksDQogICAgICAgICAgICAgICAgICAgIHYgPSBWLmNlbGwoZS5wYWdlWCwgZS5wYWdlWSksDQogICAgICAgICAgICAgICAgICAgIEMgPSBIID0gITAsDQogICAgICAgICAgICAgICAgICAgIHogPSBGID0gbSh2KSwNCiAgICAgICAgICAgICAgICAgICAgVyA9IF8gPSAwLA0KICAgICAgICAgICAgICAgICAgICBQID0gMCwNCiAgICAgICAgICAgICAgICAgICAgWSA9IEkgPSAwDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBkcmFnOiBmdW5jdGlvbihsLCBlKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gVi5jZWxsKGwucGFnZVgsIGwucGFnZVkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoQyA9ICEhdCwNCiAgICAgICAgICAgICAgICAgICAgQykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHogPSBtKHQpLA0KICAgICAgICAgICAgICAgICAgICAgICAgVyA9IE1hdGgucm91bmQoKGUucG9zaXRpb24ubGVmdCAtIHMubGVmdCkgLyBTKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFcgIT0gXykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gVCgwLCB2LmNvbCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgciA9IHYuY29sICsgVzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gTWF0aC5tYXgoMCwgciksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IE1hdGgubWluKG4gLSAxLCByKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IFQoMCwgcik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgUCA9IGgoZCwgaSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHogfHwgKFkgPSBNYXRoLnJvdW5kKChlLnBvc2l0aW9uLnRvcCAtIHMudG9wKSAvIE0pICogeCkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAoQyAhPSBIIHx8IHogIT0gRiB8fCBXICE9IF8gfHwgWSAhPSBJKSAmJiAoYSgpLA0KICAgICAgICAgICAgICAgICAgICBIID0gQywNCiAgICAgICAgICAgICAgICAgICAgRiA9IHosDQogICAgICAgICAgICAgICAgICAgIF8gPSBXLA0KICAgICAgICAgICAgICAgICAgICBJID0gWSksDQogICAgICAgICAgICAgICAgICAgIGYuZHJhZ2dhYmxlKCJvcHRpb24iLCAicmV2ZXJ0IiwgIUMpDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBzdG9wOiBmdW5jdGlvbihlLCB0KSB7DQogICAgICAgICAgICAgICAgICAgIEooKSwNCiAgICAgICAgICAgICAgICAgICAgdSgiZXZlbnREcmFnU3RvcCIsIGYsIGMsIGUsIHQpLA0KICAgICAgICAgICAgICAgICAgICBDICYmICh6IHx8IFAgfHwgWSkgPyBqKHRoaXMsIGMsIFAsIHogPyAwIDogWSwgeiwgZSwgdCkgOiAoQyA9ICEwLA0KICAgICAgICAgICAgICAgICAgICB6ID0gITEsDQogICAgICAgICAgICAgICAgICAgIFcgPSAwLA0KICAgICAgICAgICAgICAgICAgICBQID0gMCwNCiAgICAgICAgICAgICAgICAgICAgWSA9IDAsDQogICAgICAgICAgICAgICAgICAgIGEoKSwNCiAgICAgICAgICAgICAgICAgICAgZi5jc3MoImZpbHRlciIsICIiKSwNCiAgICAgICAgICAgICAgICAgICAgZi5jc3MocyksDQogICAgICAgICAgICAgICAgICAgIHEoYywgZikpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiByKGMsIGUsIGEpIHsNCiAgICAgICAgICAgIHZhciBnLCBoLCBuID0gQSgpLCBpID0gTCgpOw0KICAgICAgICAgICAgZS5yZXNpemFibGUoew0KICAgICAgICAgICAgICAgIGhhbmRsZXM6IHsNCiAgICAgICAgICAgICAgICAgICAgczogIi51aS1yZXNpemFibGUtaGFuZGxlIg0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgZ3JpZDogbiwNCiAgICAgICAgICAgICAgICBzdGFydDogZnVuY3Rpb24oYSwgdCkgew0KICAgICAgICAgICAgICAgICAgICBnID0gaCA9IDAsDQogICAgICAgICAgICAgICAgICAgIEIoYywgZSksDQogICAgICAgICAgICAgICAgICAgIHUoImV2ZW50UmVzaXplU3RhcnQiLCB0aGlzLCBjLCBhLCB0KQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbihzLCByKSB7DQogICAgICAgICAgICAgICAgICAgIGcgPSBNYXRoLnJvdW5kKChNYXRoLm1heChuLCBlLmhlaWdodCgpKSAtIHIub3JpZ2luYWxTaXplLmhlaWdodCkgLyBuKSwNCiAgICAgICAgICAgICAgICAgICAgZyAhPSBoICYmIChhLnRleHQoWihjLnN0YXJ0LCBnIHx8IGMuZW5kID8gSGUodChjKSwgaSAqIGcpIDogbnVsbCwgTigidGltZUZvcm1hdCIpKSksDQogICAgICAgICAgICAgICAgICAgIGggPSBnKQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24oYSwgdCkgew0KICAgICAgICAgICAgICAgICAgICB1KCJldmVudFJlc2l6ZVN0b3AiLCB0aGlzLCBjLCBhLCB0KSwNCiAgICAgICAgICAgICAgICAgICAgZyA/IEkodGhpcywgYywgMCwgaSAqIGcsIGEsIHQpIDogcShjLCBlKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgICAgdmFyIG8gPSB0aGlzOw0KICAgICAgICBvLnJlbmRlckV2ZW50cyA9IGZ1bmN0aW9uKHQsIGEpIHsNCiAgICAgICAgICAgIHZhciBuLCByID0gdC5sZW5ndGgsIG8gPSBbXSwgbCA9IFtdOw0KICAgICAgICAgICAgZm9yIChuID0gMDsgbiA8IHI7IG4rKykNCiAgICAgICAgICAgICAgICB0W25dLmFsbERheSA/IG8ucHVzaCh0W25dKSA6IGwucHVzaCh0W25dKTsNCiAgICAgICAgICAgIE4oImFsbERheVNsb3QiKSAmJiAoVihvLCBhKSwNCiAgICAgICAgICAgIHAoKSksDQogICAgICAgICAgICBlKGkobCksIGEpDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBvLmNsZWFyRXZlbnRzID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICBmKCkuZW1wdHkoKSwNCiAgICAgICAgICAgIHgoKS5lbXB0eSgpDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBvLnNsb3RTZWdIdG1sID0gQywNCiAgICAgICAgYWUuY2FsbChvKTsNCiAgICAgICAgdmFyIE4gPSBvLm9wdA0KICAgICAgICAgICwgdSA9IG8udHJpZ2dlcg0KICAgICAgICAgICwgZCA9IG8uaXNFdmVudERyYWdnYWJsZQ0KICAgICAgICAgICwgYyA9IG8uaXNFdmVudFJlc2l6YWJsZQ0KICAgICAgICAgICwgdCA9IG8uZXZlbnRFbmQNCiAgICAgICAgICAsIGcgPSBvLmV2ZW50RWxlbWVudEhhbmRsZXJzDQogICAgICAgICAgLCBwID0gby5zZXRIZWlnaHQNCiAgICAgICAgICAsIGYgPSBvLmdldERheVNlZ21lbnRDb250YWluZXINCiAgICAgICAgICAsIHggPSBvLmdldFNsb3RTZWdtZW50Q29udGFpbmVyDQogICAgICAgICAgLCB3ID0gby5nZXRIb3Zlckxpc3RlbmVyDQogICAgICAgICAgLCBFID0gby5nZXRNYXhNaW51dGUNCiAgICAgICAgICAsIE0gPSBvLmdldE1pbk1pbnV0ZQ0KICAgICAgICAgICwgayA9IG8udGltZVBvc2l0aW9uDQogICAgICAgICAgLCBtID0gby5nZXRJc0NlbGxBbGxEYXkNCiAgICAgICAgICAsIEggPSBvLmNvbENvbnRlbnRMZWZ0DQogICAgICAgICAgLCB6ID0gby5jb2xDb250ZW50UmlnaHQNCiAgICAgICAgICAsIFQgPSBvLmNlbGxUb0RhdGUNCiAgICAgICAgICAsIFIgPSBvLmdldENvbENudA0KICAgICAgICAgICwgTyA9IG8uZ2V0Q29sV2lkdGgNCiAgICAgICAgICAsIEEgPSBvLmdldFNuYXBIZWlnaHQNCiAgICAgICAgICAsIEwgPSBvLmdldFNuYXBNaW51dGVzDQogICAgICAgICAgLCBfID0gby5nZXRTbG90Q29udGFpbmVyDQogICAgICAgICAgLCBQID0gby5yZXBvcnRFdmVudEVsZW1lbnQNCiAgICAgICAgICAsIHEgPSBvLnNob3dFdmVudHMNCiAgICAgICAgICAsIEIgPSBvLmhpZGVFdmVudHMNCiAgICAgICAgICAsIGogPSBvLmV2ZW50RHJvcA0KICAgICAgICAgICwgSSA9IG8uZXZlbnRSZXNpemUNCiAgICAgICAgICAsIFggPSBvLnJlbmRlckRheU92ZXJsYXkNCiAgICAgICAgICAsIEogPSBvLmNsZWFyT3ZlcmxheXMNCiAgICAgICAgICAsIFYgPSBvLnJlbmRlckRheUV2ZW50cw0KICAgICAgICAgICwgVSA9IG8uY2FsZW5kYXINCiAgICAgICAgICAsIEcgPSBVLmZvcm1hdERhdGUNCiAgICAgICAgICAsIFogPSBVLmZvcm1hdERhdGVzOw0KICAgICAgICBvLmRyYWdnYWJsZURheUV2ZW50ID0gZnVuY3Rpb24obywgZSwgdCkgew0KICAgICAgICAgICAgZnVuY3Rpb24gYSgpIHsNCiAgICAgICAgICAgICAgICBkIHx8IChlLndpZHRoKHMpLmhlaWdodCgiIikuZHJhZ2dhYmxlKCJvcHRpb24iLCAiZ3JpZCIsIG51bGwpLA0KICAgICAgICAgICAgICAgIGQgPSAhMCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBzLCBELCBDLCBFID0gdC5pc1N0YXJ0LCBkID0gITAsIHYgPSB3KCksIFMgPSBPKCksIHAgPSBBKCksIGYgPSBMKCksIGcgPSBNKCk7DQogICAgICAgICAgICBlLmRyYWdnYWJsZSh7DQogICAgICAgICAgICAgICAgb3BhY2l0eTogTigiZHJhZ09wYWNpdHkiLCAibW9udGgiKSwNCiAgICAgICAgICAgICAgICByZXZlcnREdXJhdGlvbjogTigiZHJhZ1JldmVydER1cmF0aW9uIiksDQogICAgICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKHQsIG4pIHsNCiAgICAgICAgICAgICAgICAgICAgdSgiZXZlbnREcmFnU3RhcnQiLCBlLCBvLCB0LCBuKSwNCiAgICAgICAgICAgICAgICAgICAgQihvLCBlKSwNCiAgICAgICAgICAgICAgICAgICAgcyA9IGUud2lkdGgoKSwNCiAgICAgICAgICAgICAgICAgICAgdi5zdGFydChmdW5jdGlvbih0LCBzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoSigpLA0KICAgICAgICAgICAgICAgICAgICAgICAgdCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEQgPSAhMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IFQoMCwgcy5jb2wpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHIgPSBUKDAsIHQuY29sKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDID0gaChyLCBuKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnJvdyA/IEUgPyBkICYmIChlLndpZHRoKFMgLSAxMCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYihlLCBwICogTWF0aC5yb3VuZCgoby5lbmQgPyAoby5lbmQgLSBvLnN0YXJ0KSAvIDZlNCA6IE4oImRlZmF1bHRFdmVudE1pbnV0ZXMiKSkgLyBmKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5kcmFnZ2FibGUoIm9wdGlvbiIsICJncmlkIiwgW1MsIDFdKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gITEpIDogRCA9ICEwIDogKFgoa2UoemUoby5zdGFydCksIEMpLCBrZSh5KG8pLCBDKSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSgpKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEID0gRCB8fCBkICYmICFDDQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhKCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRCA9ICEwOw0KICAgICAgICAgICAgICAgICAgICAgICAgZS5kcmFnZ2FibGUoIm9wdGlvbiIsICJyZXZlcnQiLCBEKQ0KICAgICAgICAgICAgICAgICAgICB9LCB0LCAiZHJhZyIpDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICBzdG9wOiBmdW5jdGlvbihzLCB0KSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh2LnN0b3AoKSwNCiAgICAgICAgICAgICAgICAgICAgSigpLA0KICAgICAgICAgICAgICAgICAgICB1KCJldmVudERyYWdTdG9wIiwgZSwgbywgcywgdCksDQogICAgICAgICAgICAgICAgICAgIEQpDQogICAgICAgICAgICAgICAgICAgICAgICBhKCksDQogICAgICAgICAgICAgICAgICAgICAgICBlLmNzcygiZmlsdGVyIiwgIiIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgcShvLCBlKTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICBkIHx8IChuID0gTWF0aC5yb3VuZCgoZS5vZmZzZXQoKS50b3AgLSBfKCkub2Zmc2V0KCkudG9wKSAvIHApICogZiArIGcgLSAoNjAgKiBvLnN0YXJ0LmdldEhvdXJzKCkgKyBvLnN0YXJ0LmdldE1pbnV0ZXMoKSkpLA0KICAgICAgICAgICAgICAgICAgICAgICAgaih0aGlzLCBvLCBDLCBuLCBkLCBzLCB0KQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBZKHMpIHsNCiAgICAgICAgdmFyIGUsIHIgPSBCKHMpLCBhID0gclswXTsNCiAgICAgICAgaWYgKEkociksDQogICAgICAgIGEpIHsNCiAgICAgICAgICAgIGZvciAoZSA9IDA7IGUgPCBhLmxlbmd0aDsgZSsrKQ0KICAgICAgICAgICAgICAgIFgoYVtlXSk7DQogICAgICAgICAgICBmb3IgKGUgPSAwOyBlIDwgYS5sZW5ndGg7IGUrKykNCiAgICAgICAgICAgICAgICBKKGFbZV0sIDAsIDApDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIFYocikNCiAgICB9DQogICAgZnVuY3Rpb24gQihyKSB7DQogICAgICAgIHZhciBlLCBvLCBsLCBpID0gW107DQogICAgICAgIGZvciAoZSA9IDA7IGUgPCByLmxlbmd0aDsgZSsrKSB7DQogICAgICAgICAgICBmb3IgKG8gPSByW2VdLA0KICAgICAgICAgICAgbCA9IDA7IGwgPCBpLmxlbmd0aCAmJiAhIVUobywgaVtsXSkubGVuZ3RoOyBsKyspDQogICAgICAgICAgICAgICAgOw0KICAgICAgICAgICAgKGlbbF0gfHwgKGlbbF0gPSBbXSkpLnB1c2gobykNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gaQ0KICAgIH0NCiAgICBmdW5jdGlvbiBJKG8pIHsNCiAgICAgICAgdmFyIGUsIGwsIGksIGQsIGM7DQogICAgICAgIGZvciAoZSA9IDA7IGUgPCBvLmxlbmd0aDsgZSsrKQ0KICAgICAgICAgICAgZm9yIChsID0gb1tlXSwNCiAgICAgICAgICAgIGkgPSAwOyBpIDwgbC5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgICAgICBmb3IgKGQgPSBsW2ldLA0KICAgICAgICAgICAgICAgIGQuZm9yd2FyZFNlZ3MgPSBbXSwNCiAgICAgICAgICAgICAgICBjID0gZSArIDE7IGMgPCBvLmxlbmd0aDsgYysrKQ0KICAgICAgICAgICAgICAgICAgICBVKGQsIG9bY10sIGQuZm9yd2FyZFNlZ3MpDQogICAgfQ0KICAgIGZ1bmN0aW9uIFgocikgew0KICAgICAgICB2YXIgZSwgbywgbCA9IHIuZm9yd2FyZFNlZ3MsIG4gPSAwOw0KICAgICAgICBpZiAodm9pZCAwID09PSByLmZvcndhcmRQcmVzc3VyZSkgew0KICAgICAgICAgICAgZm9yIChlID0gMDsgZSA8IGwubGVuZ3RoOyBlKyspDQogICAgICAgICAgICAgICAgbyA9IGxbZV0sDQogICAgICAgICAgICAgICAgWChvKSwNCiAgICAgICAgICAgICAgICBuID0gTWF0aC5tYXgobiwgMSArIG8uZm9yd2FyZFByZXNzdXJlKTsNCiAgICAgICAgICAgIHIuZm9yd2FyZFByZXNzdXJlID0gbg0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIEoociwgZSwgdCkgew0KICAgICAgICB2YXIgYSwgbyA9IHIuZm9yd2FyZFNlZ3M7DQogICAgICAgIGlmICh2b2lkIDAgPT09IHIuZm9yd2FyZENvb3JkKQ0KICAgICAgICAgICAgZm9yIChvLmxlbmd0aCA/IChvLnNvcnQoWiksDQogICAgICAgICAgICBKKG9bMF0sIGUgKyAxLCB0KSwNCiAgICAgICAgICAgIHIuZm9yd2FyZENvb3JkID0gb1swXS5iYWNrd2FyZENvb3JkKSA6IHIuZm9yd2FyZENvb3JkID0gMSwNCiAgICAgICAgICAgIHIuYmFja3dhcmRDb29yZCA9IHIuZm9yd2FyZENvb3JkIC0gKHIuZm9yd2FyZENvb3JkIC0gdCkgLyAoZSArIDEpLA0KICAgICAgICAgICAgYSA9IDA7IGEgPCBvLmxlbmd0aDsgYSsrKQ0KICAgICAgICAgICAgICAgIEoob1thXSwgMCwgci5mb3J3YXJkQ29vcmQpDQogICAgfQ0KICAgIGZ1bmN0aW9uIFYocikgew0KICAgICAgICB2YXIgZSwgbywgbCwgaSA9IFtdOw0KICAgICAgICBmb3IgKGUgPSAwOyBlIDwgci5sZW5ndGg7IGUrKykNCiAgICAgICAgICAgIGZvciAobyA9IHJbZV0sDQogICAgICAgICAgICBsID0gMDsgbCA8IG8ubGVuZ3RoOyBsKyspDQogICAgICAgICAgICAgICAgaS5wdXNoKG9bbF0pOw0KICAgICAgICByZXR1cm4gaQ0KICAgIH0NCiAgICBmdW5jdGlvbiBVKHMsIGUsIHQpIHsNCiAgICAgICAgdCA9IHQgfHwgW107DQogICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgZS5sZW5ndGg7IHIrKykNCiAgICAgICAgICAgIEcocywgZVtyXSkgJiYgdC5wdXNoKGVbcl0pOw0KICAgICAgICByZXR1cm4gdA0KICAgIH0NCiAgICBmdW5jdGlvbiBHKGEsIGUpIHsNCiAgICAgICAgcmV0dXJuIGEuZW5kID4gZS5zdGFydCAmJiBhLnN0YXJ0IDwgZS5lbmQNCiAgICB9DQogICAgZnVuY3Rpb24gWihhLCBlKSB7DQogICAgICAgIHJldHVybiBlLmZvcndhcmRQcmVzc3VyZSAtIGEuZm9yd2FyZFByZXNzdXJlIHx8IChhLmJhY2t3YXJkQ29vcmQgfHwgMCkgLSAoZS5iYWNrd2FyZENvb3JkIHx8IDApIHx8IEsoYSwgZSkNCiAgICB9DQogICAgZnVuY3Rpb24gSyhhLCBlKSB7DQogICAgICAgIHJldHVybiBhLnN0YXJ0IC0gZS5zdGFydCB8fCBlLmVuZCAtIGUuc3RhcnQgLSAoYS5lbmQgLSBhLnN0YXJ0KSB8fCAoYS5ldmVudC50aXRsZSB8fCAiIikubG9jYWxlQ29tcGFyZShlLmV2ZW50LnRpdGxlKQ0KICAgIH0NCiAgICBmdW5jdGlvbiBzdChhLCBvLCBjKSB7DQogICAgICAgIGZ1bmN0aW9uIHMoYSwgZSkgew0KICAgICAgICAgICAgdmFyIHQgPSBfW2FdOw0KICAgICAgICAgICAgcmV0dXJuIFNlLmlzUGxhaW5PYmplY3QodCkgPyBOKHQsIGUgfHwgYykgOiB0DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gdShhLCBlKSB7DQogICAgICAgICAgICByZXR1cm4gby50cmlnZ2VyLmFwcGx5KG8sIFthLCBlIHx8IEVdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpLCBbRV0pKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGUocykgew0KICAgICAgICAgICAgeCA9IHt9Ow0KICAgICAgICAgICAgdmFyIGUsIHIsIG8gPSBzLmxlbmd0aDsNCiAgICAgICAgICAgIGZvciAoZSA9IDA7IGUgPCBvOyBlKyspDQogICAgICAgICAgICAgICAgciA9IHNbZV0sDQogICAgICAgICAgICAgICAgeFtyLl9pZF0gPyB4W3IuX2lkXS5wdXNoKHIpIDogeFtyLl9pZF0gPSBbcl0NCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBpKHQpIHsNCiAgICAgICAgICAgIHJldHVybiB0LmVuZCA/IHplKHQuZW5kKSA6IFModCkNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBuKGEsIGUpIHsNCiAgICAgICAgICAgIEgucHVzaCh7DQogICAgICAgICAgICAgICAgZXZlbnQ6IGEsDQogICAgICAgICAgICAgICAgZWxlbWVudDogZQ0KICAgICAgICAgICAgfSksDQogICAgICAgICAgICBrW2EuX2lkXSA/IGtbYS5faWRdLnB1c2goZSkgOiBrW2EuX2lkXSA9IFtlXQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHIoKSB7DQogICAgICAgICAgICBTZS5lYWNoKEgsIGZ1bmN0aW9uKGEsIGUpIHsNCiAgICAgICAgICAgICAgICBFLnRyaWdnZXIoImV2ZW50RGVzdHJveSIsIGUuZXZlbnQsIGUuZXZlbnQsIGUuZWxlbWVudCkNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gbChvLCBlLCB0KSB7DQogICAgICAgICAgICB2YXIgYSwgbCA9IGtbby5faWRdLCBzID0gbC5sZW5ndGg7DQogICAgICAgICAgICBmb3IgKGEgPSAwOyBhIDwgczsgYSsrKQ0KICAgICAgICAgICAgICAgIGUgJiYgbFthXVswXSA9PSBlWzBdIHx8IGxbYV1bdF0oKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGQoaSwgdCwgZSwgYSwgbiwgcywgcikgew0KICAgICAgICAgICAgdmFyIG8gPSB0LmFsbERheQ0KICAgICAgICAgICAgICAsIGwgPSB0Ll9pZDsNCiAgICAgICAgICAgIHAoeFtsXSwgZSwgYSwgbiksDQogICAgICAgICAgICB1KCJldmVudERyb3AiLCBpLCB0LCBlLCBhLCBuLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICBwKHhbbF0sIC1lLCAtYSwgbyksDQogICAgICAgICAgICAgICAgVChsKQ0KICAgICAgICAgICAgfSwgcywgciksDQogICAgICAgICAgICBUKGwpDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gZyhsLCB0LCBlLCBhLCBuLCBzKSB7DQogICAgICAgICAgICB2YXIgciA9IHQuX2lkOw0KICAgICAgICAgICAgZih4W3JdLCBlLCBhKSwNCiAgICAgICAgICAgIHUoImV2ZW50UmVzaXplIiwgbCwgdCwgZSwgYSwgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgZih4W3JdLCAtZSwgLWEpLA0KICAgICAgICAgICAgICAgIFQocikNCiAgICAgICAgICAgIH0sIG4sIHMpLA0KICAgICAgICAgICAgVChyKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHAoZSwgdCwgYSwgbykgew0KICAgICAgICAgICAgYSA9IGEgfHwgMDsNCiAgICAgICAgICAgIGZvciAodmFyIHMsIGkgPSBlLmxlbmd0aCwgbCA9IDA7IGwgPCBpOyBsKyspDQogICAgICAgICAgICAgICAgcyA9IGVbbF0sDQogICAgICAgICAgICAgICAgdm9pZCAwICE9PSBvICYmIChzLmFsbERheSA9IG8pLA0KICAgICAgICAgICAgICAgIEhlKGtlKHMuc3RhcnQsIHQsICEwKSwgYSksDQogICAgICAgICAgICAgICAgcy5lbmQgJiYgKHMuZW5kID0gSGUoa2Uocy5lbmQsIHQsICEwKSwgYSkpLA0KICAgICAgICAgICAgICAgIE0ocywgXykNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBmKGUsIHQsIGEpIHsNCiAgICAgICAgICAgIGEgPSBhIHx8IDA7DQogICAgICAgICAgICBmb3IgKHZhciBvLCBkID0gZS5sZW5ndGgsIHIgPSAwOyByIDwgZDsgcisrKQ0KICAgICAgICAgICAgICAgIG8gPSBlW3JdLA0KICAgICAgICAgICAgICAgIG8uZW5kID0gSGUoa2UoaShvKSwgdCwgITApLCBhKSwNCiAgICAgICAgICAgICAgICBNKG8sIF8pDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gdigpIHsNCiAgICAgICAgICAgIHJldHVybiBGDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gbShvLCBsKSB7DQogICAgICAgICAgICB2YXIgaSA9IEUuZ2V0Q29sQ250KCkNCiAgICAgICAgICAgICAgLCBhID0gWSA/IC0xIDogMQ0KICAgICAgICAgICAgICAsIG4gPSBZID8gaSAtIDEgOiAwOw0KICAgICAgICAgICAgIm9iamVjdCIgPT0gdHlwZW9mIG8gJiYgKGwgPSBvLmNvbCwNCiAgICAgICAgICAgIG8gPSBvLnJvdyk7DQogICAgICAgICAgICB2YXIgcyA9IG8gKiBpICsgKGwgKiBhICsgbik7DQogICAgICAgICAgICByZXR1cm4gcw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHkoYSkgew0KICAgICAgICAgICAgdmFyIHMgPSBFLnZpc1N0YXJ0LmdldERheSgpOw0KICAgICAgICAgICAgcmV0dXJuIGEgKz0gQVtzXSwNCiAgICAgICAgICAgIDcgKiBNYXRoLmZsb29yKGEgLyBGKSArIHFbKGEgJSBGICsgRikgJSBGXSAtIHMNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBiKGEpIHsNCiAgICAgICAgICAgIHZhciBlID0gemUoRS52aXNTdGFydCk7DQogICAgICAgICAgICByZXR1cm4ga2UoZSwgYSksDQogICAgICAgICAgICBlDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gRCh0KSB7DQogICAgICAgICAgICByZXR1cm4gaCh0LCBFLnZpc1N0YXJ0KQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHcoYSkgew0KICAgICAgICAgICAgdmFyIHMgPSBFLnZpc1N0YXJ0LmdldERheSgpOw0KICAgICAgICAgICAgcmV0dXJuIGEgKz0gcywNCiAgICAgICAgICAgIE1hdGguZmxvb3IoYSAvIDcpICogRiArIEFbKGEgJSA3ICsgNykgJSA3XSAtIEFbc10NCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBDKHIpIHsNCiAgICAgICAgICAgIHZhciBlID0gRS5nZXRDb2xDbnQoKQ0KICAgICAgICAgICAgICAsIHQgPSBZID8gLTEgOiAxDQogICAgICAgICAgICAgICwgYSA9IFkgPyBlIC0gMSA6IDANCiAgICAgICAgICAgICAgLCBuID0gTWF0aC5mbG9vcihyIC8gZSk7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIHJvdzogbiwNCiAgICAgICAgICAgICAgICBjb2w6IChyICUgZSArIGUpICUgZSAqIHQgKyBhDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdmFyIEUgPSB0aGlzOw0KICAgICAgICBFLmVsZW1lbnQgPSBhLA0KICAgICAgICBFLmNhbGVuZGFyID0gbywNCiAgICAgICAgRS5uYW1lID0gYywNCiAgICAgICAgRS5vcHQgPSBzLA0KICAgICAgICBFLnRyaWdnZXIgPSB1LA0KICAgICAgICBFLmlzRXZlbnREcmFnZ2FibGUgPSBmdW5jdGlvbihhKSB7DQogICAgICAgICAgICB2YXIgZSA9IGEuc291cmNlIHx8IHt9Ow0KICAgICAgICAgICAgcmV0dXJuIEwoYS5zdGFydEVkaXRhYmxlLCBlLnN0YXJ0RWRpdGFibGUsIHMoImV2ZW50U3RhcnRFZGl0YWJsZSIpLCBhLmVkaXRhYmxlLCBlLmVkaXRhYmxlLCBzKCJlZGl0YWJsZSIpKSAmJiAhcygiZGlzYWJsZURyYWdnaW5nIikNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIEUuaXNFdmVudFJlc2l6YWJsZSA9IGZ1bmN0aW9uKGEpIHsNCiAgICAgICAgICAgIHZhciBlID0gYS5zb3VyY2UgfHwge307DQogICAgICAgICAgICByZXR1cm4gTChhLmR1cmF0aW9uRWRpdGFibGUsIGUuZHVyYXRpb25FZGl0YWJsZSwgcygiZXZlbnREdXJhdGlvbkVkaXRhYmxlIiksIGEuZWRpdGFibGUsIGUuZWRpdGFibGUsIHMoImVkaXRhYmxlIikpICYmICFzKCJkaXNhYmxlUmVzaXppbmciKQ0KICAgICAgICB9DQogICAgICAgICwNCiAgICAgICAgRS5zZXRFdmVudERhdGEgPSBlLA0KICAgICAgICBFLmNsZWFyRXZlbnREYXRhID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB4ID0ge30sDQogICAgICAgICAgICBrID0ge30sDQogICAgICAgICAgICBIID0gW10NCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIEUuZXZlbnRFbmQgPSBpLA0KICAgICAgICBFLnJlcG9ydEV2ZW50RWxlbWVudCA9IG4sDQogICAgICAgIEUudHJpZ2dlckV2ZW50RGVzdHJveSA9IHIsDQogICAgICAgIEUuZXZlbnRFbGVtZW50SGFuZGxlcnMgPSBmdW5jdGlvbihzLCBlKSB7DQogICAgICAgICAgICBlLmNsaWNrKGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgICAgICBpZiAoIWUuaGFzQ2xhc3MoInVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpICYmICFlLmhhc0NsYXNzKCJ1aS1yZXNpemFibGUtcmVzaXppbmciKSkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUoImV2ZW50Q2xpY2siLCB0aGlzLCBzLCB0KQ0KICAgICAgICAgICAgfSkuaG92ZXIoZnVuY3Rpb24oZSkgew0KICAgICAgICAgICAgICAgIHUoImV2ZW50TW91c2VvdmVyIiwgdGhpcywgcywgZSkNCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgICAgICAgICB1KCJldmVudE1vdXNlb3V0IiwgdGhpcywgcywgZSkNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBFLnNob3dFdmVudHMgPSBmdW5jdGlvbihhLCBlKSB7DQogICAgICAgICAgICBsKGEsIGUsICJzaG93IikNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIEUuaGlkZUV2ZW50cyA9IGZ1bmN0aW9uKGEsIGUpIHsNCiAgICAgICAgICAgIGwoYSwgZSwgImhpZGUiKQ0KICAgICAgICB9DQogICAgICAgICwNCiAgICAgICAgRS5ldmVudERyb3AgPSBkLA0KICAgICAgICBFLmV2ZW50UmVzaXplID0gZzsNCiAgICAgICAgdmFyIFMgPSBFLmRlZmF1bHRFdmVudEVuZA0KICAgICAgICAgICwgTSA9IG8ubm9ybWFsaXplRXZlbnQNCiAgICAgICAgICAsIFQgPSBvLnJlcG9ydEV2ZW50Q2hhbmdlDQogICAgICAgICAgLCB4ID0ge30NCiAgICAgICAgICAsIGsgPSB7fQ0KICAgICAgICAgICwgSCA9IFtdDQogICAgICAgICAgLCBfID0gby5vcHRpb25zOw0KICAgICAgICBFLmlzSGlkZGVuRGF5ID0gZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgcmV0dXJuICJvYmplY3QiID09IHR5cGVvZiB0ICYmICh0ID0gdC5nZXREYXkoKSksDQogICAgICAgICAgICBPW3RdDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBFLnNraXBIaWRkZW5EYXlzID0gZnVuY3Rpb24ocywgZSwgbikgew0KICAgICAgICAgICAgZm9yIChlID0gZSB8fCAxOyBPWyhzLmdldERheSgpICsgKG4gPyBlIDogMCkgKyA3KSAlIDddOyApDQogICAgICAgICAgICAgICAga2UocywgZSkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIEUuZ2V0Q2VsbHNQZXJXZWVrID0gdiwNCiAgICAgICAgRS5kYXRlVG9DZWxsID0gZnVuY3Rpb24ocykgew0KICAgICAgICAgICAgdmFyIGUgPSBEKHMpDQogICAgICAgICAgICAgICwgdCA9IHcoZSkNCiAgICAgICAgICAgICAgLCBhID0gQyh0KTsNCiAgICAgICAgICAgIHJldHVybiBhDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBFLmRhdGVUb0RheU9mZnNldCA9IEQsDQogICAgICAgIEUuZGF5T2Zmc2V0VG9DZWxsT2Zmc2V0ID0gdywNCiAgICAgICAgRS5jZWxsT2Zmc2V0VG9DZWxsID0gQywNCiAgICAgICAgRS5jZWxsVG9EYXRlID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB2YXIgcyA9IG0uYXBwbHkobnVsbCwgYXJndW1lbnRzKQ0KICAgICAgICAgICAgICAsIGUgPSB5KHMpDQogICAgICAgICAgICAgICwgdCA9IGIoZSk7DQogICAgICAgICAgICByZXR1cm4gdA0KICAgICAgICB9DQogICAgICAgICwNCiAgICAgICAgRS5jZWxsVG9DZWxsT2Zmc2V0ID0gbSwNCiAgICAgICAgRS5jZWxsT2Zmc2V0VG9EYXlPZmZzZXQgPSB5LA0KICAgICAgICBFLmRheU9mZnNldFRvRGF0ZSA9IGIsDQogICAgICAgIEUucmFuZ2VUb1NlZ21lbnRzID0gZnVuY3Rpb24oYiwgZSkgew0KICAgICAgICAgICAgZm9yICh2YXIgdCA9IEUuZ2V0Um93Q250KCksIGEgPSBFLmdldENvbENudCgpLCBuID0gW10sIHMgPSBEKGIpLCByID0gRChlKSwgaSA9IHcocyksIG8gPSB3KHIpIC0gMSwgbCA9IDA7IGwgPCB0OyBsKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgUyA9IGwgKiBhDQogICAgICAgICAgICAgICAgICAsIGMgPSBNYXRoLm1heChpLCBTKQ0KICAgICAgICAgICAgICAgICAgLCBnID0gTWF0aC5taW4obywgUyArIGEgLSAxKTsNCiAgICAgICAgICAgICAgICBpZiAoYyA8PSBnKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBoID0gQyhjKQ0KICAgICAgICAgICAgICAgICAgICAgICwgcCA9IEMoZykNCiAgICAgICAgICAgICAgICAgICAgICAsIHUgPSBbaC5jb2wsIHAuY29sXS5zb3J0KCkNCiAgICAgICAgICAgICAgICAgICAgICAsIGYgPSB5KGMpID09IHMNCiAgICAgICAgICAgICAgICAgICAgICAsIHYgPSB5KGcpICsgMSA9PSByOw0KICAgICAgICAgICAgICAgICAgICBuLnB1c2goew0KICAgICAgICAgICAgICAgICAgICAgICAgcm93OiBsLA0KICAgICAgICAgICAgICAgICAgICAgICAgbGVmdENvbDogdVswXSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0Q29sOiB1WzFdLA0KICAgICAgICAgICAgICAgICAgICAgICAgaXNTdGFydDogZiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzRW5kOiB2DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG4NCiAgICAgICAgfQ0KICAgICAgICA7DQogICAgICAgIHZhciBGLCBQID0gcygiaGlkZGVuRGF5cyIpIHx8IFtdLCBPID0gW10sIEEgPSBbXSwgcSA9IFtdLCBZID0gcygiaXNSVEwiKTsNCiAgICAgICAgKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgITEgPT09IHMoIndlZWtlbmRzIikgJiYgUC5wdXNoKDAsIDYpOw0KICAgICAgICAgICAgZm9yICh2YXIgYSA9IDAsIG4gPSAwOyA3ID4gYTsgYSsrKQ0KICAgICAgICAgICAgICAgIEFbYV0gPSBuLA0KICAgICAgICAgICAgICAgIE9bYV0gPSAtMSAhPSBTZS5pbkFycmF5KGEsIFApLA0KICAgICAgICAgICAgICAgIE9bYV0gfHwgKHFbbl0gPSBhLA0KICAgICAgICAgICAgICAgIG4rKyk7DQogICAgICAgICAgICBpZiAoRiA9IG4sDQogICAgICAgICAgICAhRikNCiAgICAgICAgICAgICAgICB0aHJvdyAiaW52YWxpZCBoaWRkZW5EYXlzIg0KICAgICAgICB9DQogICAgICAgICkoKQ0KICAgIH0NCiAgICBmdW5jdGlvbiBhZSgpIHsNCiAgICAgICAgZnVuY3Rpb24gYShuLCBsLCB0KSB7DQogICAgICAgICAgICB2YXIgZSA9IG8oW25dLCAhMCwgITEpDQogICAgICAgICAgICAgICwgYSA9IFtdOw0KICAgICAgICAgICAgcmV0dXJuICQoZSwgZnVuY3Rpb24ocywgZSkgew0KICAgICAgICAgICAgICAgIHMucm93ID09PSBsICYmIGUuY3NzKCJ0b3AiLCB0KSwNCiAgICAgICAgICAgICAgICBhLnB1c2goZVswXSkNCiAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgYQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIG8oYSwgZSwgdCkgew0KICAgICAgICAgICAgdmFyIHMsIG4sIGcgPSBYKCksIGQgPSBlID8gU2UoIjxkaXYvPiIpIDogZywgaCA9IHUoYSk7DQogICAgICAgICAgICByZXR1cm4gQyhoKSwNCiAgICAgICAgICAgIHMgPSBpKGgpLA0KICAgICAgICAgICAgZFswXS5pbm5lckhUTUwgPSBzLA0KICAgICAgICAgICAgbiA9IGQuY2hpbGRyZW4oKSwNCiAgICAgICAgICAgIGUgJiYgZy5hcHBlbmQobiksDQogICAgICAgICAgICBsKGgsIG4pLA0KICAgICAgICAgICAgJChoLCBmdW5jdGlvbihhLCBlKSB7DQogICAgICAgICAgICAgICAgYS5oc2lkZXMgPSBEKGUsICEwKQ0KICAgICAgICAgICAgfSksDQogICAgICAgICAgICAkKGgsIGZ1bmN0aW9uKGEsIGUpIHsNCiAgICAgICAgICAgICAgICBlLndpZHRoKE1hdGgubWF4KDAsIGEub3V0ZXJXaWR0aCAtIGEuaHNpZGVzKSkNCiAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgJChoLCBmdW5jdGlvbihhLCBlKSB7DQogICAgICAgICAgICAgICAgYS5vdXRlckhlaWdodCA9IGUub3V0ZXJIZWlnaHQoITApDQogICAgICAgICAgICB9KSwNCiAgICAgICAgICAgIGMoaCwgdCksDQogICAgICAgICAgICBoDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gdShyKSB7DQogICAgICAgICAgICBmb3IgKHZhciBlLCBvID0gW10sIGEgPSAwOyBhIDwgci5sZW5ndGg7IGErKykNCiAgICAgICAgICAgICAgICBlID0gcyhyW2FdKSwNCiAgICAgICAgICAgICAgICBvLnB1c2guYXBwbHkobywgZSk7DQogICAgICAgICAgICByZXR1cm4gbw0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHMocikgew0KICAgICAgICAgICAgZm9yICh2YXIgZSA9IHIuc3RhcnQsIHQgPSB5KHIpLCBhID0gSyhlLCB0KSwgbiA9IDA7IG4gPCBhLmxlbmd0aDsgbisrKQ0KICAgICAgICAgICAgICAgIGFbbl0uZXZlbnQgPSByOw0KICAgICAgICAgICAgcmV0dXJuIGENCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBDKHQpIHsNCiAgICAgICAgICAgIGZvciAodmFyIGUgPSB3KCJpc1JUTCIpLCBhID0gMDsgYSA8IHQubGVuZ3RoOyBhKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgaSA9IHRbYV0NCiAgICAgICAgICAgICAgICAgICwgcyA9IChlID8gaS5pc0VuZCA6IGkuaXNTdGFydCkgPyBZIDogXw0KICAgICAgICAgICAgICAgICAgLCByID0gKGUgPyBpLmlzU3RhcnQgOiBpLmlzRW5kKSA/IEIgOiBxDQogICAgICAgICAgICAgICAgICAsIG8gPSBzKGkubGVmdENvbCkNCiAgICAgICAgICAgICAgICAgICwgbCA9IHIoaS5yaWdodENvbCk7DQogICAgICAgICAgICAgICAgaS5sZWZ0ID0gbywNCiAgICAgICAgICAgICAgICBpLm91dGVyV2lkdGggPSBsIC0gbw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGkocykgew0KICAgICAgICAgICAgZm9yICh2YXIgZSA9ICIiLCByID0gMDsgciA8IHMubGVuZ3RoOyByKyspDQogICAgICAgICAgICAgICAgZSArPSBuKHNbcl0pOw0KICAgICAgICAgICAgcmV0dXJuIGUNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBuKHQpIHsNCiAgICAgICAgICAgIHZhciBlID0gIiINCiAgICAgICAgICAgICAgLCBsID0gdygiaXNSVEwiKQ0KICAgICAgICAgICAgICAsIG4gPSB0LmV2ZW50DQogICAgICAgICAgICAgICwgcyA9IG4udXJsDQogICAgICAgICAgICAgICwgciA9IFsiZmMtZXZlbnQiLCAiZmMtZXZlbnQtaG9yaSJdOw0KICAgICAgICAgICAgRShuKSAmJiByLnB1c2goImZjLWV2ZW50LWRyYWdnYWJsZSIpLA0KICAgICAgICAgICAgdC5pc1N0YXJ0ICYmIHIucHVzaCgiZmMtZXZlbnQtc3RhcnQiKSwNCiAgICAgICAgICAgIHQuaXNFbmQgJiYgci5wdXNoKCJmYy1ldmVudC1lbmQiKSwNCiAgICAgICAgICAgIHIgPSByLmNvbmNhdChuLmNsYXNzTmFtZSksDQogICAgICAgICAgICBuLnNvdXJjZSAmJiAociA9IHIuY29uY2F0KG4uc291cmNlLmNsYXNzTmFtZSB8fCBbXSkpOw0KICAgICAgICAgICAgdmFyIGQgPSBXKG4sIHcpOw0KICAgICAgICAgICAgcmV0dXJuIGUgKz0gcyA/ICI8YSBocmVmPSciICsgRihzKSArICInIiA6ICI8ZGl2IiwNCiAgICAgICAgICAgIGUgKz0gIiBjbGFzcz0nIiArIHIuam9pbigiICIpICsgIicgc3R5bGU9J3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6IiArIHQubGVmdCArICJweDsiICsgZCArICInPjxkaXYgY2xhc3M9J2ZjLWV2ZW50LWlubmVyJz4iLA0KICAgICAgICAgICAgIW4uYWxsRGF5ICYmIHQuaXNTdGFydCAmJiAoZSArPSAiPHNwYW4gY2xhc3M9J2ZjLWV2ZW50LXRpbWUnPiIgKyBGKEoobi5zdGFydCwgbi5lbmQsIHcoInRpbWVGb3JtYXQiKSkpICsgIjwvc3Bhbj4iKSwNCiAgICAgICAgICAgIGUgKz0gIjxzcGFuIGNsYXNzPSdmYy1ldmVudC10aXRsZSc+IiArIEYobi50aXRsZSB8fCAiIikgKyAiPC9zcGFuPjwvZGl2PiIsDQogICAgICAgICAgICB0LmlzRW5kICYmIE0obikgJiYgKGUgKz0gIjxkaXYgY2xhc3M9J3VpLXJlc2l6YWJsZS1oYW5kbGUgdWktcmVzaXphYmxlLSIgKyAobCA/ICJ3IiA6ICJlIikgKyAiJz4mbmJzcDsmbmJzcDsmbmJzcDs8L2Rpdj4iKSwNCiAgICAgICAgICAgIGUgKz0gIjwvIiArIChzID8gImEiIDogImRpdiIpICsgIj4iLA0KICAgICAgICAgICAgZQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGwoYSwgZSkgew0KICAgICAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCBhLmxlbmd0aDsgdCsrKSB7DQogICAgICAgICAgICAgICAgdmFyIGkgPSBhW3RdDQogICAgICAgICAgICAgICAgICAsIHMgPSBpLmV2ZW50DQogICAgICAgICAgICAgICAgICAsIHIgPSBlLmVxKHQpDQogICAgICAgICAgICAgICAgICAsIGQgPSBTKCJldmVudFJlbmRlciIsIHMsIHMsIHIpOw0KICAgICAgICAgICAgICAgICExID09PSBkID8gci5yZW1vdmUoKSA6IChkICYmICEwICE9PSBkICYmIChkID0gU2UoZCkuY3NzKHsNCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICJhYnNvbHV0ZSIsDQogICAgICAgICAgICAgICAgICAgIGxlZnQ6IGkubGVmdA0KICAgICAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgICAgIHIucmVwbGFjZVdpdGgoZCksDQogICAgICAgICAgICAgICAgciA9IGQpLA0KICAgICAgICAgICAgICAgIGkuZWxlbWVudCA9IHIpDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gYyhvLCBlKSB7DQogICAgICAgICAgICB2YXIgdCA9IGQobykNCiAgICAgICAgICAgICAgLCBhID0gcCgpDQogICAgICAgICAgICAgICwgbiA9IFtdOw0KICAgICAgICAgICAgaWYgKGUpDQogICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBhLmxlbmd0aDsgcysrKQ0KICAgICAgICAgICAgICAgICAgICBhW3NdLmhlaWdodCh0W3NdKTsNCiAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgYS5sZW5ndGg7IHMrKykNCiAgICAgICAgICAgICAgICBuLnB1c2goYVtzXS5wb3NpdGlvbigpLnRvcCk7DQogICAgICAgICAgICAkKG8sIGZ1bmN0aW9uKGEsIGUpIHsNCiAgICAgICAgICAgICAgICBlLmNzcygidG9wIiwgblthLnJvd10gKyBhLnRvcCkNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gZChoKSB7DQogICAgICAgICAgICBmb3IgKHZhciBlID0gTCgpLCB0ID0gTygpLCBhID0gW10sIG4gPSBnKGgpLCBzID0gMDsgcyA8IGU7IHMrKykgew0KICAgICAgICAgICAgICAgIGZvciAodmFyIHAgPSBuW3NdLCBpID0gW10sIG8gPSAwOyBvIDwgdDsgbysrKQ0KICAgICAgICAgICAgICAgICAgICBpLnB1c2goMCk7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgdSwgZiA9IDA7IGYgPCBwLmxlbmd0aDsgZisrKSB7DQogICAgICAgICAgICAgICAgICAgIHUgPSBwW2ZdLA0KICAgICAgICAgICAgICAgICAgICB1LnRvcCA9IFIoaS5zbGljZSh1LmxlZnRDb2wsIHUucmlnaHRDb2wgKyAxKSk7DQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG8gPSB1LmxlZnRDb2w7IG8gPD0gdS5yaWdodENvbDsgbysrKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaVtvXSA9IHUudG9wICsgdS5vdXRlckhlaWdodA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBhLnB1c2goUihpKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBhDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gZyhvKSB7DQogICAgICAgICAgICB2YXIgbCwgaSwgZCwgYyA9IEwoKSwgcyA9IFtdOw0KICAgICAgICAgICAgZm9yIChsID0gMDsgbCA8IG8ubGVuZ3RoOyBsKyspDQogICAgICAgICAgICAgICAgaSA9IG9bbF0sDQogICAgICAgICAgICAgICAgZCA9IGkucm93LA0KICAgICAgICAgICAgICAgIGkuZWxlbWVudCAmJiAoc1tkXSA/IHNbZF0ucHVzaChpKSA6IHNbZF0gPSBbaV0pOw0KICAgICAgICAgICAgZm9yIChkID0gMDsgZCA8IGM7IGQrKykNCiAgICAgICAgICAgICAgICBzW2RdID0gZShzW2RdIHx8IFtdKTsNCiAgICAgICAgICAgIHJldHVybiBzDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gZShzKSB7DQogICAgICAgICAgICBmb3IgKHZhciBlID0gW10sIHQgPSByKHMpLCBhID0gMDsgYSA8IHQubGVuZ3RoOyBhKyspDQogICAgICAgICAgICAgICAgZS5wdXNoLmFwcGx5KGUsIHRbYV0pOw0KICAgICAgICAgICAgcmV0dXJuIGUNCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiByKHIpIHsNCiAgICAgICAgICAgIHIuc29ydChlZSk7DQogICAgICAgICAgICBmb3IgKHZhciBlLCBvID0gW10sIGEgPSAwOyBhIDwgci5sZW5ndGg7IGErKykgew0KICAgICAgICAgICAgICAgIGUgPSByW2FdOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgby5sZW5ndGggJiYgISFRKGUsIG9bbF0pOyBsKyspDQogICAgICAgICAgICAgICAgICAgIDsNCiAgICAgICAgICAgICAgICBvW2xdID8gb1tsXS5wdXNoKGUpIDogb1tsXSA9IFtlXQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG8NCiAgICAgICAgfQ0KICAgICAgICBmdW5jdGlvbiBwKCkgew0KICAgICAgICAgICAgdmFyIHMsIG4gPSBMKCksIHQgPSBbXTsNCiAgICAgICAgICAgIGZvciAocyA9IDA7IHMgPCBuOyBzKyspDQogICAgICAgICAgICAgICAgdFtzXSA9IFAocykuZmluZCgiZGl2LmZjLWRheS1jb250ZW50ID4gZGl2Iik7DQogICAgICAgICAgICByZXR1cm4gdA0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIGYocywgcikgew0KICAgICAgICAgICAgdmFyIGUgPSBYKCk7DQogICAgICAgICAgICAkKHMsIGZ1bmN0aW9uKHQsIGUsIGEpIHsNCiAgICAgICAgICAgICAgICB2YXIgbiA9IHQuZXZlbnQ7DQogICAgICAgICAgICAgICAgbi5faWQgPT09IHIgPyBtKG4sIGUsIHQpIDogZVswXS5fZmNpID0gYQ0KICAgICAgICAgICAgfSksDQogICAgICAgICAgICB2KGUsIHMsIG0pDQogICAgICAgIH0NCiAgICAgICAgZnVuY3Rpb24gbShzLCBlLCB0KSB7DQogICAgICAgICAgICBFKHMpICYmIGIuZHJhZ2dhYmxlRGF5RXZlbnQocywgZSwgdCksDQogICAgICAgICAgICB0LmlzRW5kICYmIE0ocykgJiYgYi5yZXNpemFibGVEYXlFdmVudChzLCBlLCB0KSwNCiAgICAgICAgICAgIHgocywgZSkNCiAgICAgICAgfQ0KICAgICAgICB2YXIgYiA9IHRoaXM7DQogICAgICAgIGIucmVuZGVyRGF5RXZlbnRzID0gZnVuY3Rpb24ocywgZSkgew0KICAgICAgICAgICAgdmFyIHQgPSBvKHMsICExLCAhMCk7DQogICAgICAgICAgICAkKHQsIGZ1bmN0aW9uKGEsIGUpIHsNCiAgICAgICAgICAgICAgICBUKGEuZXZlbnQsIGUpDQogICAgICAgICAgICB9KSwNCiAgICAgICAgICAgIGYodCwgZSksDQogICAgICAgICAgICAkKHQsIGZ1bmN0aW9uKGEsIGUpIHsNCiAgICAgICAgICAgICAgICBTKCJldmVudEFmdGVyUmVuZGVyIiwgYS5ldmVudCwgYS5ldmVudCwgZSkNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBiLmRyYWdnYWJsZURheUV2ZW50ID0gZnVuY3Rpb24obywgZSkgew0KICAgICAgICAgICAgdmFyIGEsIGwgPSBaKCk7DQogICAgICAgICAgICBlLmRyYWdnYWJsZSh7DQogICAgICAgICAgICAgICAgZGVsYXk6IDUwLA0KICAgICAgICAgICAgICAgIG9wYWNpdHk6IHcoImRyYWdPcGFjaXR5IiksDQogICAgICAgICAgICAgICAgcmV2ZXJ0RHVyYXRpb246IHcoImRyYWdSZXZlcnREdXJhdGlvbiIpLA0KICAgICAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbihzLCB0KSB7DQogICAgICAgICAgICAgICAgICAgIFMoImV2ZW50RHJhZ1N0YXJ0IiwgZSwgbywgcywgdCksDQogICAgICAgICAgICAgICAgICAgIEgobywgZSksDQogICAgICAgICAgICAgICAgICAgIGwuc3RhcnQoZnVuY3Rpb24obiwgdCwgcywgcikgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuZHJhZ2dhYmxlKCJvcHRpb24iLCAicmV2ZXJ0IiwgIW4gfHwgIXMgJiYgIXIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgVSgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gb2UodCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbCA9IG9lKG4pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBoKGwsIGkpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFYoa2UoemUoby5zdGFydCksIGEpLCBrZSh5KG8pLCBhKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSAwDQogICAgICAgICAgICAgICAgICAgIH0sIHMsICJkcmFnIikNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uKHMsIHQpIHsNCiAgICAgICAgICAgICAgICAgICAgbC5zdG9wKCksDQogICAgICAgICAgICAgICAgICAgIFUoKSwNCiAgICAgICAgICAgICAgICAgICAgUygiZXZlbnREcmFnU3RvcCIsIGUsIG8sIHMsIHQpLA0KICAgICAgICAgICAgICAgICAgICBhID8geih0aGlzLCBvLCBhLCAwLCBvLmFsbERheSwgcywgdCkgOiAoZS5jc3MoImZpbHRlciIsICIiKSwNCiAgICAgICAgICAgICAgICAgICAgayhvLCBlKSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgICwNCiAgICAgICAgYi5yZXNpemFibGVEYXlFdmVudCA9IGZ1bmN0aW9uKG8sIGUsIHMpIHsNCiAgICAgICAgICAgIHZhciBuID0gdygiaXNSVEwiKQ0KICAgICAgICAgICAgICAsIHIgPSBuID8gInciIDogImUiDQogICAgICAgICAgICAgICwgbCA9IGUuZmluZCgiLnVpLXJlc2l6YWJsZS0iICsgcikNCiAgICAgICAgICAgICAgLCBwID0gITE7DQogICAgICAgICAgICBqKGUpLA0KICAgICAgICAgICAgZS5tb3VzZWRvd24oZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKQ0KICAgICAgICAgICAgfSkuY2xpY2soZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgICAgIHAgJiYgKHQucHJldmVudERlZmF1bHQoKSwNCiAgICAgICAgICAgICAgICB0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKQ0KICAgICAgICAgICAgfSksDQogICAgICAgICAgICBsLm1vdXNlZG93bihmdW5jdGlvbihuKSB7DQogICAgICAgICAgICAgICAgZnVuY3Rpb24gbCh0KSB7DQogICAgICAgICAgICAgICAgICAgIFMoImV2ZW50UmVzaXplU3RvcCIsIHRoaXMsIG8sIHQpLA0KICAgICAgICAgICAgICAgICAgICBTZSgiYm9keSIpLmNzcygiY3Vyc29yIiwgIiIpLA0KICAgICAgICAgICAgICAgICAgICBpLnN0b3AoKSwNCiAgICAgICAgICAgICAgICAgICAgVSgpLA0KICAgICAgICAgICAgICAgICAgICBiICYmIE4odGhpcywgbywgYiwgMCwgdCksDQogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBwID0gITENCiAgICAgICAgICAgICAgICAgICAgfSwgMCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKDEgPT0gbi53aGljaCkgew0KICAgICAgICAgICAgICAgICAgICBwID0gITA7DQogICAgICAgICAgICAgICAgICAgIHZhciBiLCBELCBpID0gWigpLCBjID0gTCgpLCBoID0gTygpLCB1ID0gZS5jc3MoInRvcCIpLCBmID0gU2UuZXh0ZW5kKHt9LCBvKSwgdiA9IHNlKG5lKG8uc3RhcnQpKTsNCiAgICAgICAgICAgICAgICAgICAgRygpLA0KICAgICAgICAgICAgICAgICAgICBTZSgiYm9keSIpLmNzcygiY3Vyc29yIiwgciArICItcmVzaXplIikub25lKCJtb3VzZXVwIiwgbCksDQogICAgICAgICAgICAgICAgICAgIFMoImV2ZW50UmVzaXplU3RhcnQiLCB0aGlzLCBvLCBuKSwNCiAgICAgICAgICAgICAgICAgICAgaS5zdGFydChmdW5jdGlvbihlLCBuKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gdGUobikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgaSA9IHRlKGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID0gTWF0aC5tYXgoaSwgdiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGFlKGkpIC0gYWUobCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLmVuZCA9IGtlKHQobyksIGIsICEwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBEOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEID0gYShmLCBzLnJvdywgdSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEQgPSBTZShEKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRC5maW5kKCIqIikuY3NzKCJjdXJzb3IiLCByICsgIi1yZXNpemUiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCAmJiBkLnJlbW92ZSgpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIKG8pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEQgJiYgKGsobyksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEQucmVtb3ZlKCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEQgPSBudWxsKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVKCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVihvLnN0YXJ0LCBrZSh5KG8pLCBiKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSwgbikNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIDsNCiAgICAgICAgdmFyIHcgPSBiLm9wdA0KICAgICAgICAgICwgUyA9IGIudHJpZ2dlcg0KICAgICAgICAgICwgRSA9IGIuaXNFdmVudERyYWdnYWJsZQ0KICAgICAgICAgICwgTSA9IGIuaXNFdmVudFJlc2l6YWJsZQ0KICAgICAgICAgICwgdCA9IGIuZXZlbnRFbmQNCiAgICAgICAgICAsIFQgPSBiLnJlcG9ydEV2ZW50RWxlbWVudA0KICAgICAgICAgICwgeCA9IGIuZXZlbnRFbGVtZW50SGFuZGxlcnMNCiAgICAgICAgICAsIGsgPSBiLnNob3dFdmVudHMNCiAgICAgICAgICAsIEggPSBiLmhpZGVFdmVudHMNCiAgICAgICAgICAsIHogPSBiLmV2ZW50RHJvcA0KICAgICAgICAgICwgTiA9IGIuZXZlbnRSZXNpemUNCiAgICAgICAgICAsIEwgPSBiLmdldFJvd0NudA0KICAgICAgICAgICwgTyA9IGIuZ2V0Q29sQ250DQogICAgICAgICAgLCBBID0gYi5nZXRDb2xXaWR0aA0KICAgICAgICAgICwgUCA9IGIuYWxsRGF5Um93DQogICAgICAgICAgLCBfID0gYi5jb2xMZWZ0DQogICAgICAgICAgLCBxID0gYi5jb2xSaWdodA0KICAgICAgICAgICwgWSA9IGIuY29sQ29udGVudExlZnQNCiAgICAgICAgICAsIEIgPSBiLmNvbENvbnRlbnRSaWdodA0KICAgICAgICAgICwgSSA9IGIuZGF0ZVRvQ2VsbA0KICAgICAgICAgICwgWCA9IGIuZ2V0RGF5U2VnbWVudENvbnRhaW5lcg0KICAgICAgICAgICwgSiA9IGIuY2FsZW5kYXIuZm9ybWF0RGF0ZXMNCiAgICAgICAgICAsIFYgPSBiLnJlbmRlckRheU92ZXJsYXkNCiAgICAgICAgICAsIFUgPSBiLmNsZWFyT3ZlcmxheXMNCiAgICAgICAgICAsIEcgPSBiLmNsZWFyU2VsZWN0aW9uDQogICAgICAgICAgLCBaID0gYi5nZXRIb3Zlckxpc3RlbmVyDQogICAgICAgICAgLCBLID0gYi5yYW5nZVRvU2VnbWVudHMNCiAgICAgICAgICAsIG9lID0gYi5jZWxsVG9EYXRlDQogICAgICAgICAgLCB0ZSA9IGIuY2VsbFRvQ2VsbE9mZnNldA0KICAgICAgICAgICwgYWUgPSBiLmNlbGxPZmZzZXRUb0RheU9mZnNldA0KICAgICAgICAgICwgbmUgPSBiLmRhdGVUb0RheU9mZnNldA0KICAgICAgICAgICwgc2UgPSBiLmRheU9mZnNldFRvQ2VsbE9mZnNldA0KICAgIH0NCiAgICBmdW5jdGlvbiBRKHMsIGUpIHsNCiAgICAgICAgZm9yICh2YXIgdCwgciA9IDA7IHIgPCBlLmxlbmd0aDsgcisrKQ0KICAgICAgICAgICAgaWYgKHQgPSBlW3JdLA0KICAgICAgICAgICAgdC5sZWZ0Q29sIDw9IHMucmlnaHRDb2wgJiYgdC5yaWdodENvbCA+PSBzLmxlZnRDb2wpDQogICAgICAgICAgICAgICAgcmV0dXJuICEwOw0KICAgICAgICByZXR1cm4gITENCiAgICB9DQogICAgZnVuY3Rpb24gJChyLCBlKSB7DQogICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgew0KICAgICAgICAgICAgdmFyIG8gPSByW3RdDQogICAgICAgICAgICAgICwgbiA9IG8uZWxlbWVudDsNCiAgICAgICAgICAgIG4gJiYgZShvLCBuLCB0KQ0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIGVlKGEsIGUpIHsNCiAgICAgICAgcmV0dXJuIGUucmlnaHRDb2wgLSBlLmxlZnRDb2wgLSAoYS5yaWdodENvbCAtIGEubGVmdENvbCkgfHwgZS5ldmVudC5hbGxEYXkgLSBhLmV2ZW50LmFsbERheSB8fCBhLmV2ZW50LnN0YXJ0IC0gZS5ldmVudC5zdGFydCB8fCAoYS5ldmVudC50aXRsZSB8fCAiIikubG9jYWxlQ29tcGFyZShlLmV2ZW50LnRpdGxlKQ0KICAgIH0NCiAgICBmdW5jdGlvbiBpZSgpIHsNCiAgICAgICAgZnVuY3Rpb24gcCh0KSB7DQogICAgICAgICAgICBsICYmIChsID0gITEsDQogICAgICAgICAgICBvKCksDQogICAgICAgICAgICBzKCJ1bnNlbGVjdCIsIG51bGwsIHQpKQ0KICAgICAgICB9DQogICAgICAgIGZ1bmN0aW9uIHUociwgZSwgdCwgYSkgew0KICAgICAgICAgICAgbCA9ICEwLA0KICAgICAgICAgICAgcygic2VsZWN0IiwgbnVsbCwgciwgZSwgdCwgYSkNCiAgICAgICAgfQ0KICAgICAgICB2YXIgZSA9IHRoaXM7DQogICAgICAgIGUuc2VsZWN0ID0gZnVuY3Rpb24oZSwgdCwgbykgew0KICAgICAgICAgICAgcCgpLA0KICAgICAgICAgICAgdCB8fCAodCA9IG4oZSwgbykpLA0KICAgICAgICAgICAgcihlLCB0LCBvKSwNCiAgICAgICAgICAgIHUoZSwgdCwgbykNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIGUudW5zZWxlY3QgPSBwLA0KICAgICAgICBlLnJlcG9ydFNlbGVjdGlvbiA9IHUsDQogICAgICAgIGUuZGF5U2VsZWN0aW9uTW91c2Vkb3duID0gZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgdmFyIHMgPSBlLmNlbGxUb0RhdGUNCiAgICAgICAgICAgICAgLCBuID0gZS5nZXRJc0NlbGxBbGxEYXkNCiAgICAgICAgICAgICAgLCBsID0gZS5nZXRIb3Zlckxpc3RlbmVyKCkNCiAgICAgICAgICAgICAgLCBpID0gZS5yZXBvcnREYXlDbGljazsNCiAgICAgICAgICAgIGlmICgxID09IHQud2hpY2ggJiYgYSgic2VsZWN0YWJsZSIpKSB7DQogICAgICAgICAgICAgICAgcCh0KTsNCiAgICAgICAgICAgICAgICB2YXIgZCwgYyA9IHRoaXM7DQogICAgICAgICAgICAgICAgbC5zdGFydChmdW5jdGlvbihhLCBlKSB7DQogICAgICAgICAgICAgICAgICAgIG8oKSwNCiAgICAgICAgICAgICAgICAgICAgYSAmJiBuKGEpID8gKGQgPSBbcyhlKSwgcyhhKV0uc29ydChrKSwNCiAgICAgICAgICAgICAgICAgICAgcihkWzBdLCBkWzFdLCAhMCkpIDogZCA9IG51bGwNCiAgICAgICAgICAgICAgICB9LCB0KSwNCiAgICAgICAgICAgICAgICBTZShkb2N1bWVudCkub25lKCJtb3VzZXVwIiwgZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgICAgICAgICBsLnN0b3AoKSwNCiAgICAgICAgICAgICAgICAgICAgZCAmJiAoK2RbMF0gPT0gK2RbMV0gJiYgaShkWzBdLCAhMCwgdCksDQogICAgICAgICAgICAgICAgICAgIHUoZFswXSwgZFsxXSwgITAsIHQpKQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgOw0KICAgICAgICB2YXIgYSA9IGUub3B0DQogICAgICAgICAgLCBzID0gZS50cmlnZ2VyDQogICAgICAgICAgLCBuID0gZS5kZWZhdWx0U2VsZWN0aW9uRW5kDQogICAgICAgICAgLCByID0gZS5yZW5kZXJTZWxlY3Rpb24NCiAgICAgICAgICAsIG8gPSBlLmNsZWFyU2VsZWN0aW9uDQogICAgICAgICAgLCBsID0gITE7DQogICAgICAgIGEoInNlbGVjdGFibGUiKSAmJiBhKCJ1bnNlbGVjdEF1dG8iKSAmJiBTZShkb2N1bWVudCkubW91c2Vkb3duKGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgICAgIHZhciB0ID0gYSgidW5zZWxlY3RDYW5jZWwiKTsNCiAgICAgICAgICAgIHQgJiYgU2UoZS50YXJnZXQpLnBhcmVudHModCkubGVuZ3RoIHx8IHAoZSkNCiAgICAgICAgfSkNCiAgICB9DQogICAgZnVuY3Rpb24gZ2UoKSB7DQogICAgICAgIHZhciBhID0gdGhpczsNCiAgICAgICAgYS5yZW5kZXJPdmVybGF5ID0gZnVuY3Rpb24oYSwgcykgew0KICAgICAgICAgICAgdmFyIG4gPSB0LnNoaWZ0KCk7DQogICAgICAgICAgICByZXR1cm4gbiB8fCAobiA9IFNlKCI8ZGl2IGNsYXNzPSdmYy1jZWxsLW92ZXJsYXknIHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjMnLz4iKSksDQogICAgICAgICAgICBuWzBdLnBhcmVudE5vZGUgIT0gc1swXSAmJiBuLmFwcGVuZFRvKHMpLA0KICAgICAgICAgICAgZS5wdXNoKG4uY3NzKGEpLnNob3coKSksDQogICAgICAgICAgICBuDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBhLmNsZWFyT3ZlcmxheXMgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIGZvciAodmFyIHM7IHMgPSBlLnNoaWZ0KCk7ICkNCiAgICAgICAgICAgICAgICB0LnB1c2gocy5oaWRlKCkudW5iaW5kKCkpDQogICAgICAgIH0NCiAgICAgICAgOw0KICAgICAgICB2YXIgZSA9IFtdDQogICAgICAgICAgLCB0ID0gW10NCiAgICB9DQogICAgZnVuY3Rpb24gaGUodCkgew0KICAgICAgICB2YXIgYywgaCwgZSA9IHRoaXM7DQogICAgICAgIGUuYnVpbGQgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIGMgPSBbXSwNCiAgICAgICAgICAgIGggPSBbXSwNCiAgICAgICAgICAgIHQoYywgaCkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIGUuY2VsbCA9IGZ1bmN0aW9uKGEsIGUpIHsNCiAgICAgICAgICAgIHZhciB0LCBuID0gYy5sZW5ndGgsIHIgPSBoLmxlbmd0aCwgbyA9IC0xLCBsID0gLTE7DQogICAgICAgICAgICBmb3IgKHQgPSAwOyB0IDwgbjsgdCsrKQ0KICAgICAgICAgICAgICAgIGlmIChlID49IGNbdF1bMF0gJiYgZSA8IGNbdF1bMV0pIHsNCiAgICAgICAgICAgICAgICAgICAgbyA9IHQ7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yICh0ID0gMDsgdCA8IHI7IHQrKykNCiAgICAgICAgICAgICAgICBpZiAoYSA+PSBoW3RdWzBdICYmIGEgPCBoW3RdWzFdKSB7DQogICAgICAgICAgICAgICAgICAgIGwgPSB0Ow0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAwIDw9IG8gJiYgMCA8PSBsID8gew0KICAgICAgICAgICAgICAgIHJvdzogbywNCiAgICAgICAgICAgICAgICBjb2w6IGwNCiAgICAgICAgICAgIH0gOiBudWxsDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBlLnJlY3QgPSBmdW5jdGlvbihhLCBlLCB0LCBzLCBuKSB7DQogICAgICAgICAgICB2YXIgciA9IG4ub2Zmc2V0KCk7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIHRvcDogY1thXVswXSAtIHIudG9wLA0KICAgICAgICAgICAgICAgIGxlZnQ6IGhbZV1bMF0gLSByLmxlZnQsDQogICAgICAgICAgICAgICAgd2lkdGg6IGhbc11bMV0gLSBoW2VdWzBdLA0KICAgICAgICAgICAgICAgIGhlaWdodDogY1t0XVsxXSAtIGNbYV1bMF0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBmdW5jdGlvbiBwZShjKSB7DQogICAgICAgIGZ1bmN0aW9uIGUoZSkgew0KICAgICAgICAgICAgdGUoZSk7DQogICAgICAgICAgICB2YXIgdCA9IGMuY2VsbChlLnBhZ2VYLCBlLnBhZ2VZKTsNCiAgICAgICAgICAgICghdCAhPSAhaCB8fCB0ICYmICh0LnJvdyAhPSBoLnJvdyB8fCB0LmNvbCAhPSBoLmNvbCkpICYmICh0ID8gKCFnICYmIChnID0gdCksDQogICAgICAgICAgICBuKHQsIGcsIHQucm93IC0gZy5yb3csIHQuY29sIC0gZy5jb2wpKSA6IG4odCwgZyksDQogICAgICAgICAgICBoID0gdCkNCiAgICAgICAgfQ0KICAgICAgICB2YXIgYSwgbiwgZywgaCwgdCA9IHRoaXM7DQogICAgICAgIHQuc3RhcnQgPSBmdW5jdGlvbihzLCB0LCByKSB7DQogICAgICAgICAgICBuID0gcywNCiAgICAgICAgICAgIGcgPSBoID0gbnVsbCwNCiAgICAgICAgICAgIGMuYnVpbGQoKSwNCiAgICAgICAgICAgIGUodCksDQogICAgICAgICAgICBhID0gciB8fCAibW91c2Vtb3ZlIiwNCiAgICAgICAgICAgIFNlKGRvY3VtZW50KS5iaW5kKGEsIGUpDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICB0LnN0b3AgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHJldHVybiBTZShkb2N1bWVudCkudW5iaW5kKGEsIGUpLA0KICAgICAgICAgICAgaA0KICAgICAgICB9DQogICAgfQ0KICAgIGZ1bmN0aW9uIHRlKHQpIHsNCiAgICAgICAgdm9pZCAwID09PSB0LnBhZ2VYICYmICh0LnBhZ2VYID0gdC5vcmlnaW5hbEV2ZW50LnBhZ2VYLA0KICAgICAgICB0LnBhZ2VZID0gdC5vcmlnaW5hbEV2ZW50LnBhZ2VZKQ0KICAgIH0NCiAgICBmdW5jdGlvbiB1ZShvKSB7DQogICAgICAgIGZ1bmN0aW9uIGEodCkgew0KICAgICAgICAgICAgcmV0dXJuIGxbdF0gPSBsW3RdIHx8IG8odCkNCiAgICAgICAgfQ0KICAgICAgICB2YXIgbiA9IHRoaXMNCiAgICAgICAgICAsIGwgPSB7fQ0KICAgICAgICAgICwgaSA9IHt9DQogICAgICAgICAgLCBlID0ge307DQogICAgICAgIG4ubGVmdCA9IGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgIHJldHVybiBpW3RdID0gdm9pZCAwID09PSBpW3RdID8gYSh0KS5wb3NpdGlvbigpLmxlZnQgOiBpW3RdDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBuLnJpZ2h0ID0gZnVuY3Rpb24ocykgew0KICAgICAgICAgICAgcmV0dXJuIGVbc10gPSB2b2lkIDAgPT09IGVbc10gPyBuLmxlZnQocykgKyBhKHMpLndpZHRoKCkgOiBlW3NdDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBuLmNsZWFyID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICBsID0ge30sDQogICAgICAgICAgICBpID0ge30sDQogICAgICAgICAgICBlID0ge30NCiAgICAgICAgfQ0KICAgIH0NCiAgICB2YXIgc2UgPSB7DQogICAgICAgIGRlZmF1bHRWaWV3OiAibW9udGgiLA0KICAgICAgICBhc3BlY3RSYXRpbzogMS4zNSwNCiAgICAgICAgaGVhZGVyOiB7DQogICAgICAgICAgICBsZWZ0OiAidGl0bGUiLA0KICAgICAgICAgICAgY2VudGVyOiAiIiwNCiAgICAgICAgICAgIHJpZ2h0OiAidG9kYXkgcHJldixuZXh0Ig0KICAgICAgICB9LA0KICAgICAgICB3ZWVrZW5kczogITAsDQogICAgICAgIHdlZWtOdW1iZXJzOiAhMSwNCiAgICAgICAgd2Vla051bWJlckNhbGN1bGF0aW9uOiAiaXNvIiwNCiAgICAgICAgd2Vla051bWJlclRpdGxlOiAiVyIsDQogICAgICAgIGFsbERheURlZmF1bHQ6ICEwLA0KICAgICAgICBpZ25vcmVUaW1lem9uZTogITAsDQogICAgICAgIGxhenlGZXRjaGluZzogITAsDQogICAgICAgIHN0YXJ0UGFyYW06ICJzdGFydCIsDQogICAgICAgIGVuZFBhcmFtOiAiZW5kIiwNCiAgICAgICAgdGl0bGVGb3JtYXQ6IHsNCiAgICAgICAgICAgIG1vbnRoOiAiTU1NTSB5eXl5IiwNCiAgICAgICAgICAgIHdlZWs6ICJNTU0gZFsgeXl5eV17ICcmIzgyMTI7J1sgTU1NXSBkIHl5eXl9IiwNCiAgICAgICAgICAgIGRheTogImRkZGQsIE1NTSBkLCB5eXl5Ig0KICAgICAgICB9LA0KICAgICAgICBjb2x1bW5Gb3JtYXQ6IHsNCiAgICAgICAgICAgIG1vbnRoOiAiZGRkIiwNCiAgICAgICAgICAgIHdlZWs6ICJkZGQgTS9kIiwNCiAgICAgICAgICAgIGRheTogImRkZGQgTS9kIg0KICAgICAgICB9LA0KICAgICAgICB0aW1lRm9ybWF0OiB7DQogICAgICAgICAgICAiIjogImgoOm1tKXQiDQogICAgICAgIH0sDQogICAgICAgIGlzUlRMOiAhMSwNCiAgICAgICAgZmlyc3REYXk6IDAsDQogICAgICAgIG1vbnRoTmFtZXM6IFsiSmFudWFyeSIsICJGZWJydWFyeSIsICJNYXJjaCIsICJBcHJpbCIsICJNYXkiLCAiSnVuZSIsICJKdWx5IiwgIkF1Z3VzdCIsICJTZXB0ZW1iZXIiLCAiT2N0b2JlciIsICJOb3ZlbWJlciIsICJEZWNlbWJlciJdLA0KICAgICAgICBtb250aE5hbWVzU2hvcnQ6IFsiSmFuIiwgIkZlYiIsICJNYXIiLCAiQXByIiwgIk1heSIsICJKdW4iLCAiSnVsIiwgIkF1ZyIsICJTZXAiLCAiT2N0IiwgIk5vdiIsICJEZWMiXSwNCiAgICAgICAgZGF5TmFtZXM6IFsiU3VuZGF5IiwgIk1vbmRheSIsICJUdWVzZGF5IiwgIldlZG5lc2RheSIsICJUaHVyc2RheSIsICJGcmlkYXkiLCAiU2F0dXJkYXkiXSwNCiAgICAgICAgZGF5TmFtZXNTaG9ydDogWyJTdW4iLCAiTW9uIiwgIlR1ZSIsICJXZWQiLCAiVGh1IiwgIkZyaSIsICJTYXQiXSwNCiAgICAgICAgYnV0dG9uVGV4dDogew0KICAgICAgICAgICAgcHJldjogIjxzcGFuIGNsYXNzPSdmYy10ZXh0LWFycm93Jz4mbHNhcXVvOzwvc3Bhbj4iLA0KICAgICAgICAgICAgbmV4dDogIjxzcGFuIGNsYXNzPSdmYy10ZXh0LWFycm93Jz4mcnNhcXVvOzwvc3Bhbj4iLA0KICAgICAgICAgICAgcHJldlllYXI6ICI8c3BhbiBjbGFzcz0nZmMtdGV4dC1hcnJvdyc+JmxhcXVvOzwvc3Bhbj4iLA0KICAgICAgICAgICAgbmV4dFllYXI6ICI8c3BhbiBjbGFzcz0nZmMtdGV4dC1hcnJvdyc+JnJhcXVvOzwvc3Bhbj4iLA0KICAgICAgICAgICAgdG9kYXk6ICJ0b2RheSIsDQogICAgICAgICAgICBtb250aDogIm1vbnRoIiwNCiAgICAgICAgICAgIHdlZWs6ICJ3ZWVrIiwNCiAgICAgICAgICAgIGRheTogImRheSINCiAgICAgICAgfSwNCiAgICAgICAgdGhlbWU6ICExLA0KICAgICAgICBidXR0b25JY29uczogew0KICAgICAgICAgICAgcHJldjogImNpcmNsZS10cmlhbmdsZS13IiwNCiAgICAgICAgICAgIG5leHQ6ICJjaXJjbGUtdHJpYW5nbGUtZSINCiAgICAgICAgfSwNCiAgICAgICAgdW5zZWxlY3RBdXRvOiAhMCwNCiAgICAgICAgZHJvcEFjY2VwdDogIioiLA0KICAgICAgICBoYW5kbGVXaW5kb3dSZXNpemU6ICEwDQogICAgfQ0KICAgICAgLCBuZSA9IHsNCiAgICAgICAgaGVhZGVyOiB7DQogICAgICAgICAgICBsZWZ0OiAibmV4dCxwcmV2IHRvZGF5IiwNCiAgICAgICAgICAgIGNlbnRlcjogIiIsDQogICAgICAgICAgICByaWdodDogInRpdGxlIg0KICAgICAgICB9LA0KICAgICAgICBidXR0b25UZXh0OiB7DQogICAgICAgICAgICBwcmV2OiAiPHNwYW4gY2xhc3M9J2ZjLXRleHQtYXJyb3cnPiZyc2FxdW87PC9zcGFuPiIsDQogICAgICAgICAgICBuZXh0OiAiPHNwYW4gY2xhc3M9J2ZjLXRleHQtYXJyb3cnPiZsc2FxdW87PC9zcGFuPiIsDQogICAgICAgICAgICBwcmV2WWVhcjogIjxzcGFuIGNsYXNzPSdmYy10ZXh0LWFycm93Jz4mcmFxdW87PC9zcGFuPiIsDQogICAgICAgICAgICBuZXh0WWVhcjogIjxzcGFuIGNsYXNzPSdmYy10ZXh0LWFycm93Jz4mbGFxdW87PC9zcGFuPiINCiAgICAgICAgfSwNCiAgICAgICAgYnV0dG9uSWNvbnM6IHsNCiAgICAgICAgICAgIHByZXY6ICJjaXJjbGUtdHJpYW5nbGUtZSIsDQogICAgICAgICAgICBuZXh0OiAiY2lyY2xlLXRyaWFuZ2xlLXciDQogICAgICAgIH0NCiAgICB9DQogICAgICAsIHJlID0gU2UuZnVsbENhbGVuZGFyID0gew0KICAgICAgICB2ZXJzaW9uOiAiMS42LjQiDQogICAgfQ0KICAgICAgLCBvZSA9IHJlLnZpZXdzID0ge307DQogICAgU2UuZm4uZnVsbENhbGVuZGFyID0gZnVuY3Rpb24oYSkgew0KICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGEpIHsNCiAgICAgICAgICAgIHZhciBvLCBsID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgdmFyIGUgPSBTZS5kYXRhKHRoaXMsICJmdWxsQ2FsZW5kYXIiKTsNCiAgICAgICAgICAgICAgICBpZiAoZSAmJiBTZS5pc0Z1bmN0aW9uKGVbYV0pKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZVthXS5hcHBseShlLCBsKTsNCiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBvICYmIChvID0gdCksDQogICAgICAgICAgICAgICAgICAgICJkZXN0cm95IiA9PSBhICYmIFNlLnJlbW92ZURhdGEodGhpcywgImZ1bGxDYWxlbmRhciIpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSksDQogICAgICAgICAgICB2b2lkIDAgPT09IG8gPyB0aGlzIDogbw0KICAgICAgICB9DQogICAgICAgIGEgPSBhIHx8IHt9Ow0KICAgICAgICB2YXIgdCA9IGEuZXZlbnRTb3VyY2VzIHx8IFtdOw0KICAgICAgICByZXR1cm4gZGVsZXRlIGEuZXZlbnRTb3VyY2VzLA0KICAgICAgICBhLmV2ZW50cyAmJiAodC5wdXNoKGEuZXZlbnRzKSwNCiAgICAgICAgZGVsZXRlIGEuZXZlbnRzKSwNCiAgICAgICAgYSA9IFNlLmV4dGVuZCghMCwge30sIHNlLCBhLmlzUlRMIHx8IHZvaWQgMCA9PT0gYS5pc1JUTCAmJiBzZS5pc1JUTCA/IG5lIDoge30sIGEpLA0KICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oZSwgbikgew0KICAgICAgICAgICAgdmFyIHMgPSBTZShuKQ0KICAgICAgICAgICAgICAsIHIgPSBuZXcgTWUocyxhLHQpOw0KICAgICAgICAgICAgcy5kYXRhKCJmdWxsQ2FsZW5kYXIiLCByKSwNCiAgICAgICAgICAgIHIucmVuZGVyKCkNCiAgICAgICAgfSksDQogICAgICAgIHRoaXMNCiAgICB9DQogICAgLA0KICAgIHJlLnNvdXJjZU5vcm1hbGl6ZXJzID0gW10sDQogICAgcmUuc291cmNlRmV0Y2hlcnMgPSBbXTsNCiAgICB2YXIgZCA9IHsNCiAgICAgICAgZGF0YVR5cGU6ICJqc29uIiwNCiAgICAgICAgY2FjaGU6ICExDQogICAgfQ0KICAgICAgLCBsZSA9IDE7DQogICAgcmUuYWRkRGF5cyA9IGtlLA0KICAgIHJlLmNsb25lRGF0ZSA9IHplLA0KICAgIHJlLnBhcnNlRGF0ZSA9IGwsDQogICAgcmUucGFyc2VJU084NjAxID0gZywNCiAgICByZS5wYXJzZVRpbWUgPSBlLA0KICAgIHJlLmZvcm1hdERhdGUgPSBwLA0KICAgIHJlLmZvcm1hdERhdGVzID0gdTsNCiAgICB2YXIgZGUgPSBbInN1biIsICJtb24iLCAidHVlIiwgIndlZCIsICJ0aHUiLCAiZnJpIiwgInNhdCJdDQogICAgICAsIGNlID0gew0KICAgICAgICBzOiBmdW5jdGlvbih0KSB7DQogICAgICAgICAgICByZXR1cm4gdC5nZXRTZWNvbmRzKCkNCiAgICAgICAgfSwNCiAgICAgICAgc3M6IGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgIHJldHVybiB6KHQuZ2V0U2Vjb25kcygpKQ0KICAgICAgICB9LA0KICAgICAgICBtOiBmdW5jdGlvbih0KSB7DQogICAgICAgICAgICByZXR1cm4gdC5nZXRNaW51dGVzKCkNCiAgICAgICAgfSwNCiAgICAgICAgbW06IGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgIHJldHVybiB6KHQuZ2V0TWludXRlcygpKQ0KICAgICAgICB9LA0KICAgICAgICBoOiBmdW5jdGlvbih0KSB7DQogICAgICAgICAgICByZXR1cm4gdC5nZXRIb3VycygpICUgMTIgfHwgMTINCiAgICAgICAgfSwNCiAgICAgICAgaGg6IGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgIHJldHVybiB6KHQuZ2V0SG91cnMoKSAlIDEyIHx8IDEyKQ0KICAgICAgICB9LA0KICAgICAgICBIOiBmdW5jdGlvbih0KSB7DQogICAgICAgICAgICByZXR1cm4gdC5nZXRIb3VycygpDQogICAgICAgIH0sDQogICAgICAgIEhIOiBmdW5jdGlvbih0KSB7DQogICAgICAgICAgICByZXR1cm4geih0LmdldEhvdXJzKCkpDQogICAgICAgIH0sDQogICAgICAgIGQ6IGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgIHJldHVybiB0LmdldERhdGUoKQ0KICAgICAgICB9LA0KICAgICAgICBkZDogZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgcmV0dXJuIHoodC5nZXREYXRlKCkpDQogICAgICAgIH0sDQogICAgICAgIGRkZDogZnVuY3Rpb24oYSwgZSkgew0KICAgICAgICAgICAgcmV0dXJuIGUuZGF5TmFtZXNTaG9ydFthLmdldERheSgpXQ0KICAgICAgICB9LA0KICAgICAgICBkZGRkOiBmdW5jdGlvbihhLCBlKSB7DQogICAgICAgICAgICByZXR1cm4gZS5kYXlOYW1lc1thLmdldERheSgpXQ0KICAgICAgICB9LA0KICAgICAgICBNOiBmdW5jdGlvbih0KSB7DQogICAgICAgICAgICByZXR1cm4gdC5nZXRNb250aCgpICsgMQ0KICAgICAgICB9LA0KICAgICAgICBNTTogZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgcmV0dXJuIHoodC5nZXRNb250aCgpICsgMSkNCiAgICAgICAgfSwNCiAgICAgICAgTU1NOiBmdW5jdGlvbihhLCBlKSB7DQogICAgICAgICAgICByZXR1cm4gZS5tb250aE5hbWVzU2hvcnRbYS5nZXRNb250aCgpXQ0KICAgICAgICB9LA0KICAgICAgICBNTU1NOiBmdW5jdGlvbihhLCBlKSB7DQogICAgICAgICAgICByZXR1cm4gZS5tb250aE5hbWVzW2EuZ2V0TW9udGgoKV0NCiAgICAgICAgfSwNCiAgICAgICAgeXk6IGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgIHJldHVybiAodC5nZXRGdWxsWWVhcigpICsgIiIpLnN1YnN0cmluZygyKQ0KICAgICAgICB9LA0KICAgICAgICB5eXl5OiBmdW5jdGlvbih0KSB7DQogICAgICAgICAgICByZXR1cm4gdC5nZXRGdWxsWWVhcigpDQogICAgICAgIH0sDQogICAgICAgIHQ6IGZ1bmN0aW9uKHQpIHsNCiAgICAgICAgICAgIHJldHVybiAxMiA+IHQuZ2V0SG91cnMoKSA/ICJhIiA6ICJwIg0KICAgICAgICB9LA0KICAgICAgICB0dDogZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgcmV0dXJuIDEyID4gdC5nZXRIb3VycygpID8gImFtIiA6ICJwbSINCiAgICAgICAgfSwNCiAgICAgICAgVDogZnVuY3Rpb24odCkgew0KICAgICAgICAgICAgcmV0dXJuIDEyID4gdC5nZXRIb3VycygpID8gIkEiIDogIlAiDQogICAgICAgIH0sDQogICAgICAgIFRUOiBmdW5jdGlvbih0KSB7DQogICAgICAgICAgICByZXR1cm4gMTIgPiB0LmdldEhvdXJzKCkgPyAiQU0iIDogIlBNIg0KICAgICAgICB9LA0KICAgICAgICB1OiBmdW5jdGlvbih0KSB7DQogICAgICAgICAgICByZXR1cm4gcCh0LCAieXl5eS1NTS1kZCdUJ0hIOm1tOnNzJ1onIikNCiAgICAgICAgfSwNCiAgICAgICAgUzogZnVuY3Rpb24oYSkgew0KICAgICAgICAgICAgdmFyIGUgPSBhLmdldERhdGUoKTsNCiAgICAgICAgICAgIHJldHVybiAxMCA8IGUgJiYgMjAgPiBlID8gInRoIiA6IFsic3QiLCAibmQiLCAicmQiXVtlICUgMTAgLSAxXSB8fCAidGgiDQogICAgICAgIH0sDQogICAgICAgIHc6IGZ1bmN0aW9uKGEsIGUpIHsNCiAgICAgICAgICAgIHJldHVybiBlLndlZWtOdW1iZXJDYWxjdWxhdGlvbihhKQ0KICAgICAgICB9LA0KICAgICAgICBXOiBmdW5jdGlvbihhKSB7DQogICAgICAgICAgICByZXR1cm4gdChhKQ0KICAgICAgICB9DQogICAgfTsNCiAgICByZS5kYXRlRm9ybWF0dGVycyA9IGNlLA0KICAgIHJlLmFwcGx5QWxsID0gQSwNCiAgICBvZS5tb250aCA9IGZ1bmN0aW9uKG8sIGUpIHsNCiAgICAgICAgdmFyIGkgPSB0aGlzOw0KICAgICAgICBpLnJlbmRlciA9IGZ1bmN0aW9uKG8sIGUpIHsNCiAgICAgICAgICAgIGUgJiYgKHhlKG8sIGUpLA0KICAgICAgICAgICAgby5zZXREYXRlKDEpKTsNCiAgICAgICAgICAgIHZhciBhID0gbigiZmlyc3REYXkiKQ0KICAgICAgICAgICAgICAsIGQgPSB6ZShvLCAhMCk7DQogICAgICAgICAgICBkLnNldERhdGUoMSk7DQogICAgICAgICAgICB2YXIgYyA9IHhlKHplKGQpLCAxKQ0KICAgICAgICAgICAgICAsIGcgPSB6ZShkKTsNCiAgICAgICAgICAgIGtlKGcsIC0oKGcuZ2V0RGF5KCkgLSBhICsgNykgJSA3KSksDQogICAgICAgICAgICBzKGcpOw0KICAgICAgICAgICAgdmFyIHAgPSB6ZShjKTsNCiAgICAgICAgICAgIGtlKHAsICg3IC0gcC5nZXREYXkoKSArIGEpICUgNyksDQogICAgICAgICAgICBzKHAsIC0xLCAhMCk7DQogICAgICAgICAgICB2YXIgdSA9IHIoKQ0KICAgICAgICAgICAgICAsIGYgPSBNYXRoLnJvdW5kKGgocCwgZykgLyA3KTsNCiAgICAgICAgICAgICJmaXhlZCIgPT0gbigid2Vla01vZGUiKSAmJiAoa2UocCwgNyAqICg2IC0gZikpLA0KICAgICAgICAgICAgZiA9IDYpLA0KICAgICAgICAgICAgaS50aXRsZSA9IGwoZCwgbigidGl0bGVGb3JtYXQiKSksDQogICAgICAgICAgICBpLnN0YXJ0ID0gZCwNCiAgICAgICAgICAgIGkuZW5kID0gYywNCiAgICAgICAgICAgIGkudmlzU3RhcnQgPSBnLA0KICAgICAgICAgICAgaS52aXNFbmQgPSBwLA0KICAgICAgICAgICAgdChmLCB1LCAhMCkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIF8uY2FsbChpLCBvLCBlLCAibW9udGgiKTsNCiAgICAgICAgdmFyIG4gPSBpLm9wdA0KICAgICAgICAgICwgdCA9IGkucmVuZGVyQmFzaWMNCiAgICAgICAgICAsIHMgPSBpLnNraXBIaWRkZW5EYXlzDQogICAgICAgICAgLCByID0gaS5nZXRDZWxsc1BlcldlZWsNCiAgICAgICAgICAsIGwgPSBlLmZvcm1hdERhdGUNCiAgICB9DQogICAgLA0KICAgIG9lLmJhc2ljV2VlayA9IGZ1bmN0aW9uKG8sIGUpIHsNCiAgICAgICAgdmFyIGggPSB0aGlzOw0KICAgICAgICBoLnJlbmRlciA9IGZ1bmN0aW9uKG8sIGUpIHsNCiAgICAgICAgICAgIGUgJiYga2UobywgNyAqIGUpOw0KICAgICAgICAgICAgdmFyIGEgPSBrZSh6ZShvKSwgLSgoby5nZXREYXkoKSAtIG4oImZpcnN0RGF5IikgKyA3KSAlIDcpKQ0KICAgICAgICAgICAgICAsIGwgPSBrZSh6ZShhKSwgNykNCiAgICAgICAgICAgICAgLCBkID0gemUoYSk7DQogICAgICAgICAgICBzKGQpOw0KICAgICAgICAgICAgdmFyIGMgPSB6ZShsKTsNCiAgICAgICAgICAgIHMoYywgLTEsICEwKTsNCiAgICAgICAgICAgIHZhciBnID0gcigpOw0KICAgICAgICAgICAgaC5zdGFydCA9IGEsDQogICAgICAgICAgICBoLmVuZCA9IGwsDQogICAgICAgICAgICBoLnZpc1N0YXJ0ID0gZCwNCiAgICAgICAgICAgIGgudmlzRW5kID0gYywNCiAgICAgICAgICAgIGgudGl0bGUgPSBpKGQsIGtlKHplKGMpLCAtMSksIG4oInRpdGxlRm9ybWF0IikpLA0KICAgICAgICAgICAgdCgxLCBnLCAhMSkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIF8uY2FsbChoLCBvLCBlLCAiYmFzaWNXZWVrIik7DQogICAgICAgIHZhciBuID0gaC5vcHQNCiAgICAgICAgICAsIHQgPSBoLnJlbmRlckJhc2ljDQogICAgICAgICAgLCBzID0gaC5za2lwSGlkZGVuRGF5cw0KICAgICAgICAgICwgciA9IGguZ2V0Q2VsbHNQZXJXZWVrDQogICAgICAgICAgLCBpID0gZS5mb3JtYXREYXRlcw0KICAgIH0NCiAgICAsDQogICAgb2UuYmFzaWNEYXkgPSBmdW5jdGlvbihvLCBlKSB7DQogICAgICAgIHZhciBjID0gdGhpczsNCiAgICAgICAgYy5yZW5kZXIgPSBmdW5jdGlvbihvLCBlKSB7DQogICAgICAgICAgICBlICYmIGtlKG8sIGUpLA0KICAgICAgICAgICAgcyhvLCAwID4gZSA/IC0xIDogMSk7DQogICAgICAgICAgICB2YXIgYSA9IHplKG8sICEwKQ0KICAgICAgICAgICAgICAsIGwgPSBrZSh6ZShhKSwgMSk7DQogICAgICAgICAgICBjLnRpdGxlID0gcihvLCBuKCJ0aXRsZUZvcm1hdCIpKSwNCiAgICAgICAgICAgIGMuc3RhcnQgPSBjLnZpc1N0YXJ0ID0gYSwNCiAgICAgICAgICAgIGMuZW5kID0gYy52aXNFbmQgPSBsLA0KICAgICAgICAgICAgdCgxLCAxLCAhMSkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIF8uY2FsbChjLCBvLCBlLCAiYmFzaWNEYXkiKTsNCiAgICAgICAgdmFyIG4gPSBjLm9wdA0KICAgICAgICAgICwgdCA9IGMucmVuZGVyQmFzaWMNCiAgICAgICAgICAsIHMgPSBjLnNraXBIaWRkZW5EYXlzDQogICAgICAgICAgLCByID0gZS5mb3JtYXREYXRlDQogICAgfQ0KICAgICwNCiAgICBhKHsNCiAgICAgICAgd2Vla01vZGU6ICJmaXhlZCINCiAgICB9KSwNCiAgICBvZS5hZ2VuZGFXZWVrID0gZnVuY3Rpb24obywgZSkgew0KICAgICAgICB2YXIgaCA9IHRoaXM7DQogICAgICAgIGgucmVuZGVyID0gZnVuY3Rpb24obywgZSkgew0KICAgICAgICAgICAgZSAmJiBrZShvLCA3ICogZSk7DQogICAgICAgICAgICB2YXIgYSA9IGtlKHplKG8pLCAtKChvLmdldERheSgpIC0gbigiZmlyc3REYXkiKSArIDcpICUgNykpDQogICAgICAgICAgICAgICwgbCA9IGtlKHplKGEpLCA3KQ0KICAgICAgICAgICAgICAsIGQgPSB6ZShhKTsNCiAgICAgICAgICAgIHMoZCk7DQogICAgICAgICAgICB2YXIgYyA9IHplKGwpOw0KICAgICAgICAgICAgcyhjLCAtMSwgITApOw0KICAgICAgICAgICAgdmFyIGcgPSByKCk7DQogICAgICAgICAgICBoLnRpdGxlID0gaShkLCBrZSh6ZShjKSwgLTEpLCBuKCJ0aXRsZUZvcm1hdCIpKSwNCiAgICAgICAgICAgIGguc3RhcnQgPSBhLA0KICAgICAgICAgICAgaC5lbmQgPSBsLA0KICAgICAgICAgICAgaC52aXNTdGFydCA9IGQsDQogICAgICAgICAgICBoLnZpc0VuZCA9IGMsDQogICAgICAgICAgICB0KGcpDQogICAgICAgIH0NCiAgICAgICAgLA0KICAgICAgICBxLmNhbGwoaCwgbywgZSwgImFnZW5kYVdlZWsiKTsNCiAgICAgICAgdmFyIG4gPSBoLm9wdA0KICAgICAgICAgICwgdCA9IGgucmVuZGVyQWdlbmRhDQogICAgICAgICAgLCBzID0gaC5za2lwSGlkZGVuRGF5cw0KICAgICAgICAgICwgciA9IGguZ2V0Q2VsbHNQZXJXZWVrDQogICAgICAgICAgLCBpID0gZS5mb3JtYXREYXRlcw0KICAgIH0NCiAgICAsDQogICAgb2UuYWdlbmRhRGF5ID0gZnVuY3Rpb24obywgZSkgew0KICAgICAgICB2YXIgYyA9IHRoaXM7DQogICAgICAgIGMucmVuZGVyID0gZnVuY3Rpb24obywgZSkgew0KICAgICAgICAgICAgZSAmJiBrZShvLCBlKSwNCiAgICAgICAgICAgIHMobywgMCA+IGUgPyAtMSA6IDEpOw0KICAgICAgICAgICAgdmFyIGEgPSB6ZShvLCAhMCkNCiAgICAgICAgICAgICAgLCBsID0ga2UoemUoYSksIDEpOw0KICAgICAgICAgICAgYy50aXRsZSA9IHIobywgbigidGl0bGVGb3JtYXQiKSksDQogICAgICAgICAgICBjLnN0YXJ0ID0gYy52aXNTdGFydCA9IGEsDQogICAgICAgICAgICBjLmVuZCA9IGMudmlzRW5kID0gbCwNCiAgICAgICAgICAgIHQoMSkNCiAgICAgICAgfQ0KICAgICAgICAsDQogICAgICAgIHEuY2FsbChjLCBvLCBlLCAiYWdlbmRhRGF5Iik7DQogICAgICAgIHZhciBuID0gYy5vcHQNCiAgICAgICAgICAsIHQgPSBjLnJlbmRlckFnZW5kYQ0KICAgICAgICAgICwgcyA9IGMuc2tpcEhpZGRlbkRheXMNCiAgICAgICAgICAsIHIgPSBlLmZvcm1hdERhdGUNCiAgICB9DQogICAgLA0KICAgIGEoew0KICAgICAgICBhbGxEYXlTbG90OiAhMCwNCiAgICAgICAgYWxsRGF5VGV4dDogImFsbC1kYXkiLA0KICAgICAgICBmaXJzdEhvdXI6IDYsDQogICAgICAgIHNsb3RNaW51dGVzOiAzMCwNCiAgICAgICAgZGVmYXVsdEV2ZW50TWludXRlczogMTIwLA0KICAgICAgICBheGlzRm9ybWF0OiAiaCg6bW0pdHQiLA0KICAgICAgICB0aW1lRm9ybWF0OiB7DQogICAgICAgICAgICBhZ2VuZGE6ICJoOm1teyAtIGg6bW19Ig0KICAgICAgICB9LA0KICAgICAgICBkcmFnT3BhY2l0eTogew0KICAgICAgICAgICAgYWdlbmRhOiAuNQ0KICAgICAgICB9LA0KICAgICAgICBtaW5UaW1lOiAwLA0KICAgICAgICBtYXhUaW1lOiAyNCwNCiAgICAgICAgc2xvdEV2ZW50T3ZlcmxhcDogITANCiAgICB9KQ0KfQ0KKShqUXVlcnkpOw0K]]></Resource>
    <Resource ID="e9bf2264-1626-4bfe-cfb5-16b02bc0a592" Name="Icon" Type="jpg"><![CDATA[iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJ
			bWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdp
			bj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6
			eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEz
			NDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJo
			dHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlw
			dGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAv
			IiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RS
			ZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpD
			cmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlE
			PSJ4bXAuaWlkOkE3RUYwODVGMjQ5NTExRTFCQTAxRjk4OUQyNkQ4QjREIiB4bXBNTTpEb2N1bWVu
			dElEPSJ4bXAuZGlkOkE3RUYwODYwMjQ5NTExRTFCQTAxRjk4OUQyNkQ4QjREIj4gPHhtcE1NOkRl
			cml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTdFRjA4NUQyNDk1MTFFMUJBMDFG
			OTg5RDI2RDhCNEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTdFRjA4NUUyNDk1MTFFMUJB
			MDFGOTg5RDI2RDhCNEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1l
			dGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MtuiCAAACGElEQVR42kxSS2gUQRDt3oyE7AjJkpWFXXPQ
			qwc95CKigh4EPXnwoATFgyh+I+LVq4jgJwkSjYKniKDgWRBR/B2E4ElENAFdNcvOoomMO931sapn
			EraZaWaq3qv3qrpt6/Flw8Tgyf2Tx6BnIqOLTb6Y9UVkAWRp5FoLhkAIDI4JC5CVVTKrDAQlQCaY
			CDpN+VeRUElx1ppSX0GwNqDB6O6ZKcL0z0olq1upT9HCtiUVJFQCgRGfrPq2nULwqJZVhqyE705d
			O3rqPOeibFCyHJJkohwqbTLKpwWJBjkMcCxI+kGsMPtz2d2euGF61uGT4xxo9960Hs0lEtnciC/t
			HZH6SGx/LDu1Zyxxrq5DzW1cedq8uLvx6svS1WfNQ6PVfZuGlrpQAhIhC8RI5ImEhmRmp29Ktxd2
			1QGpf01wSOwAZt8nkRS8f+t6r6UDx87I7lENSKNPPnTWrY22bSjPfUvnkyyS6Njxc+rB5J0RhK6F
			AMiTL359TbLxndWNw/3Tr9vffzv7ud1ldaVDgDA7IYgTAJp6ubjQcWd3DG9pxOsrsXgBIvup1X0w
			M9Frac/YCQ/4bv7vnbfJavD09trB0apo2o+LKYWeZCzSutR2Hp8/nNm6/4hMoD40MFKJQVPk0Tjk
			CLm4maJIGkUPoGNBqlfK9Uqcya2TESlashzlh6+nyGEscnFIa9QGy7XBgS4UhQXqSff/AgwALvPF
			NxWnjTQAAAAASUVORK5CYII=]]></Resource>
    <Resource ID="da71b545-59a4-484b-af46-5413a062d78c" Name="fullcalendar-utils.js" Type="js"><![CDATA[ZnVuY3Rpb24gcGFyc2VScnVsZVNvdXJjZXMoc291cmNlcykgewogIGZ1bmN0aW9uIGZvcm1hdGVkRGF0ZShkYXRlKSB7CglsZXQgdHogPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMDsKCWxldCBsb2NhbERhdGUgPSAobmV3IERhdGUoZGF0ZSAtIHR6KSkudG9JU09TdHJpbmcoKTsKCXJldHVybiBsb2NhbERhdGU7CgkvLyByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpOwogIH0KCiAgdmFyIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHNvdXJjZXMuc3RhcnQgfHwgMCk7CiAgdmFyIGVuZERhdGUgPSBuZXcgRGF0ZShzb3VyY2VzLmVuZCB8fCAwKTsKICB2YXIgZXZlbnRTb3VyY2VzID0gW107CiAgdmFyIHNvdXJjZSA9IHNvdXJjZXMuc291cmNlIHx8IFtdOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykgewoJdmFyIGNhbCA9IHNvdXJjZVtpXTsKCXZhciBjb2xvciA9IGNhbC5jb2xvcjsKCXZhciB0ZXh0Q29sb3IgPSBjYWwudGV4dENvbG9yOwoJdmFyIGJvcmRlckNvbG9yID0gY2FsLmJvcmRlckNvbG9yOwoKCWZvciAodmFyIGogPSAwOyBqIDwgY2FsLmV2ZW50cy5sZW5ndGg7IGorKykgewoJICB2YXIgZXZlbnQgPSBjYWwuZXZlbnRzW2pdIHx8IFtdOwoJICBldmVudC50ZXh0Q29sb3IgPSB0ZXh0Q29sb3IgfHwgIiI7CgkgIGV2ZW50LmJvcmRlckNvbG9yID0gYm9yZGVyQ29sb3IgfHwgIiI7CgkgIGV2ZW50LmNvbG9yID0gY29sb3IgfHwgIiI7CgoJICBpZiAoZXZlbnQuaGFzT3duUHJvcGVydHkoInJydWxlIikgJiYgZXZlbnQucnJ1bGUgIT0gbnVsbCkgewoJCXZhciBldmVudF9zdGFydCA9IG5ldyBEYXRlKGV2ZW50LnN0YXJ0IHx8IDApOwoJCXZhciBldmVudF9lbmQgPSBuZXcgRGF0ZShldmVudC5lbmQgfHwgMCk7CgkJdmFyIGRlbHRhID0gZXZlbnRfZW5kLmdldFRpbWUoKSAtIGV2ZW50X3N0YXJ0LmdldFRpbWUoKTsKCQl2YXIgc2NoID0gbmV3IFNjaGVkdWxlcihldmVudF9zdGFydCwgZXZlbnQucnJ1bGUudG9VcHBlckNhc2UoKSk7CgoJCWlmIChldmVudC5oYXNPd25Qcm9wZXJ0eSgiZXhkYXRlcyIpICYmIGV2ZW50LmV4ZGF0ZXMgIT0gbnVsbCkgewoJCSAgdmFyIGV4ZGF0ZXMgPSBbXTsKCQkgIGZvciAodmFyIGsgPSAwOyBrIDwgZXZlbnQuZXhkYXRlcy5sZW5ndGg7IGsrKykKCQkJZXhkYXRlcy5wdXNoKG5ldyBEYXRlKGV2ZW50LmV4ZGF0ZXNba10pKTsKCQkgIHNjaC5hZGRfZXhjZXB0aW9uX2RhdGVzKGV4ZGF0ZXMpOwoJCX0KCgkJdmFyIG9jY3VycmVuY2VzID0gc2NoLm9jY3VycmVuY2VzX2JldHdlZW4oc3RhcnREYXRlLCBlbmREYXRlKTsKCgkJZm9yICh2YXIgayA9IDA7IGsgPCBvY2N1cnJlbmNlcy5sZW5ndGg7IGsrKykgewoJCSAgdmFyIGNvcHkgPSB7fTsKCQkgIGpRdWVyeS5leHRlbmQoY29weSwgZXZlbnQpOwoJCSAgdmFyIHRfc3RhcnQgPSBvY2N1cnJlbmNlc1trXTsKCQkgIGNvcHkuc3RhcnQgPSBmb3JtYXRlZERhdGUodF9zdGFydCk7CgkJICBjb3B5Lmluc3RhbmNlID0gayArIDE7CgkJICBjb3B5LmVuZCA9IGZvcm1hdGVkRGF0ZShuZXcgRGF0ZSh0X3N0YXJ0LmdldFRpbWUoKSArIGRlbHRhKSk7CgkJICBldmVudFNvdXJjZXMucHVzaChjb3B5KTsKCQl9CgkgIH0gZWxzZSB7CgkJZXZlbnQuc3RhcnQgPSBmb3JtYXRlZERhdGUobmV3IERhdGUoZXZlbnQuc3RhcnQgfHwgMCkpOwoJCWV2ZW50LmVuZCA9IGZvcm1hdGVkRGF0ZShuZXcgRGF0ZShldmVudC5lbmQgfHwgMCkpOwoJCWV2ZW50U291cmNlcy5wdXNoKGV2ZW50KTsKCSAgfQoJfQogIH0KCiAgcmV0dXJuIGV2ZW50U291cmNlczsKfQo=]]></Resource>
    <Resource ID="d1e1abad-b15d-450e-b769-4fe10ccb02af" Name="rrecur-parser.js" Type="js"><![CDATA[Ly8gdXNlZCBmb3IgSUUgPCA5DQovLyBhZGFwdGVkIGZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvaW5kZXhPZg0KaWYgKCFBcnJheS5wcm90b3R5cGUuaW5kZXhPZikNCnsNCglBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uKGVsdCAvKiwgZnJvbSovKQ0KCXsNCgkJdmFyIGxlbiA9IHRoaXMubGVuZ3RoID4+PiAwOw0KDQoJCXZhciBmcm9tID0gTnVtYmVyKGFyZ3VtZW50c1sxXSkgfHwgMDsNCgkJZnJvbSA9IChmcm9tIDwgMCkNCgkJCT8gTWF0aC5jZWlsKGZyb20pDQoJCQk6IE1hdGguZmxvb3IoZnJvbSk7DQoJCWlmIChmcm9tIDwgMCkNCgkJCWZyb20gKz0gbGVuOw0KDQoJCWZvciAoOyBmcm9tIDwgbGVuOyBmcm9tKyspDQoJCXsNCgkJCWlmIChmcm9tIGluIHRoaXMgJiYNCgkJCQl0aGlzW2Zyb21dID09PSBlbHQpDQoJCQkJcmV0dXJuIGZyb207DQoJCX0NCgkJcmV0dXJuIC0xOw0KCX07DQp9DQoNCkFycmF5LnByb3RvdHlwZS5pbl9hcnJheSA9IGZ1bmN0aW9uKHRlc3RfdmFyKSB7IC8vIHVzZWZ1bCBtZXRob2QgZm9yICJjbGFzcyIgQXJyYXkNCiAgICByZXR1cm4gdGhpcy5pbmRleE9mKHRlc3RfdmFyLCAwKSAhPSAtMTsNCn0NCg0KRGF0ZS5jb3VudE1vbnRoRGF5cyA9IGZ1bmN0aW9uKHksIG0pIHsgLy8gbSA6IDAtPjExDQogICAgcmV0dXJuIChuZXcgRGF0ZSh5LCBtICsgMSwgMCkpLmdldERhdGUoKTsNCn0NCg0KRGF0ZS5maW5kTnRoV2Vla0RheXMgPSBmdW5jdGlvbih5LCBtLCBudGgsIHdlZWtfZGF5KSB7IC8vIG0gOiBmYWxzZSBvciAwLT4xMSwgd2Vla19kYXkgOiAwLT5TVSwgMS0+TU8sIC4uLiwgbnRoIDogTiAoTnRoIGZyb20gc3RhcnQgb2YgbW9udGgpLCAtTiAoTnRoIGZyb20gZW5kIG9mIG1vbnRoKSwgMCAoYWxsKQ0KICAgIHZhciBkYXRlcyA9IFtdOw0KICAgIGlmIChudGggPj0gMCkgeyANCiAgICAgICAgaWYgKG0gPT09IGZhbHNlKSB7IC8vIGZyb20gc3RhcnQgb2YgeWVhcg0KICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh5LCAwLCAxKTsNCiAgICAgICAgICAgIHZhciBlbmRfeWVhcl90cyA9IG5ldyBEYXRlKHkgKyAxLCAwLCAxKS5nZXRUaW1lKCk7DQogICAgICAgICAgICB2YXIgY291bnQgPSAwOw0KICAgICAgICAgICAgd2hpbGUgKGRhdGUuZ2V0VGltZSgpIDwgZW5kX3llYXJfdHMpIHsNCiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5nZXREYXkoKSA9PSB3ZWVrX2RheSkgew0KICAgICAgICAgICAgICAgICAgICBjb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICBpZiAobnRoID09IDAgfHwgY291bnQgPT0gbnRoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRlcy5wdXNoKGRhdGUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkrMSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7IC8vIGZyb20gc3RhcnQgb2YgbW9udGgNCiAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSh5LCBtLCAxKTsNCiAgICAgICAgICAgIHZhciBlbmRfbW9udGhfdHMgPSBuZXcgRGF0ZSh5LCBtICsgMSwgMSkuZ2V0VGltZSgpOw0KICAgICAgICAgICAgY291bnQgPSAwOw0KICAgICAgICAgICAgd2hpbGUgKGRhdGUuZ2V0VGltZSgpIDwgZW5kX21vbnRoX3RzKSB7DQogICAgICAgICAgICAgICAgaWYgKGRhdGUuZ2V0RGF5KCkgPT0gd2Vla19kYXkpIHsNCiAgICAgICAgICAgICAgICAgICAgY291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG50aCA9PSAwIHx8IGNvdW50ID09IG50aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZXMucHVzaChkYXRlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIGRhdGUuZ2V0RGF0ZSgpKzEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgIH0gZWxzZSBpZiAobnRoIDwgMCkgew0KICAgICAgICBpZiAobSA9PT0gZmFsc2UpIHsgLy8gZnJvbSBlbmQgb2YgeWVhcg0KICAgICAgICAgICAgbnRoID0gTWF0aC5hYnMobnRoKTsNCiAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSh5ICsgMSwgMCwgMCk7DQogICAgICAgICAgICB2YXIgYmVnaW5feWVhcl90cyA9IG5ldyBEYXRlKHksIDAsIDEpLmdldFRpbWUoKTsNCiAgICAgICAgICAgIGNvdW50ID0gMDsNCiAgICAgICAgICAgIHdoaWxlIChkYXRlLmdldFRpbWUoKSA+PSBiZWdpbl95ZWFyX3RzKSB7DQogICAgICAgICAgICAgICAgaWYgKGRhdGUuZ2V0RGF5KCkgPT0gd2Vla19kYXkpIHsNCiAgICAgICAgICAgICAgICAgICAgY291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG50aCA9PSAwIHx8IGNvdW50ID09IG50aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZXMucHVzaChkYXRlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIGRhdGUuZ2V0RGF0ZSgpLTEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgeyAvLyBmcm9tIGVuZCBvZiBtb250aA0KICAgICAgICAgICAgbnRoID0gTWF0aC5hYnMobnRoKTsNCiAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZSh5LCBtICsgMSwgMCk7DQogICAgICAgICAgICB2YXIgYmVnaW5fbW9udGhfdHMgPSBuZXcgRGF0ZSh5LCBtLCAxKS5nZXRUaW1lKCk7DQogICAgICAgICAgICBjb3VudCA9IDA7DQogICAgICAgICAgICB3aGlsZSAoZGF0ZS5nZXRUaW1lKCkgPj0gYmVnaW5fbW9udGhfdHMpIHsNCiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5nZXREYXkoKSA9PSB3ZWVrX2RheSkgew0KICAgICAgICAgICAgICAgICAgICBjb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICBpZiAobnRoID09IDAgfHwgY291bnQgPT0gbnRoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRlcy5wdXNoKGRhdGUpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCktMSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgfQ0KICAgIHJldHVybiBkYXRlczsNCn0NCg0KRGF0ZS5wcm90b3R5cGUuaXNTYW1lRGF0ZSA9IGZ1bmN0aW9uKG90aGVyX2RhdGUpIHsNCiAgICByZXR1cm4gb3RoZXJfZGF0ZSBpbnN0YW5jZW9mIERhdGUgJiYNCiAgICAgICAgdGhpcy5nZXRGdWxsWWVhcigpID09IG90aGVyX2RhdGUuZ2V0RnVsbFllYXIoKSAmJg0KICAgICAgICB0aGlzLmdldE1vbnRoKCkgPT0gb3RoZXJfZGF0ZS5nZXRNb250aCgpICYmDQogICAgICAgIHRoaXMuZ2V0RGF0ZSgpID09IG90aGVyX2RhdGUuZ2V0RGF0ZSgpOw0KICAgIA0KfQ0KDQpEYXRlLmZyb21XZWVrID0gZnVuY3Rpb24obnRoLCB5LCB3a2RheSl7IC8vIG50aCA6IG50aCB3ZWVrICgxIDogZmlyc3Qgd2Vlaykgb2YgdGhlIHllYXIgeSwgd2tkYXkgOiBkYXkgb2YgdGhlIHdlZWsgdG8gcmV0cmlldmUgKDAtPlNVLCAxLT5NTywgLi4uKQ0KICAgIG50aCA9IG50aCAtIDE7DQogICAgeSA9IHkgfHwgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOw0KICAgIHZhciBkMT0gbmV3IERhdGUoeSwgMCwgNCk7DQogICAgaWYgKHdrZGF5ID09IHVuZGVmaW5lZCkgd2tkYXkgPSAxOw0KICAgIHJldHVybiBkMS5uZXh0V2Vlayh3a2RheSwgbnRoKTsNCn0NCg0KRGF0ZS5wcm90b3R5cGUubmV4dFdlZWsgPSBmdW5jdGlvbih3ZCwgbnRoKXsgLy8gd2QgOiAwLT5TVSwgMS0+TU8sIC4uLiAoZGVmYXVsdCA6IHNhbWUgZGF5KSwgbnRoIDogaG93IG1hbnkgd2VlayB0byBhZGQgKGRlZmF1bHQgMSkNCiAgICBpZihudGg9PSB1bmRlZmluZWQpIG50aD0gMTsNCiAgICB2YXIgaW5jcj0gbnRoIDwgMD8gMTogLTEsDQogICAgRD0gbmV3IERhdGUodGhpcyksIGRkPSBELmdldERheSgpOw0KICAgIGlmKHdkPT0gdW5kZWZpbmVkKSB3ZD0gZGQ7DQogICAgd2hpbGUoRC5nZXREYXkoKSE9IHdkKSBELnNldERhdGUoRC5nZXREYXRlKCkrIGluY3IpOw0KICAgIEQuc2V0RGF0ZShELmdldERhdGUoKSsgNypudGgpOw0KICAgIHJldHVybiBEOw0KfQ0KDQovKioNCiogUmV0dXJucyB0aGUgd2VlayBudW1iZXIgZm9yIHRoaXMgZGF0ZS4gZG93T2Zmc2V0IGlzIHRoZSBkYXkgb2Ygd2VlayB0aGUgd2Vlaw0KKiAic3RhcnRzIiBvbiBmb3IgeW91ciBsb2NhbGUgLSBpdCBjYW4gYmUgZnJvbSAwIHRvIDYuIElmIGRvd09mZnNldCBpcyAxIChNb25kYXkpLA0KKiB0aGUgd2VlayByZXR1cm5lZCBpcyB0aGUgSVNPIDg2MDEgd2VlayBudW1iZXIuDQoqIEBwYXJhbSBkb3dPZmZzZXQNCiogQHJldHVybiBpbnQNCiovDQpEYXRlLnByb3RvdHlwZS5nZXRXZWVrTm8gPSBmdW5jdGlvbiAoZG93T2Zmc2V0KSB7IC8vIDAgLT4gd2tzdCBTVSwgMSAtPiB3a3N0IE1PDQogICAgLypnZXRXZWVrKCkgd2FzIGRldmVsb3BlZCBieSBOaWNrIEJhaWNvaWFudSBhdCBNZWFuRnJlZVBhdGg6IGh0dHA6Ly93d3cubWVhbmZyZWVwYXRoLmNvbSAqLw0KDQogICAgZG93T2Zmc2V0ID0gZG93T2Zmc2V0ICE9PSB1bmRlZmluZWQgPyBkb3dPZmZzZXQgOiAwOyAvL2RlZmF1bHQgZG93T2Zmc2V0IHRvIHplcm8NCiAgICB2YXIgbmV3WWVhciA9IG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSwwLDEpOw0KICAgIHZhciBkYXkgPSBuZXdZZWFyLmdldERheSgpIC0gZG93T2Zmc2V0OyAvL3RoZSBkYXkgb2Ygd2VlayB0aGUgeWVhciBiZWdpbnMgb24NCiAgICBkYXkgPSAoZGF5ID49IDAgPyBkYXkgOiBkYXkgKyA3KTsNCiAgICB2YXIgZGF5bnVtID0gTWF0aC5mbG9vcigodGhpcy5nZXRUaW1lKCkgLSBuZXdZZWFyLmdldFRpbWUoKSAtDQogICAgICAgICh0aGlzLmdldFRpbWV6b25lT2Zmc2V0KCktbmV3WWVhci5nZXRUaW1lem9uZU9mZnNldCgpKSo2MDAwMCkvODY0MDAwMDApICsgMTsNCiAgICB2YXIgd2Vla251bTsNCiAgICAvL2lmIHRoZSB5ZWFyIHN0YXJ0cyBiZWZvcmUgdGhlIG1pZGRsZSBvZiBhIHdlZWsNCiAgICBpZihkYXkgPCA0KSB7DQogICAgICAgIHdlZWtudW0gPSBNYXRoLmZsb29yKChkYXludW0rZGF5LTEpLzcpICsgMTsNCiAgICAgICAgaWYod2Vla251bSA+IDUyKSB7DQogICAgICAgICAgICB2YXIgblllYXIgPSBuZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCkgKyAxLDAsMSk7DQogICAgICAgICAgICB2YXIgbmRheSA9IG5ZZWFyLmdldERheSgpIC0gZG93T2Zmc2V0Ow0KICAgICAgICAgICAgbmRheSA9IG5kYXkgPj0gMCA/IG5kYXkgOiBuZGF5ICsgNzsNCiAgICAgICAgICAgIC8qaWYgdGhlIG5leHQgeWVhciBzdGFydHMgYmVmb3JlIHRoZSBtaWRkbGUgb2YNCiAgICAgICAgICAgIHRoZSB3ZWVrLCBpdCBpcyB3ZWVrICMxIG9mIHRoYXQgeWVhciovDQogICAgICAgICAgICB3ZWVrbnVtID0gbmRheSA8IDQgPyAxIDogNTM7DQogICAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgICB3ZWVrbnVtID0gTWF0aC5mbG9vcigoZGF5bnVtK2RheS0xKS83KTsNCiAgICB9DQogICAgcmV0dXJuIHdlZWtudW07DQp9Ow0KDQpTY2hlZHVsZXIgPSBmdW5jdGlvbihzdGFydF9kYXRlLCByZmNfcnJ1bGUsIHRlc3RfbW9kZSkgeyAvLyBTY2hlZHVsZXIgImNsYXNzIiAoZ2xvYmFsIHZpc2liaWxpdHkpDQogICAgdGhpcy5pbml0X3JlY3VycmVuY2VfcnVsZXMgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgLy8gbWFuZGF0b3J5DQogICAgICAgIHRoaXMucnJ1bGVfZnJlcSA9IGZhbHNlOw0KDQogICAgICAgIC8vIGJvdGggY291bnQgJiB1bnRpbCBhcmUgZm9yYmlkZGVuDQogICAgICAgIHRoaXMucnJ1bGVfY291bnQgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5ycnVsZV91bnRpbCA9IGZhbHNlOw0KDQogICAgICAgIC8vIGZhY3VsdGF0aXZlDQogICAgICAgIHRoaXMucnJ1bGVfaW50ZXJ2YWwgPSAxOw0KICAgICAgICB0aGlzLnJydWxlX2J5c2Vjb25kID0gZmFsc2U7DQogICAgICAgIHRoaXMucnJ1bGVfYnltaW51dGUgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5ycnVsZV9ieWhvdXIgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5ycnVsZV9ieWRheSA9IGZhbHNlOyAvLyArMSwgLTIsIGV0Yy4gb25seSBmb3IgbW9udGhseSBvciB5ZWFybHkNCiAgICAgICAgdGhpcy5ycnVsZV9ieW1vbnRoZGF5ID0gZmFsc2U7DQogICAgICAgIHRoaXMucnJ1bGVfYnl5ZWFyZGF5ID0gZmFsc2U7DQogICAgICAgIHRoaXMucnJ1bGVfYnl3ZWVrbm8gPSBmYWxzZTsgLy8gb25seSBmb3IgeWVhcmx5DQogICAgICAgIHRoaXMucnJ1bGVfYnltb250aCA9IGZhbHNlOw0KICAgICAgICB0aGlzLnJydWxlX2J5c2V0cG9zID0gZmFsc2U7IC8vIG9ubHkgaW4gY29uam9uY3Rpb24gd2l0aCBvdGhlcnMgQll4eHggcnVsZXMNCiAgICAgICAgdGhpcy5ycnVsZV93a3N0ID0gIk1PIjsgLy8gc2lnbmlmaWNhbnQgd2hlcmUgd2Vla2x5IGludGVydmFsID4gMSAmIHdoZXJlIHllYXJseSBieXdlZWtubyBpcyBzcGVjaWZpZWQNCiAgICB9DQoNCiAgICB0aGlzLnRlc3RfbW9kZSA9IHRlc3RfbW9kZSA9PT0gdHJ1ZSA/IHRydWUgOiBmYWxzZTsNCiAgICB0aGlzLnN0YXJ0X2RhdGUgPSBzdGFydF9kYXRlOw0KICAgIHRoaXMuc3RhcnRfdHMgPSBzdGFydF9kYXRlLmdldFRpbWUoKTsNCiAgICANCiAgICB0aGlzLmluaXRfcmVjdXJyZW5jZV9ydWxlcygpOw0KICAgIHRoaXMuZXhjZXB0aW9uX2RhdGVzID0gW107DQoNCiAgICB0aGlzLmRheUZyb21EYXlObyA9IFsgIlNVIiwgIk1PIiwgIlRVIiwgIldFIiwgIlRIIiwgIkZSIiwgIlNBIiBdOw0KICAgIHRoaXMuZGF5Tm9Gcm9tRGF5ID0gew0KICAgICAgICBTVTogMCwgTU86IDEsIFRVOiAyLCBXRTogMywgVEg6IDQsIEZSOiA1LCBTQTogNg0KICAgIH07DQoNCiAgICBpZiAocmZjX3JydWxlKSB7DQogICAgICAgIHRoaXMuYWRkX3JlY3VycmVuY2VfcnVsZXMocmZjX3JydWxlKTsNCiAgICB9DQoNCn07IA0KDQovLyBhZGRzIGF0IGxlYXN0IG9uZSBSUlVMRQ0KU2NoZWR1bGVyLnByb3RvdHlwZS5hZGRfcmVjdXJyZW5jZV9ydWxlcyA9IGZ1bmN0aW9uKHJmY19ycnVsZSkgew0KICAgIGlmIChyZmNfcnJ1bGUuaW5kZXhPZigiUlJVTEU6IikgPT0gMCkgeyAvLyByZW1vdmVzICJSUlVMRToiIGlmIG5lZWRlZA0KICAgICAgICByZmNfcnJ1bGUgPSByZmNfcnJ1bGUuc2xpY2UoNik7DQogICAgfQ0KDQogICAgdmFyIHJ1bGVzID0gcmZjX3JydWxlLnNwbGl0KCI7Iik7DQogICAgdmFyIG5iX3J1bGVzID0gcnVsZXMubGVuZ3RoOw0KDQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYl9ydWxlczsgaSsrKSB7DQogICAgICAgIHZhciBydWxlID0gcnVsZXNbaV0uc3BsaXQoIj0iKTsNCiAgICAgICAgdmFyIHJ1bGVfdmFsdWUgPSBydWxlWzFdOw0KICAgICAgICBzd2l0Y2ggKHJ1bGVbMF0pIHsgLy8gcnVsZSBuYW1lDQogICAgICAgICAgICBjYXNlICJGUkVRIjoNCiAgICAgICAgICAgICAgICB0aGlzLnJydWxlX2ZyZXEgPSBydWxlX3ZhbHVlOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiVU5USUwiOg0KICAgICAgICAgICAgICAgIHZhciB1bnRpbCA9IHJ1bGVfdmFsdWU7DQogICAgICAgICAgICAgICAgdmFyIHkgPSB1bnRpbC5zdWJzdHIoMCwgNCk7DQogICAgICAgICAgICAgICAgdmFyIG0gPSB1bnRpbC5zdWJzdHIoNCwgMikgLSAxOyAvLyBqcyBEYXRlIG1vbnRoIC0+IDAgdG8gMTENCiAgICAgICAgICAgICAgICB2YXIgZCA9IHVudGlsLnN1YnN0cig2LCAyKTsNCiAgICAgICAgICAgICAgICBpZiAodW50aWwubGVuZ3RoID4gOCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IHVudGlsLnN1YnN0cig5LCAyKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbiA9IHVudGlsLnN1YnN0cigxMSwgMik7DQogICAgICAgICAgICAgICAgICAgIHZhciBzID0gdW50aWwuc3Vic3RyKDEzLCAyKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ycnVsZV91bnRpbCA9IG5ldyBEYXRlKHksIG0sIGQsIGgsIG1pbiwgcykuZ2V0VGltZSgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucnJ1bGVfdW50aWwgPSBuZXcgRGF0ZSh5LCBtLCBkKS5nZXRUaW1lKCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJDT1VOVCI6DQogICAgICAgICAgICAgICAgdGhpcy5ycnVsZV9jb3VudCA9IHJ1bGVfdmFsdWU7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJJTlRFUlZBTCI6DQogICAgICAgICAgICAgICAgdGhpcy5ycnVsZV9pbnRlcnZhbCA9IHJ1bGVfdmFsdWU7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICBjYXNlICJCWVNFQ09ORCI6DQogICAgICAgICAgICAgICAgdGhpcy5ycnVsZV9ieXNlY29uZCA9IHJ1bGVfdmFsdWUuc3BsaXQoIiwiKTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkJZTUlOVVRFIjoNCiAgICAgICAgICAgICAgICB0aGlzLnJydWxlX2J5bWludXRlID0gcnVsZV92YWx1ZS5zcGxpdCgiLCIpOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiQllIT1VSIjoNCiAgICAgICAgICAgICAgICB0aGlzLnJydWxlX2J5aG91ciA9IHJ1bGVfdmFsdWUuc3BsaXQoIiwiKTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkJZREFZIjoNCiAgICAgICAgICAgICAgICB0aGlzLnJydWxlX2J5ZGF5ID0gcnVsZV92YWx1ZS5zcGxpdCgiLCIpOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiQllNT05USERBWSI6DQogICAgICAgICAgICAgICAgaWYgKHRoaXMucnJ1bGVfZnJlcSAhPSAiV0VFS0xZIikgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJydWxlX2J5bW9udGhkYXkgPSBydWxlX3ZhbHVlLnNwbGl0KCIsIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiQllZRUFSREFZIjoNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5ycnVsZV9mcmVxID09ICJZRUFSTFkiKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucnJ1bGVfYnl5ZWFyZGF5ID0gcnVsZV92YWx1ZS5zcGxpdCgiLCIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIGNhc2UgIkJZV0VFS05PIjoNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5ycnVsZV9mcmVxID09ICJZRUFSTFkiKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucnJ1bGVfYnl3ZWVrbm8gPSBydWxlX3ZhbHVlLnNwbGl0KCIsIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiQllNT05USCI6DQogICAgICAgICAgICAgICAgdGhpcy5ycnVsZV9ieW1vbnRoID0gcnVsZV92YWx1ZS5zcGxpdCgiLCIpOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiQllTRVRQT1MiOg0KICAgICAgICAgICAgICAgIHRoaXMucnJ1bGVfYnlzZXRwb3MgPSBydWxlX3ZhbHVlLnNwbGl0KCIsIik7DQogICAgICAgICAgICAgICAgdGhpcy5ycnVsZV9ieXNldHBvcy5zb3J0KGZ1bmN0aW9uKGEsYikgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoYSwgMTApIC0gcGFyc2VJbnQoYiwgMTApOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSAiV0tTVCI6DQogICAgICAgICAgICAgICAgdGhpcy5ycnVsZV93a3N0ID0gcnVsZV92YWx1ZTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vaWYgQllTRUNPTkQsIEJZTUlOVVRFLCBCWUhPVVIsIEJZREFZLCBCWU1PTlRIREFZIG9yIEJZTU9OVEggdW5zcGVjaWZpZWQsIGZldGNoIHZhbHVlcyBmcm9tIHN0YXJ0IGRhdGUNCiAgICBpZiAoIXRoaXMucnJ1bGVfYnlzZWNvbmQpIHsNCiAgICAgICAgdGhpcy5ycnVsZV9ieXNlY29uZCA9IFsgdGhpcy5zdGFydF9kYXRlLmdldFNlY29uZHMoKS50b1N0cmluZygpIF07DQogICAgfQ0KICAgIGlmICghdGhpcy5ycnVsZV9ieW1pbnV0ZSkgew0KICAgICAgICB0aGlzLnJydWxlX2J5bWludXRlID0gWyB0aGlzLnN0YXJ0X2RhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkgXTsNCiAgICB9DQogICAgaWYgKCF0aGlzLnJydWxlX2J5aG91cikgew0KICAgICAgICB0aGlzLnJydWxlX2J5aG91ciA9IFsgdGhpcy5zdGFydF9kYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKSBdOw0KICAgIH0NCiAgICBpZiAoIXRoaXMucnJ1bGVfYnlkYXkgJiYgdGhpcy5ycnVsZV9mcmVxID09ICJXRUVLTFkiKSB7Ly8gYXV0byB2YWx1ZSBvbmx5IHdoZW4gZnJlcT13ZWVrbHkgaSBndWVzcy4uLg0KICAgICAgICB0aGlzLnJydWxlX2J5ZGF5ID0gWyB0aGlzLmRheUZyb21EYXlOb1t0aGlzLnN0YXJ0X2RhdGUuZ2V0RGF5KCldIF07DQogICAgfQ0KICAgIGlmICghdGhpcy5ycnVsZV9ieWRheSAmJiAhdGhpcy5ycnVsZV9ieW1vbnRoZGF5ICYmICF0aGlzLnJydWxlX2J5eWVhcmRheSAmJiAodGhpcy5ycnVsZV9mcmVxID09ICJNT05USExZIiB8fCB0aGlzLnJydWxlX2ZyZXEgPT0gIllFQVJMWSIpKSB7DQogICAgICAgIHRoaXMucnJ1bGVfYnltb250aGRheSA9IFsgdGhpcy5zdGFydF9kYXRlLmdldERhdGUoKS50b1N0cmluZygpIF07DQogICAgfQ0KICAgIGlmICghdGhpcy5ycnVsZV9ieWRheSAmJiAhdGhpcy5ycnVsZV9ieXllYXJkYXkgJiYgIXRoaXMucnJ1bGVfYnltb250aCAmJiB0aGlzLnJydWxlX2ZyZXEgPT0gIllFQVJMWSIpIHsNCiAgICAgICAgdGhpcy5ycnVsZV9ieW1vbnRoID0gWyAodGhpcy5zdGFydF9kYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpIF07DQogICAgfQ0KfQ0KDQovLyByZW1vdmVzIGFsbCBSUlVMRXMNClNjaGVkdWxlci5wcm90b3R5cGUucmVtb3ZlX3JlY3VycmVuY2VfcnVsZXMgPSBmdW5jdGlvbigpIHsNCiAgICB0aGlzLmluaXRfcmVjdXJyZW5jZV9ydWxlcygpOw0KfQ0KDQovLyBhZGRzIGF0IGxlYXN0IG9uZSBFWERBVEUgKG9wdGlvbmFsKQ0KU2NoZWR1bGVyLnByb3RvdHlwZS5hZGRfZXhjZXB0aW9uX2RhdGVzID0gZnVuY3Rpb24oZGF0ZXMpIHsNCiAgICB2YXIgbmJfZGF0ZSA9IGRhdGVzLmxlbmd0aDsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5iX2RhdGU7IGkrKykgew0KICAgICAgICB0aGlzLmV4Y2VwdGlvbl9kYXRlcy5wdXNoKGRhdGVzW2ldLmdldFRpbWUoKSk7DQogICAgfQ0KICAgIHRoaXMuZXhjZXB0aW9uX2RhdGVzLnNvcnQoKTsNCn0NCg0KLy8gcmVtb3ZlcyBhbGwgRVhEQVRFcw0KU2NoZWR1bGVyLnByb3RvdHlwZS5yZW1vdmVfZXhjZXB0aW9uX2RhdGVzID0gZnVuY3Rpb24oKSB7DQogICAgdGhpcy5leGNlcHRpb25fZGF0ZXMgPSBbXTsNCn0NCg0KLy8gcmV0b3VybnMgYWxsIG9jY3VycmVuY2VzIGFzIERhdGUgYXJyYXkgKHRlc3QgbW9kZSA9PiB0aW1lc3RhbXAgYXJyYXkpDQpTY2hlZHVsZXIucHJvdG90eXBlLmFsbF9vY2N1cnJlbmNlcyA9IGZ1bmN0aW9uKGZpbHRlcl9iZWdpbl90cywgZmlsdGVyX2VuZF90cykgew0KICAgIHZhciBvY2N1cnJlbmNlcyA9IFtdOw0KICAgIGlmICgoZmlsdGVyX2JlZ2luX3RzID09PSB1bmRlZmluZWQgfHwgZmlsdGVyX2VuZF90cyA9PT0gdW5kZWZpbmVkKSAmJg0KICAgICAgICB0aGlzLnJydWxlX2NvdW50ID09PSBmYWxzZSAmJiB0aGlzLnJydWxlX3VudGlsID09PSBmYWxzZSkgeyANCiAgICAgICAgcmV0dXJuIG51bGw7IC8vIGluZmluaXR5IG9mIHJlc3VsdHMgPT4gbXVzdCBiZSBwcm9jZXNzZWQgd2l0aCBmaWx0ZXJfYmVnaW5fdHMgJiBmaWx0ZXJfZW5kX3RzDQogICAgfQ0KDQogICAgdmFyIGN1cnJlbnRfZGF0ZSA9IHRoaXMuc3RhcnRfZGF0ZTsNCiAgICB2YXIgY291bnQgPSAwOyAvLyB1c2VkIHRvIGZpbHRlciBieSBycnVsZV9jb3VudA0KICAgIHZhciBjb3VudF9wZXJpb2QgPSAwOyAvLyB1c2VkIHRvIHByb2Nlc3MgaW50ZXJ2YWxzDQogICAgDQpwZXJpb2RfbG9vcDoNCiAgICB3aGlsZSAoKHRoaXMucnJ1bGVfY291bnQgPT09IGZhbHNlIHx8IGNvdW50IDwgdGhpcy5ycnVsZV9jb3VudCkNCiAgICAmJiAodGhpcy5ycnVsZV91bnRpbCA9PT0gZmFsc2UgfHwgY3VycmVudF9kYXRlLmdldFRpbWUoKSA8PSB0aGlzLnJydWxlX3VudGlsKQ0KICAgICYmIChmaWx0ZXJfZW5kX3RzID09PSB1bmRlZmluZWQgfHwgY3VycmVudF9kYXRlLmdldFRpbWUoKSA8PSBmaWx0ZXJfZW5kX3RzKSkgew0KDQogICAgICAgIHZhciBkYXkgPSB0aGlzLmRheUZyb21EYXlOb1tjdXJyZW50X2RhdGUuZ2V0RGF5KCldOw0KICAgICAgICB2YXIgZCA9IGN1cnJlbnRfZGF0ZS5nZXREYXRlKCk7DQogICAgICAgIHZhciBtID0gY3VycmVudF9kYXRlLmdldE1vbnRoKCkgKyAxOw0KICAgICAgICB2YXIgeSA9IGN1cnJlbnRfZGF0ZS5nZXRGdWxsWWVhcigpOw0KICAgICAgICB2YXIgd2Vla19ubyA9IGN1cnJlbnRfZGF0ZS5nZXRXZWVrTm8odGhpcy5ycnVsZV93a3N0ID09ICJNTyIgPyAxIDogMCk7IC8vIDEgdG8gNTMNCiAgICAgICAgdmFyIGggPSBjdXJyZW50X2RhdGUuZ2V0SG91cnMoKTsNCiAgICAgICAgdmFyIG1pbiA9IGN1cnJlbnRfZGF0ZS5nZXRNaW51dGVzKCk7DQogICAgICAgIHZhciBzID0gY3VycmVudF9kYXRlLmdldFNlY29uZHMoKTsNCg0KICAgICAgICB0aGlzLmN1cnJlbnRfcG9zID0gMTsgLy8gdXNlZCBpbiBycnVsZV9ieXNldHBvcw0KICAgICAgICB0aGlzLm9sZF9wb3MgPSBbXTsgLy8gdXNlZCB3aGVuIGJ5c2V0cG9zIGlzIGEgbmVnYXRpdmUgbnVtYmVyDQoNCiAgICAgICAgaWYgKGNvdW50X3BlcmlvZCAlIHRoaXMucnJ1bGVfaW50ZXJ2YWwgPT0gMCAmJiB0aGlzLmNoZWNrX3J1bGVzKGRheSwgZCwgbSwgd2Vla19ubywgaCwgbWluLCBzKSkgeyAvLyBjdXJyZW50IGRhdGUgbWF0Y2hlcyBpbnRlcnZhbCBBTkQgcnVsZXMgYnlkYXksIGJ5bW9udGhkYXksIGJ5bW9udGgNCiAgICAgICAgICAgIGlmICh0aGlzLnJydWxlX2ZyZXEgPT0gIkRBSUxZIikgew0KICAgICAgICAgICAgICAgIGZvciAodmFyIGhfaXQgPSAwOyBoX2l0IDwgdGhpcy5ycnVsZV9ieWhvdXIubGVuZ3RoOyBoX2l0KyspIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbWluX2l0ID0gMDsgbWluX2l0IDwgdGhpcy5ycnVsZV9ieW1pbnV0ZS5sZW5ndGg7IG1pbl9pdCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzX2l0ID0gMDsgc19pdCA8IHRoaXMucnJ1bGVfYnlzZWNvbmQubGVuZ3RoOyBzX2l0KyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZV90b19wdXNoID0gbmV3IERhdGUoeSwgKG0tMSksIGQsIHRoaXMucnJ1bGVfYnlob3VyW2hfaXRdLCB0aGlzLnJydWxlX2J5bWludXRlW21pbl9pdF0sIHRoaXMucnJ1bGVfYnlzZWNvbmRbc19pdF0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0c190b19wdXNoID0gZGF0ZV90b19wdXNoLmdldFRpbWUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ycnVsZV9ieXNldHBvcyAhPT0gZmFsc2UgJiYgIXRoaXMucnJ1bGVfYnlzZXRwb3MuaW5fYXJyYXkodGhpcy5jdXJyZW50X3Bvcy50b1N0cmluZygpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfcG9zKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2xkX3Bvcy5wdXNoKGRhdGVfdG9fcHVzaCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMucnJ1bGVfdW50aWwgIT09IGZhbHNlICYmIHRzX3RvX3B1c2ggPiB0aGlzLnJydWxlX3VudGlsKSB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZmlsdGVyX2VuZF90cyAhPT0gdW5kZWZpbmVkICYmIHRzX3RvX3B1c2ggPiBmaWx0ZXJfZW5kX3RzKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBwZXJpb2RfbG9vcDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRzX3RvX3B1c2ggPj0gdGhpcy5zdGFydF90cykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyX2JlZ2luX3RzID09PSB1bmRlZmluZWQgfHwgdHNfdG9fcHVzaCA+PSBmaWx0ZXJfYmVnaW5fdHMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9jY3VycmVuY2VzLnB1c2goZGF0ZV90b19wdXNoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfcG9zKys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbGRfcG9zLnB1c2goZGF0ZV90b19wdXNoKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJydWxlX2NvdW50ICE9PSBmYWxzZSAmJiBjb3VudCA+PSB0aGlzLnJydWxlX2NvdW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHBlcmlvZF9sb29wOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSBpZiAoWyJXRUVLTFkiLCAiTU9OVEhMWSIsICJZRUFSTFkiXS5pbl9hcnJheSh0aGlzLnJydWxlX2ZyZXEpKSB7DQogICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnJydWxlX2ZyZXEpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiV0VFS0xZIjoNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwZXJpb2RfYmVnaW4gPSBEYXRlLmZyb21XZWVrKHdlZWtfbm8sIHksIHRoaXMucnJ1bGVfd2tzdCA9PSAiTU8iID8gMSA6IDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVudGlsID0gRGF0ZS5mcm9tV2Vlayh3ZWVrX25vICsgMSwgeSwgdGhpcy5ycnVsZV93a3N0ID09ICJNTyIgPyAxIDogMCk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiTU9OVEhMWSI6DQogICAgICAgICAgICAgICAgICAgICAgICBwZXJpb2RfYmVnaW4gPSBuZXcgRGF0ZSh5LCBtIC0gMSwgMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsID0gbmV3IERhdGUoeSwgbSwgMSk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiWUVBUkxZIjoNCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmlvZF9iZWdpbiA9IG5ldyBEYXRlKHksIDAsIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgPSBuZXcgRGF0ZSh5ICsgMSwgMCwgMSk7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB2YXIgaXRfZGF0ZSA9IHBlcmlvZF9iZWdpbjsNCg0KICAgICAgICAgICAgICAgIHdoaWxlIChpdF9kYXRlLmdldFRpbWUoKSA8IHVudGlsLmdldFRpbWUoKSkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgaXRfZGF0ZV90cyA9IGl0X2RhdGUuZ2V0VGltZSgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMucnJ1bGVfdW50aWwgIT09IGZhbHNlICYmIGl0X2RhdGVfdHMgPiB0aGlzLnJydWxlX3VudGlsKSB8fA0KICAgICAgICAgICAgICAgICAgICAgICAgKGZpbHRlcl9lbmRfdHMgIT09IHVuZGVmaW5lZCAmJiBpdF9kYXRlX3RzID4gZmlsdGVyX2VuZF90cykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHBlcmlvZF9sb29wOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tfZGF5KGl0X2RhdGUpKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaF9pdCA9IDA7IGhfaXQgPCB0aGlzLnJydWxlX2J5aG91ci5sZW5ndGg7IGhfaXQrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobWluX2l0ID0gMDsgbWluX2l0IDwgdGhpcy5ycnVsZV9ieW1pbnV0ZS5sZW5ndGg7IG1pbl9pdCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoc19pdCA9IDA7IHNfaXQgPCB0aGlzLnJydWxlX2J5c2Vjb25kLmxlbmd0aDsgc19pdCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlX3RvX3B1c2ggPSBuZXcgRGF0ZShpdF9kYXRlLmdldEZ1bGxZZWFyKCksIGl0X2RhdGUuZ2V0TW9udGgoKSwgaXRfZGF0ZS5nZXREYXRlKCksIHRoaXMucnJ1bGVfYnlob3VyW2hfaXRdLCB0aGlzLnJydWxlX2J5bWludXRlW21pbl9pdF0sIHRoaXMucnJ1bGVfYnlzZWNvbmRbc19pdF0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHNfdG9fcHVzaCA9IGRhdGVfdG9fcHVzaC5nZXRUaW1lKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ycnVsZV9ieXNldHBvcyAhPT0gZmFsc2UgJiYgIXRoaXMucnJ1bGVfYnlzZXRwb3MuaW5fYXJyYXkodGhpcy5jdXJyZW50X3Bvcy50b1N0cmluZygpKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudF9wb3MrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9sZF9wb3MucHVzaChkYXRlX3RvX3B1c2gpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLnJydWxlX3VudGlsICE9PSBmYWxzZSAmJiB0c190b19wdXNoID4gdGhpcy5ycnVsZV91bnRpbCkgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZmlsdGVyX2VuZF90cyAhPT0gdW5kZWZpbmVkICYmIHRzX3RvX3B1c2ggPiBmaWx0ZXJfZW5kX3RzKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHBlcmlvZF9sb29wOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRzX3RvX3B1c2ggPj0gdGhpcy5zdGFydF90cykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJfYmVnaW5fdHMgPT09IHVuZGVmaW5lZCB8fCB0c190b19wdXNoID49IGZpbHRlcl9iZWdpbl90cykgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvY2N1cnJlbmNlcy5wdXNoKGRhdGVfdG9fcHVzaCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudF9wb3MrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2xkX3Bvcy5wdXNoKGRhdGVfdG9fcHVzaCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJydWxlX2NvdW50ICE9PSBmYWxzZSAmJiBjb3VudCA+PSB0aGlzLnJydWxlX2NvdW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgcGVyaW9kX2xvb3A7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaXRfZGF0ZSA9IG5ldyBEYXRlKGl0X2RhdGUpOw0KICAgICAgICAgICAgICAgICAgICBpdF9kYXRlLnNldERhdGUoaXRfZGF0ZS5nZXREYXRlKCkgKyAxKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gcHJvY2VzcyBuZWdhdGl2ZSB2YWx1ZXMgb2YgcnJ1bGVfYnlzZXRwb3MNCiAgICAgICAgICAgICAgICBpZiAodGhpcy5ycnVsZV9ieXNldHBvcyBpbnN0YW5jZW9mIEFycmF5KSB7DQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGl0X3BvcyA9IDA7IGl0X3BvcyA8IHRoaXMucnJ1bGVfYnlzZXRwb3MubGVuZ3RoOyBpdF9wb3MrKykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IHBhcnNlSW50KHRoaXMucnJ1bGVfYnlzZXRwb3NbaXRfcG9zXSwgMTApOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA8IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSBNYXRoLmFicyhwb3MpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYXN0X21hdGNoaW5nX2RhdGVzID0gdGhpcy5vbGRfcG9zLnJldmVyc2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hpbmdfZGF0ZSA9IGxhc3RfbWF0Y2hpbmdfZGF0ZXNbcG9zIC0gMV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nX2RhdGUgJiYgbWF0Y2hpbmdfZGF0ZSA+PSB0aGlzLnN0YXJ0X3RzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9jY3VycmVuY2VzLnB1c2gobWF0Y2hpbmdfZGF0ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJydWxlX2NvdW50ICE9PSBmYWxzZSAmJiBjb3VudCA+PSB0aGlzLnJydWxlX2NvdW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHBlcmlvZF9sb29wOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGNvdW50X3BlcmlvZCsrOw0KICAgICAgICBjdXJyZW50X2RhdGUgPSB0aGlzLm5leHRfcGVyaW9kKGN1cnJlbnRfZGF0ZSk7DQogICAgfQ0KDQogICAgLy8gcmVtb3ZlcyBleGRhdGVzDQogICAgdmFyIG5iX29jY3VycmVuY2VzID0gb2NjdXJyZW5jZXMubGVuZ3RoOw0KICAgIHZhciBvY2N1cnJlbmNlc193aXRob3V0X2V4ZGF0ZXMgPSBbXTsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5iX29jY3VycmVuY2VzOyBpKyspIHsNCiAgICAgICAgdmFyIG9jY3VycmVuY2UgPSBvY2N1cnJlbmNlc1tpXTsNCiAgICAgICAgdmFyIHRzID0gb2NjdXJyZW5jZS5nZXRUaW1lKCk7DQogICAgICAgIGlmICghKHRoaXMuZXhjZXB0aW9uX2RhdGVzLmluX2FycmF5KHRzKSkpIHsNCiAgICAgICAgICAgIG9jY3VycmVuY2VzX3dpdGhvdXRfZXhkYXRlcy5wdXNoKHRoaXMudGVzdF9tb2RlID8gdHMgOiBvY2N1cnJlbmNlKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gb2NjdXJyZW5jZXNfd2l0aG91dF9leGRhdGVzOw0KfQ0KDQpTY2hlZHVsZXIucHJvdG90eXBlLm5leHRfcGVyaW9kID0gZnVuY3Rpb24oZGF0ZSkgew0KICAgIHN3aXRjaCAodGhpcy5ycnVsZV9mcmVxKSB7DQogICAgICAgIGNhc2UgIkRBSUxZIjoNCiAgICAgICAgICAgIHZhciBuZXdfZGF0ZSA9IG5ldyBEYXRlKGRhdGUpOw0KICAgICAgICAgICAgbmV3X2RhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIDEpOw0KICAgICAgICAgICAgcmV0dXJuIG5ld19kYXRlOw0KICAgICAgICBjYXNlICJXRUVLTFkiOg0KICAgICAgICAgICAgcmV0dXJuIGRhdGUubmV4dFdlZWsoKTsNCiAgICAgICAgY2FzZSAiTU9OVEhMWSI6DQogICAgICAgICAgICBuZXdfZGF0ZSA9IG5ldyBEYXRlKGRhdGUpOw0KICAgICAgICAgICAgbmV3X2RhdGUuc2V0TW9udGgoZGF0ZS5nZXRNb250aCgpICsgMSwgMSk7DQogICAgICAgICAgICByZXR1cm4gbmV3X2RhdGU7DQogICAgICAgIGNhc2UgIllFQVJMWSI6DQogICAgICAgICAgICBuZXdfZGF0ZSA9IG5ldyBEYXRlKGRhdGUpOw0KICAgICAgICAgICAgbmV3X2RhdGUuc2V0RnVsbFllYXIoZGF0ZS5nZXRGdWxsWWVhcigpICsgMSk7DQogICAgICAgICAgICByZXR1cm4gbmV3X2RhdGU7DQogICAgfQ0KDQp9DQoNCi8vIGNoZWNrIHZhbGlkaXR5IG9mIHNlbGVjdGVkIHJ1bGVzDQpTY2hlZHVsZXIucHJvdG90eXBlLmNoZWNrX3J1bGVzID0gZnVuY3Rpb24oZGF5LCBkLCBtLCB3ZWVrX25vLCBoLCBtaW4sIHMpIHsNCiAgICBzd2l0Y2ggKHRoaXMucnJ1bGVfZnJlcSkgew0KICAgICAgICBjYXNlICJEQUlMWSI6DQogICAgICAgICAgICByZXR1cm4gKChtID09PSB1bmRlZmluZWQgfHwgdGhpcy5ycnVsZV9ieW1vbnRoID09PSBmYWxzZSB8fCB0aGlzLnJydWxlX2J5bW9udGguaW5fYXJyYXkobS50b1N0cmluZygpKSkgJiYNCiAgICAgICAgICAgICAgICAoZCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMucnJ1bGVfYnltb250aGRheSA9PT0gZmFsc2UgfHwgdGhpcy5ycnVsZV9ieW1vbnRoZGF5LmluX2FycmF5KGQudG9TdHJpbmcoKSkpICYmDQogICAgICAgICAgICAgICAgKGRheSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMucnJ1bGVfYnlkYXkgPT09IGZhbHNlIHx8IHRoaXMucnJ1bGVfYnlkYXkuaW5fYXJyYXkoZGF5LnRvU3RyaW5nKCkpKSk7DQogICAgICAgIGNhc2UgIldFRUtMWSI6DQogICAgICAgICAgICByZXR1cm4gKChtID09PSB1bmRlZmluZWQgfHwgdGhpcy5ycnVsZV9ieW1vbnRoID09PSBmYWxzZSB8fCB0aGlzLnJydWxlX2J5bW9udGguaW5fYXJyYXkobS50b1N0cmluZygpKSkgJiYNCiAgICAgICAgICAgICAgICAoZCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMucnJ1bGVfYnltb250aGRheSA9PT0gZmFsc2UgfHwgdGhpcy5ycnVsZV9ieW1vbnRoZGF5LmluX2FycmF5KGQudG9TdHJpbmcoKSkpKTsNCiAgICAgICAgY2FzZSAiTU9OVEhMWSI6DQogICAgICAgICAgICByZXR1cm4gKG0gPT09IHVuZGVmaW5lZCB8fCB0aGlzLnJydWxlX2J5bW9udGggPT09IGZhbHNlIHx8IHRoaXMucnJ1bGVfYnltb250aC5pbl9hcnJheShtLnRvU3RyaW5nKCkpKTsNCiAgICAgICAgY2FzZSAiWUVBUkxZIjoNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCn0NCg0KLy8gcmV0b3VybnMgb2NjdXJyZW5jZXMgaW4gdGhlIHJhbmdlIFsgYmVnaW5fZGF0ZSwgZW5kX2RhdGUgXSBhcyBEYXRlIGFycmF5ICh0ZXN0IG1vZGUgPT4gdGltZXN0YW1wIGFycmF5KQ0KU2NoZWR1bGVyLnByb3RvdHlwZS5vY2N1cnJlbmNlc19iZXR3ZWVuID0gZnVuY3Rpb24oYmVnaW5fZGF0ZSwgZW5kX2RhdGUpIHsNCiAgICB2YXIgYmVnaW5fdHMgPSBiZWdpbl9kYXRlLmdldFRpbWUoKTsNCiAgICB2YXIgZW5kX3RzID0gZW5kX2RhdGUuZ2V0VGltZSgpOw0KDQogICAgcmV0dXJuIHRoaXMuYWxsX29jY3VycmVuY2VzKGJlZ2luX3RzLCBlbmRfdHMpOw0KfQ0KDQpTY2hlZHVsZXIucHJvdG90eXBlLmNoZWNrX2RheSA9IGZ1bmN0aW9uKGRhdGUpIHsNCiAgICB2YXIgaXNfeWVhcmx5ID0gKHRoaXMucnJ1bGVfZnJlcSA9PSAiWUVBUkxZIik7DQogICAgdmFyIGlzX3dlZWtseSA9ICh0aGlzLnJydWxlX2ZyZXEgPT0gIldFRUtMWSIpOw0KDQogICAgdmFyIGRheSA9IHRoaXMuZGF5RnJvbURheU5vW2RhdGUuZ2V0RGF5KCldOw0KICAgIHZhciBkID0gZGF0ZS5nZXREYXRlKCk7DQogICAgdmFyIG0gPSBkYXRlLmdldE1vbnRoKCkgKyAxOw0KICAgIHZhciB5ID0gZGF0ZS5nZXRGdWxsWWVhcigpOw0KICAgIGlmIChpc195ZWFybHkpIHsNCiAgICAgICAgdmFyIHdlZWtfbm8gPSBkYXRlLmdldFdlZWtObyh0aGlzLnJydWxlX3drc3QgPT0gIk1PIiA/IDEgOiAwKTsgLy8gMSB0byA1Mw0KICAgIH0NCg0KICAgIC8vIGNoZWNrIHJydWxlX2J5bW9udGgNCiAgICBpZiAodGhpcy5ycnVsZV9ieW1vbnRoICE9PSBmYWxzZSkgew0KICAgICAgICBpZiAoIXRoaXMucnJ1bGVfYnltb250aC5pbl9hcnJheShtLnRvU3RyaW5nKCkpKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyBjaGVjayBycnVsZV9ieWRheQ0KICAgIGlmICh0aGlzLnJydWxlX2J5ZGF5ICE9PSBmYWxzZSkgew0KICAgICAgICBpZiAoaXNfd2Vla2x5KSB7DQogICAgICAgICAgICBpZiAoIXRoaXMucnJ1bGVfYnlkYXkuaW5fYXJyYXkoZGF5KSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGZvdW5kID0gZmFsc2U7DQogICAgICAgICAgICBmb3IgKHZhciBpdF93ZCA9IDA7IGl0X3dkIDwgdGhpcy5ycnVsZV9ieWRheS5sZW5ndGg7IGl0X3dkKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgcnVsZV9ieWRheSA9IC8oWyswLTktXSopKFtBLVpdKykvLmV4ZWModGhpcy5ycnVsZV9ieWRheVtpdF93ZF0pOw0KICAgICAgICAgICAgICAgIHZhciBtYXRjaGluZ19kYXRlcyA9IERhdGUuZmluZE50aFdlZWtEYXlzKHksIGlzX3llYXJseSA/IGZhbHNlIDogbSAtIDEsIHJ1bGVfYnlkYXlbMV0gPyBydWxlX2J5ZGF5WzFdIDogMCwgdGhpcy5kYXlOb0Zyb21EYXlbcnVsZV9ieWRheVsyXV0pOw0KDQogICAgICAgICAgICAgICAgZm9yICh2YXIgaXQgPSAwOyBpdCA8IG1hdGNoaW5nX2RhdGVzLmxlbmd0aDsgaXQrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZS5pc1NhbWVEYXRlKG1hdGNoaW5nX2RhdGVzW2l0XSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFmb3VuZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICghaXNfd2Vla2x5KSB7DQogICAgICAgIC8vIGNoZWNrIHJydWxlX2J5bW9udGhkYXkNCiAgICAgICAgaWYgKHRoaXMucnJ1bGVfYnltb250aGRheSAhPT0gZmFsc2UpIHsNCiAgICAgICAgICAgIHZhciBtb250aF9kYXlzX2NvdW50ID0gRGF0ZS5jb3VudE1vbnRoRGF5cyh5LCBtIC0gMSk7DQogICAgICAgICAgICB2YXIgZF9uZWcgPSBkIC0gMSAtIG1vbnRoX2RheXNfY291bnQ7DQogICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsNCiAgICAgICAgICAgIGZvciAodmFyIGl0X21kID0gMDsgaXRfbWQgPCB0aGlzLnJydWxlX2J5bW9udGhkYXkubGVuZ3RoOyBpdF9tZCsrKSB7DQogICAgICAgICAgICAgICAgdmFyIG1kID0gcGFyc2VJbnQodGhpcy5ycnVsZV9ieW1vbnRoZGF5W2l0X21kXSwgMTApOw0KICAgICAgICAgICAgICAgIGlmIChkID09IG1kIHx8IGRfbmVnID09IG1kKSB7DQogICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFmb3VuZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmIChpc195ZWFybHkpIHsNCg0KICAgICAgICAvLyBjaGVjayBycnVsZV9ieXllYXJkYXkNCiAgICAgICAgaWYgKHRoaXMucnJ1bGVfYnl5ZWFyZGF5ICE9PSBmYWxzZSkgew0KICAgICAgICAgICAgZm91bmQgPSBmYWxzZTsNCiAgICAgICAgICAgIGZvciAodmFyIGl0X3lkID0gMDsgaXRfeWQgPCB0aGlzLnJydWxlX2J5eWVhcmRheS5sZW5ndGg7IGl0X3lkKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgeWVhcl9kYXkgPSB0aGlzLnJydWxlX2J5eWVhcmRheVtpdF95ZF07DQogICAgICAgICAgICAgICAgaWYgKHllYXJfZGF5ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgeWVhcl9kYXRlID0gbmV3IERhdGUoeSwgMCwgcGFyc2VJbnQoeWVhcl9kYXksIDEwKSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChkYXRlLmlzU2FtZURhdGUoeWVhcl9kYXRlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHllYXJfZGF5IDwgMCkgew0KICAgICAgICAgICAgICAgICAgICB5ZWFyX2RhdGUgPSBuZXcgRGF0ZSh5ICsgMSwgMCwgMSArIHBhcnNlSW50KHllYXJfZGF5LCAxMCkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZS5pc1NhbWVEYXRlKHllYXJfZGF0ZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFmb3VuZCkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIGNoZWNrIHJydWxlX2J5d2Vla25vDQogICAgICAgIGlmICh0aGlzLnJydWxlX2J5d2Vla25vICE9PSBmYWxzZSkgew0KICAgICAgICAgICAgZm91bmQgPSBmYWxzZTsNCiAgICAgICAgICAgIGZvciAodmFyIGl0X3drbm8gPSAwOyBpdF93a25vIDwgdGhpcy5ycnVsZV9ieXdlZWtuby5sZW5ndGg7IGl0X3drbm8rKykgew0KICAgICAgICAgICAgICAgIHZhciBhX3dlZWtfbm8gPSB0aGlzLnJydWxlX2J5d2Vla25vW2l0X3drbm9dOw0KICAgICAgICAgICAgICAgIGlmIChhX3dlZWtfbm8pDQogICAgICAgICAgICAgICAgaWYgKGFfd2Vla19ubyA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFfd2Vla19ubyA9PSB3ZWVrX25vKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYV93ZWVrX25vIDwgMCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgeWVhcl93ZWVrX2NvdW50ID0gbmV3IERhdGUoeSwgMTEsIDMxKS5nZXRXZWVrTm8oKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHdlZWtfbm8gPT0geWVhcl93ZWVrX2NvdW50ICsgMSArIGFfd2Vla19ubykgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIWZvdW5kKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8gY2hlY2sgcnJ1bGVfYnlzZXRwb3MgcHJvY2Vzc2VkIGluIHBlcmlvZF9sb29wDQogICAgcmV0dXJuIHRydWU7DQp9DQo=]]></Resource>
  </Resources>
  <SourceCode><![CDATA[import json
import vobject
import datetime
from dateutil.relativedelta import *
import random

class VDOM_fullcalendar(VDOM_object):

	TF_DICT = {"1": "H:mm{ - H:mm}", "0":"h(:mm)tt{ - h(:mm)tt}"}
	VIEW_DICT = {"0": "month", "1": "agendaWeek", "2": "agendaDay"}
	DAY_LIST = [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
	MONTH_LIST = ['January','February','March','April','May','June','July','August','September','October','November','December']
	SHORT_MONTH_LIST = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']
	SHORT_DAY_LIST = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']
	FIRST_DAY_LIST = ["0","1","2","3","4","5","6","7"]
	SLOTMINUTES = {"0":5, "1":10,"2":15,"3":20,"4":25,"5":30}
	TRUE_FALSE = {"0":"false","1":"true"}
	VERSION = "version 20.00"
	DATE_MOD = "18.06.2012"

	RENDER_DIV = """<div id="%s" style="%s"></div>"""
	RENDER_SCRIPT = """
	$.curCSS = function (element, attrib, val) {$(element).css(attrib, val);};
	/*Fullcalendar. VDOM Type Version %(version)s. Last modified - %(date_mod)s*/
	$(function(){

		%(window_lazyloading_1)s

		$("#%(id_out)s").fullCalendar({

			header: {
				left: '',
				center: '',
				right: ''
			},

			weekMode: "liquid",
			axisFormat: "%(time_format)s",
			timeFormat: "%(time_format)s",
			monthNames: %(month_names)s,
			monthNamesShort: %(short_month_names)s,
			dayNames: %(day_names)s,
			dayNamesShort: %(short_day_names)s,
			editable: %(is_editable)s,
			selectable: %(is_selectable)s,
			firstDay: %(first_day)s,
			firstHour: %(first_hour)s,
			defaultView: "%(default_view)s",
			allDaySlot: %(is_allday_visible)s,
			allDayText: "%(allday_title)s",
			slotMinutes: %(minutes_interval)s,
			eventSources: %(event_sources)s,

			viewChanged: function( viewName, title ) {
				execEventBinded("%(id_woo)s", "viewChanged", {
					title: title.replace("&#8212;"," - "),
					view: viewName
				});
			},
			dateChanged: function( viewName, title, start, end %(lazyloading_1)s ){
				execEventBinded("%(id_woo)s", "dateChanged", {
					start: Math.round(visStart.getTime() / 1000),
					end: Math.round(visEnd.getTime() / 1000),
					title: title.replace("&#8212;"," - "),
					view: viewName,
					timezoneOffset: visStart.getTimezoneOffset()
				});
				%(lazy_condition)s
				execEventBinded("%(id_woo)s", "getEvents", {
					start: Math.round(%(lazyloading_start)s.getTime() / 1000),
					end: Math.round(%(lazyloading_end)s.getTime() / 1000),
					view: viewName,
					timezoneOffset: %(lazyloading_start)s.getTimezoneOffset()
				});
				%(lazy_condition_1)s
			},

			select: function(startDate, endDate, allDay)
			{
				end = endDate.getTime() / 1000;
				start = startDate.getTime() / 1000;
				$("#%(id_out)s").fullCalendar('unselect');
				execEventBinded("%(id_woo)s", "daysSelected", {
					start: start,
					end: end,
					allDay: allDay || 0,
					timezoneOffset: startDate.getTimezoneOffset()
				});
			},

			eventClick: function(event) {
				execEventBinded("%(id_woo)s", "eventClick", { id:event.id, instance: event.instance });
			},

			eventDrop: function(event, dayDelta, minuteDelta, allDay)
			{
				start = event.start || 0;
				end = event.end === null ? start : event.end;
				execEventBinded("%(id_woo)s", "eventDrag", {
					id: event.id,
					start: Math.round( start.getTime() / 1000),
					end: Math.round( end.getTime() / 1000),
					instance: event.instance,
					allDay: allDay || 0,
					dayDelta: dayDelta || 0,
					minuteDelta: minuteDelta || 0,
					timezoneOffset: event.start.getTimezoneOffset()
				})
			},

			eventResize: function( event, dayDelta, minuteDelta )
			{
				start = event.start || 0;
				end = event.end === null ? start : event.end;
				execEventBinded("%(id_woo)s", "eventResize", {
					id: event.id,
					start: Math.round( start.getTime() / 1000),
					end: Math.round( end.getTime() / 1000),
					instance: event.instance,
					dayDelta: dayDelta || 0,
					minuteDelta: minuteDelta || 0,
					timezoneOffset: event.start.getTimezoneOffset()
				})
			}
		});

		$("#%(id_out)s").fullCalendar( 'render' );
		$("#%(id_out)s").fullCalendar( 'gotoDate',  %(year)s, %(month)s, %(day)s);
	});
"""

	def render(self, contents=""):
		id_woo = (self.id).replace('-', '_')
		id_out = 'o_' + id_woo

		#visibility
		visibility = "hidden" if self.visible == "0" else "visible"

		#timeFormat
		timeFormat = VDOM_fullcalendar.TF_DICT["1"] if self.time_format not in VDOM_fullcalendar.TF_DICT.keys() else VDOM_fullcalendar.TF_DICT[self.time_format]

		#view
		view = VDOM_fullcalendar.VIEW_DICT["0"] if self.view not in VDOM_fullcalendar.VIEW_DICT not in VDOM_fullcalendar.VIEW_DICT.keys() else VDOM_fullcalendar.VIEW_DICT[self.view]

		#default date
		default_date = self.display_date.split('-') if self.display_date else str(datetime.date.today()).split('-')

		#day names

		day_names = []
		if isinstance(self.day_names, (tuple, list)):
			day_names = self.day_names
		elif isinstance(self.day_names, (unicode, str)):
			day_names = self.day_names.split("|")

		if len(day_names) != 7:
			day_names = VDOM_fullcalendar.DAY_LIST


		#short day names
		short_day_names = []
		if isinstance(self.short_day_names, (tuple, list)):
			short_day_names = self.short_day_names
		elif isinstance(self.short_day_names, (unicode, str)):
			short_day_names = self.short_day_names.split("|")

		if len(short_day_names) != 7:
			short_day_names = VDOM_fullcalendar.SHORT_DAY_LIST

		#month names
		month_names = []
		if isinstance(self.month_names, (tuple, list)):
			month_names = self.month_names
		elif isinstance(self.month_names, (unicode, str)):
			month_names = self.month_names.split("|")

		if len(month_names) != 12:
			month_names = VDOM_fullcalendar.MONTH_LIST

		#short month names
		short_month_names = []
		if isinstance(self.short_month_names, (tuple, list)):
			short_month_names = self.short_month_names
		elif isinstance(self.short_month_names, (unicode, str)):
			short_month_names = self.short_month_names.split("|")

		if len(short_month_names) != 12:
			short_month_names = VDOM_fullcalendar.SHORT_MONTH_LIST

		#first_hour
		first_hour = int( self.first_hour )


		#first day in week
		first_day = int(self.first_day) if self.first_day in VDOM_fullcalendar.FIRST_DAY_LIST else 1

		#is calendar editable or not
		editable =  VDOM_fullcalendar.TRUE_FALSE[self.editable] if self.editable in VDOM_fullcalendar.TRUE_FALSE.keys() else  VDOM_fullcalendar.TRUE_FALSE["1"]

		#is calendar selecable or not
		selectable = VDOM_fullcalendar.TRUE_FALSE[self.selectable] if self.selectable in VDOM_fullcalendar.TRUE_FALSE.keys() else VDOM_fullcalendar.TRUE_FALSE["1"]

		#is all-day slot visible or not
		allday_visible = VDOM_fullcalendar.TRUE_FALSE[self.all_day_visible] if self.all_day_visible in VDOM_fullcalendar.TRUE_FALSE.keys() else VDOM_fullcalendar.TRUE_FALSE["1"]

		#allday slot text
		allday_title = self.all_day_title if self.all_day_title else "Allday"

		#slotminutes interval
		slotminutes = VDOM_fullcalendar.SLOTMINUTES[self.slot_minutes] if self.slot_minutes in VDOM_fullcalendar.SLOTMINUTES.keys() else VDOM_fullcalendar.SLOTMINUTES["5"]

		if self.lazyloading == "1":
			window_lazy, lazyloading_1, lazyloading_start, lazyloading_end = ( "window.visible_start = window.visible_end = new Date(1); ",
																				"", "window.visible_start", "window.visible_end")
			lazy_condition = """if ( ( window.visible_start - start) && (window.visible_end - end ) )
										{window.visible_start = start; window.visible_end = end;"""
			lazy_condition_1 = "}"
		else:
			window_lazy, lazyloading_1, lazyloading_start, lazyloading_end, lazy_condition,lazy_condition_1 = ( "",
																				",visStart, visEnd", "visStart", "visEnd","","" )

		style_params = {"zindex": self.zindex,
						"top": self.top,
						"left": self.left,
						"width": self.width,
						"height": self.height,
						"visibility": visibility}

		mainstyle="""z-index:%(zindex)s;
					position:absolute;
					top: %(top)spx;
					left: %(left)spx;
					width: %(width)spx;
					height: %(height)spx;
					visibility: %(visibility)s;"""%style_params
		import json
		render_params = {
				"version"              : VDOM_fullcalendar.VERSION,
				"date_mod"             : VDOM_fullcalendar.DATE_MOD,
				"id_out"               : id_out,
				"id_woo"               : id_woo,
				"time_format"          : timeFormat,
				"short_day_names"      : json.dumps(short_day_names),
				"day_names"            : json.dumps(day_names)	,
				"short_month_names"    : json.dumps(short_month_names),
				"month_names"          : json.dumps(month_names),
				"is_editable"          : editable,
				"is_selectable"        : selectable,
				"first_day"            : first_day,
				"default_view"         : view,
				"is_allday_visible"    : allday_visible,
				"allday_title"         : allday_title,
				"minutes_interval"     : slotminutes,
				"event_sources"        : self.parse_events(),
				"year"                 : int(default_date[0]),
				"month"                : int(default_date[1])-1,
				"day"                  : int(default_date[2]),
				"window_lazyloading_1" : window_lazy,
				"lazyloading_1"        : lazyloading_1,
				"lazyloading_start"    : lazyloading_start,
				"lazyloading_end"      : lazyloading_end,
				"lazy_condition"       : lazy_condition,
				"lazy_condition_1"     : lazy_condition_1,
				"first_hour"           : first_hour
			}
		#resource = application.resources.get_by_label(self.id, "renderscript")
		#if resource:
		#	application.resources.delete(resource.id)
		#res_id = application.resources.create_temporary(self.id, "renderscript", VDOM_fullcalendar.RENDER_SCRIPT % render_params, "js", "renderscript")
		request.dyn_libraries[self.name] =  u'<script type="text/javascript" >%s</script>' %(VDOM_fullcalendar.RENDER_SCRIPT % render_params,) 
		return  VDOM_fullcalendar.RENDER_DIV % (id_out, mainstyle)


	def parse_events(self):
		event_sources = []
		if self.events:
			calendar = vobject.readOne(self.events)
			cal_list = []
			for event in calendar.vevent_list:
				startDate = getattr(event, 'dtstart', vobject.base.ContentLine('DTSTART', '', str(datetime.date.today())))
				endDate = getattr(event, 'dtend', vobject.base.ContentLine('DTEND', '', str(startDate.value)))
				summary = getattr(event, 'summary', vobject.base.ContentLine('SUMMARY', '', 'Event'))
				cal_list.append( [startDate.value, endDate.value, summary.value] )
				description = getattr(event, 'description', vobject.base.ContentLine('DESCRIPTION', '', 'Event'))
				color = getattr(event, 'color', vobject.base.ContentLine('COLOR','','blue'))
				id = getattr(event, 'id', vobject.base.ContentLine('ID', '', '-1'))
				allDay = getattr( event, 'allday', vobject.base.ContentLine('ALLDAY','','false'))
				allDay = True if allDay.value == "true" else False
				textColor = getattr(event, 'textcolor', vobject.base.ContentLine('textColor', '', 'green'))
				borderColor = getattr(event, 'bordercolor', vobject.base.ContentLine('bordercolor', '', 'green'))
				if event.rruleset is None:
					event_sources.append({ "events": [{ "id": id.value,
										"title": (summary.value).replace( "&comma&", ","),
										"description":description.value,
										"start": startDate.value.strftime("%Y-%m-%d %H:%M:%S"),
										"end": endDate.value.strftime("%Y-%m-%d %H:%M:%S"),
										"allDay": allDay,
										"instance": "-1"}],
										"color": color.value,
										"textColor": textColor.value,
										"borderColor": borderColor.value})
				else:
					instance = 1
					for rev in event.rruleset:
						event_sources.append({ "events": [{
										"title": (summary.value).replace( "&comma&", ","),
										"description":description.value,
										"id": id.value,
										"start": rev.strftime("%Y-%m-%d %H:%M:%S"),
										"end": (rev + relativedelta(endDate.value, startDate.value)).strftime("%Y-%m-%d %H:%M:%S"),
										"allDay": allDay,
										"instance": instance }],
										"color": color.value,
										"textColor": textColor.value,
										"borderColor": borderColor.value})
						instance += 1
		return json.dumps(event_sources)


	def wysiwyg(self, contents=""):
		from scripting.legacy.wysiwyg import get_empty_wysiwyg_value
		
		image_id = "70817b3b-d42d-4273-2b06-16afdd3a785d"
		result = get_empty_wysiwyg_value(self, image_id)
		
		return VDOM_object.wysiwyg(self, contents=result)]]></SourceCode>
  <Libraries>
    <Library Target="html"><![CDATA[<link rel="stylesheet" type="text/css" href="/02dfd9db-16fe-3690-73e1-baf58cd3e6f4.res" />]]></Library>
    <Library Target="html"><![CDATA[<script type='text/javascript' src='/10b18a20-59c9-2b2b-e4b3-7281bcc66d4f.res?v=1.6.4'></script>]]></Library>
    <Library Target="html"><![CDATA[<script type='text/javascript' src='/d1e1abad-b15d-450e-b769-4fe10ccb02af.res'></script>]]></Library>
    <Library Target="html"><![CDATA[<script type='text/javascript' src='/da71b545-59a4-484b-af46-5413a062d78c.res'></script>]]></Library>
  </Libraries>
  <E2vdom>
    <Events>
      <Userinterfaceevents>
        <Event Name="dateChanged" Help="#Lang(514)">
          <Parameters>
            <Parameter Name="title" Order="0" VbType="" Help="#Lang(901)"/>
            <Parameter Name="start" Order="0" VbType="" Help="#Lang(902)"/>
            <Parameter Name="end" Order="0" VbType="" Help="#Lang(903)"/>
            <Parameter Name="view" Order="0" VbType="" Help="#Lang(904)"/>
            <Parameter Name="timezoneOffset" Order="0" VbType="" Help="#Lang(905)"/>
          </Parameters>
        </Event>
        <Event Name="eventDrag" Help="#Lang(515)">
          <Parameters>
            <Parameter Name="id" Order="0" VbType="" Help="#Lang(906)"/>
            <Parameter Name="start" Order="0" VbType="" Help="#Lang(907)"/>
            <Parameter Name="end" Order="0" VbType="" Help="#Lang(908)"/>
            <Parameter Name="instance" Order="0" VbType="" Help="#Lang(909)"/>
            <Parameter Name="allDay" Order="0" VbType="" Help="#Lang(911)"/>
            <Parameter Name="dayDelta" Order="0" VbType="" Help="#Lang(912)"/>
            <Parameter Name="minuteDelta" Order="0" VbType="" Help="#Lang(913)"/>
            <Parameter Name="timezoneOffset" Order="0" VbType="" Help="#Lang(914)"/>
          </Parameters>
        </Event>
        <Event Name="mouseup" Help="#Lang(516)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(915)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(916)"/>
          </Parameters>
        </Event>
        <Event Name="viewChanged" Help="#Lang(517)">
          <Parameters>
            <Parameter Name="title" Order="0" VbType="" Help="#Lang(917)"/>
            <Parameter Name="view" Order="0" VbType="" Help="#Lang(918)"/>
          </Parameters>
        </Event>
        <Event Name="mousemove" Help="#Lang(518)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(919)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(921)"/>
          </Parameters>
        </Event>
        <Event Name="click" Help="#Lang(519)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(922)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(923)"/>
          </Parameters>
        </Event>
        <Event Name="daysSelected" Help="#Lang(521)">
          <Parameters>
            <Parameter Name="start" Order="0" VbType="" Help="#Lang(924)"/>
            <Parameter Name="end" Order="0" VbType="" Help="#Lang(925)"/>
            <Parameter Name="allDay" Order="0" VbType="" Help="#Lang(926)"/>
            <Parameter Name="timezoneOffset" Order="0" VbType="" Help="#Lang(927)"/>
          </Parameters>
        </Event>
        <Event Name="dblclick" Help="#Lang(522)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(928)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(929)"/>
          </Parameters>
        </Event>
        <Event Name="mouseout" Help="#Lang(523)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(931)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(932)"/>
          </Parameters>
        </Event>
        <Event Name="ctrlclick" Help="#Lang(524)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(933)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(934)"/>
          </Parameters>
        </Event>
        <Event Name="eventClick" Help="#Lang(525)">
          <Parameters>
            <Parameter Name="id" Order="0" VbType="" Help="#Lang(935)"/>
            <Parameter Name="instance" Order="0" VbType="" Help="#Lang(936)"/>
          </Parameters>
        </Event>
        <Event Name="eventResize" Help="#Lang(526)">
          <Parameters>
            <Parameter Name="id" Order="0" VbType="" Help="#Lang(937)"/>
            <Parameter Name="start" Order="0" VbType="" Help="#Lang(938)"/>
            <Parameter Name="end" Order="0" VbType="" Help="#Lang(939)"/>
            <Parameter Name="instance" Order="0" VbType="" Help="#Lang(941)"/>
            <Parameter Name="dayDelta" Order="0" VbType="" Help="#Lang(942)"/>
            <Parameter Name="minuteDelta" Order="0" VbType="" Help="#Lang(943)"/>
            <Parameter Name="timezoneOffset" Order="0" VbType="" Help="#Lang(944)"/>
          </Parameters>
        </Event>
        <Event Name="mouseover" Help="#Lang(527)">
          <Parameters>
            <Parameter Name="X" Order="0" VbType="" Help="#Lang(945)"/>
            <Parameter Name="Y" Order="0" VbType="" Help="#Lang(946)"/>
          </Parameters>
        </Event>
        <Event Name="getEvents" Help="#Lang(528)">
          <Parameters>
            <Parameter Name="start" Order="0" VbType="" Help="#Lang(947)"/>
            <Parameter Name="end" Order="0" VbType="" Help="#Lang(948)"/>
            <Parameter Name="view" Order="0" VbType="" Help="#Lang(949)"/>
            <Parameter Name="timezoneOffset" Order="0" VbType="" Help="#Lang(951)"/>
          </Parameters>
        </Event>
      </Userinterfaceevents>
    </Events>
    <Actions>
      <Container ID="2330fe83-8cd6-4ed5-907d-11874e7ebcf4">
        <Action Help="#Lang(501)" InterfaceName="#Lang(601)" MethodName="resizeTo">
          <Parameters>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(701)" ScriptName="width" Help="#Lang(801)" RegularExpressionValidation=".*"/>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(702)" ScriptName="height" Help="#Lang(802)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[var _w = parseInt(width,10);
var _h = parseInt(height,10);
if (!isNaN(_w) && !isNaN(_h))
{
	$q(this.domCont).width(_w).height(_h);
	jQuery("div#"+this.domCont.id).fullCalendar('option', 'height', _h);
}]]></SourceCode>
        </Action>
        <Action Help="#Lang(502)" InterfaceName="#Lang(602)" MethodName="hide">
          <Parameters>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(703)" ScriptName="fade" Help="#Lang(803)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[this.domCont.style.display = 'none';]]></SourceCode>
        </Action>
        <Action Help="#Lang(503)" InterfaceName="#Lang(603)" MethodName="show">
          <Parameters/>
          <SourceCode><![CDATA[this.domCont.style.display = 'block';]]></SourceCode>
        </Action>
        <Action Help="#Lang(504)" InterfaceName="#Lang(604)" MethodName="clearEventSource">
          <Parameters/>
          <SourceCode><![CDATA[jQuery("div#"+this.domCont.id).fullCalendar('removeEvents');]]></SourceCode>
        </Action>
        <Action Help="#Lang(505)" InterfaceName="#Lang(605)" MethodName="moveTo">
          <Parameters>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(704)" ScriptName="newX" Help="#Lang(804)" RegularExpressionValidation=".*"/>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(705)" ScriptName="newY" Help="#Lang(805)" RegularExpressionValidation=".*"/>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(706)" ScriptName="Effect" Help="#Lang(806)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[vdom_ui_moveTo(this.domCont, newX, newY, Effect);]]></SourceCode>
        </Action>
        <Action Help="#Lang(506)" InterfaceName="#Lang(606)" MethodName="gotoDate">
          <Parameters>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(707)" ScriptName="year" Help="#Lang(807)" RegularExpressionValidation=".*"/>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(708)" ScriptName="month" Help="#Lang(808)" RegularExpressionValidation=".*"/>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(709)" ScriptName="day" Help="#Lang(809)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[var _y = parseInt(year);
var _m = parseInt(month);
var _d = parseInt(day);
if (!isNaN(_y) && !isNaN(_m) && !isNaN(_d))
	jQuery("div#"+this.domCont.id).fullCalendar('gotoDate', _y , _m-1, _d);]]></SourceCode>
        </Action>
        <Action Help="#Lang(507)" InterfaceName="#Lang(607)" MethodName="moveZindexTo">
          <Parameters>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(711)" ScriptName="newZindex" Help="#Lang(811)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[var _z = parseInt(newZindex);
		  if (!isNaN(_z))
			this.domCont.style.zindex = _z;]]></SourceCode>
        </Action>
        <Action Help="#Lang(508)" InterfaceName="#Lang(608)" MethodName="changeViewTo">
          <Parameters>
            <Parameter DefaultValue="" Interface="" InterfaceName="#Lang(712)" ScriptName="viewName" Help="#Lang(812)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[var view = false;
			if (viewName == "month")
				view = "month";
			else if (viewName == "week")
				view = "agendaWeek";
			else if (viewName == "day")
				view = "agendaDay";

			if (view)
				jQuery("div#"+this.domCont.id).fullCalendar('changeView',view);]]></SourceCode>
        </Action>
        <Action Help="#Lang(509)" InterfaceName="#Lang(609)" MethodName="setEventsWithRrule">
          <Parameters>
            <Parameter DefaultValue="{}" Interface="" InterfaceName="#Lang(713)" ScriptName="eventData" Help="#Lang(813)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[eval('var data = ' + eventData + ';');
jQuery("div#"+this.domCont.id).fullCalendar('addEventSource', parseRruleSources(data));
/*
jQuery("div#"+this.domCont.id).fullCalendar('addEventSource', parseRruleSources(eventData));
*/]]></SourceCode>
        </Action>
        <Action Help="#Lang(511)" InterfaceName="#Lang(611)" MethodName="prev">
          <Parameters/>
          <SourceCode><![CDATA[jQuery("div#"+this.domCont.id).fullCalendar('prev');]]></SourceCode>
        </Action>
        <Action Help="#Lang(512)" InterfaceName="#Lang(612)" MethodName="setEventSource">
          <Parameters>
            <Parameter DefaultValue="0" Interface="" InterfaceName="#Lang(714)" ScriptName="eventSource" Help="#Lang(814)" RegularExpressionValidation=".*"/>
          </Parameters>
          <SourceCode><![CDATA[jQuery("div#"+this.domCont.id).fullCalendar('addEventSource', eval(eventSource) );]]></SourceCode>
        </Action>
        <Action Help="#Lang(513)" InterfaceName="#Lang(613)" MethodName="next">
          <Parameters/>
          <SourceCode><![CDATA[jQuery("div#"+this.domCont.id).fullCalendar('next');]]></SourceCode>
        </Action>
      </Container>
    </Actions>
  </E2vdom>
</Type>